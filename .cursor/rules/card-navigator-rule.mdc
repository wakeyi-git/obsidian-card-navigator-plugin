---
description: Card Navigator Plugin Design & Folder Structure
globs: 
alwaysApply: false
---
Card Navigator is an Obsidian plugin that supports both folder-based and tag-based note classification methods.
It is optimized to allow users to customize card views, apply filters, sorting, searching, and presets freely.

ğŸ”— Obsidian Integration Principles
	1.	Maximize the Use of Obsidian API
	â€¢	Extend and inherit key classes like Plugin, PluginSettingTab, ItemView
	â€¢	Utilize APIs such as Workspace, MetadataCache, and Vault for file and metadata access
	â€¢	Use UI components like Notice, Modal, and Menu
	â€¢	Leverage the event system for optimal performance
	2.	Maintain UI/UX Consistency
	â€¢	Follow Obsidianâ€™s design patterns and styles
	â€¢	Utilize Obsidianâ€™s built-in CSS variables for seamless light/dark mode support
	â€¢	Integrate with Obsidianâ€™s internationalization (i18n) system
	3.	Performance Optimization
	â€¢	Rendering Optimization: Use virtual scrolling (react-window) for smooth rendering of hundreds of cards
	â€¢	Event Optimization: Prevent unnecessary event listener registrations to minimize memory leaks
	â€¢	Data Caching: Reduce redundant API calls and file accesses

ğŸ› ï¸ Key Features Overview

1ï¸âƒ£ Mode Selection (Folder Mode vs Tag Mode)
	â€¢	Folder Mode: Organize card sets based on folders, using tags as filtering options
	â€¢	Tag Mode: Organize card sets based on tags, using folders as filtering options
	â€¢	Priority System
	â€¢	Folder Mode â†’ If a priority tag is set, the tag preset takes precedence
	â€¢	Tag Mode â†’ If a priority folder is set, the folder preset takes precedence
	â€¢	Instant mode switching via the toolbar

2ï¸âƒ£ Card UI & Interactions
	â€¢	Virtual Scrolling (react-window) â†’ Performance optimization
	â€¢	Customizable Styles (background color, font size, border, etc.)
	â€¢	Auto Color Assignment Based on Tags (highlighting important tags)
	â€¢	Inline Editing (edit directly within the card)

3ï¸âƒ£ Sorting & Filtering
	â€¢	Sorting Criteria:
	â€¢	Filename, creation date, modification date, custom front matter values
	â€¢	Filtering
	â€¢	Folder Mode â†’ Uses tag filtering
	â€¢	Tag Mode â†’ Uses folder filtering

4ï¸âƒ£ Preset Management
	â€¢	Configure folder/tag presets and apply them automatically
	â€¢	Set priority between folder and tag presets
	â€¢	Import/export presets

5ï¸âƒ£ Search Functionality
	â€¢	Real-time search (filters results instantly as you type)
	â€¢	Autocomplete with search suggestions (recent search history)
	â€¢	Supports regex search

6ï¸âƒ£ Settings UI
	â€¢	Choose default mode (folder/tag)
	â€¢	Configure priority tags and folders manually
	â€¢	Customize all card styles and display elements

ğŸ“‚ Optimized Folder Structure

card-navigator/
â”‚â”€â”€ src/  
â”‚   â”œâ”€â”€ domain/                # ğŸ§© Domain Layer (Core Business Logic)  
â”‚   â”‚   â”œâ”€â”€ mode/              # âœ… Folder Mode & Tag Mode Configuration  
â”‚   â”‚   â”œâ”€â”€ card/              # âœ… Card Model & Data Processing  
â”‚   â”‚   â”œâ”€â”€ layout/            # âœ… Card Layout Logic  
â”‚   â”‚   â”œâ”€â”€ sorting/           # âœ… Sorting Logic (Filename, Date, etc.)  
â”‚   â”‚   â”œâ”€â”€ search/            # âœ… Search Functionality  
â”‚   â”‚   â”œâ”€â”€ preset/            # âœ… Preset Management  
â”‚   â”œâ”€â”€ application/           # ğŸš€ Application Layer (Business Logic)  
â”‚   â”œâ”€â”€ infrastructure/        # ğŸ—ï¸ Infrastructure Layer (File System, API Integration)  
â”‚   â”œâ”€â”€ ui/                    # ğŸ¨ UI Layer  
â”‚   â”‚   â”œâ”€â”€ toolbar/           # âœ… íˆ´ë°” (ê²€ìƒ‰ & ë²„íŠ¼ ê·¸ë£¹)  
â”‚   â”‚   â”œâ”€â”€ cards-container/   # âœ… ì¹´ë“œ UI  
â”‚   â”‚   â”œâ”€â”€ layout/            # âœ… ë ˆì´ì•„ì›ƒ UI  
â”‚   â”‚   â”œâ”€â”€ presets/           # âœ… í”„ë¦¬ì…‹ UI  
â”‚   â”‚   â”œâ”€â”€ settings/          # âœ… ì„¤ì • UI  
â”‚   â”œâ”€â”€ main.ts                # ğŸ Plugin Entry Point  
â”‚   â”œâ”€â”€ manifest.json          # ğŸ“ Plugin Metadata  
â”‚â”€â”€ assets/                     # ğŸ¨ Icons, Localization Files  
â”‚â”€â”€ tests/                      # âœ… Test Code  
â”‚â”€â”€ docs/                       # ğŸ“– Documentation  

ğŸ“Œ Detailed Folder Descriptions

ğŸ“‚ domain/ (Domain Layer - Core Logic)
	â€¢	mode/
        â€¢	Mode.ts â†’ Folder Mode vs Tag Mode Configuration
        â€¢	FolderMode.ts â†’ Folder-based card set & filtering
        â€¢	TagMode.ts â†’ Tag-based card set & filtering
	â€¢	card/
        â€¢	Card.ts â†’ Card Model
        â€¢	CardFactory.ts â†’ Card creation logic
        â€¢	CardStyle.ts â†’ Card style management
        â€¢	CardContent.ts â†’ Card content data processing
        â€¢	CardActions.ts â†’ Card interactions (click, drag, etc.)
	â€¢	layout/
        â€¢	Layout.ts â†’ Layout Configuration
        â€¢	MasonryLayout.ts â†’ Masonry-style layout
        â€¢	GridLayout.ts â†’ Grid-style layout
	â€¢	sorting/
        â€¢	Sort.ts â†’ Sorting Model
        â€¢	SortManager.ts â†’ Sorting Management
	â€¢	search/
        â€¢	Search.ts â†’ Search Model
        â€¢	SearchManager.ts â†’ Search Management
        â€¢	RegexSearch.ts â†’ Regex-based search
	â€¢	preset/
        â€¢	Preset.ts â†’ Preset Model
        â€¢	PresetManager.ts â†’ Preset Management
        â€¢	applyPreset.ts â†’ Priority Application Logic

ğŸ“‚ application/ (Application Layer - Business Logic)
	â€¢	ModeService.ts â†’ Mode switching management
	â€¢	PresetService.ts â†’ Preset service
	â€¢	SortService.ts â†’ Sorting service
	â€¢	SearchService.ts â†’ Search service

ğŸ“‚ infrastructure/ (Infrastructure Layer - API & File System)
	â€¢	ObsidianAdapter.ts â†’ Obsidian API Integration
	â€¢	Storage.ts â†’ Configuration storage and loading
	â€¢	Cache.ts â†’ Data caching

ğŸ“‚ ui/ (UI Layer - User Interface)
	â€¢	toolbar/ â†’ Toolbar (Search & Button Group)
	â€¢	cards-container/ â†’ Card UI
	â€¢	layout/ â†’ Layout UI
	â€¢	presets/ â†’ Preset UI
	â€¢	settings/ â†’ Settings UI

Now, strictly follow these rules and proceed with the development of Card Navigator! ğŸš€
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CardNavigatorPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/ui/cardNavigator.ts
var import_obsidian4 = require("obsidian");

// src/ui/toolbar/toolbar.ts
var import_obsidian = require("obsidian");

// src/ui/toolbar/toolbarActions.ts
function moveCards(direction, plugin, amount = "single") {
  const view = plugin.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0].view;
  const cardContainer = view.cardContainer;
  const cardContainerEl = cardContainer.getContainerEl();
  if (!cardContainerEl) return;
  const { cardWidth, cardHeight, isVertical } = cardContainer.getCardSizeAndOrientation();
  const moveAmount = amount === "single" ? isVertical ? cardHeight : cardWidth : (isVertical ? cardHeight : cardWidth) * plugin.settings.cardsPerView;
  const currentScroll = isVertical ? cardContainerEl.scrollTop : cardContainerEl.scrollLeft;
  switch (direction) {
    case "up":
      cardContainerEl.scrollTo({ top: currentScroll - moveAmount, behavior: "smooth" });
      break;
    case "down":
      cardContainerEl.scrollTo({ top: currentScroll + moveAmount, behavior: "smooth" });
      break;
    case "left":
      cardContainerEl.scrollTo({ left: currentScroll - moveAmount, behavior: "smooth" });
      break;
    case "right":
      cardContainerEl.scrollTo({ left: currentScroll + moveAmount, behavior: "smooth" });
      break;
    case "center": {
      const activeCard = cardContainerEl.querySelector(".card-navigator-active");
      if (activeCard) {
        activeCard.scrollIntoView({ behavior: "smooth", block: "center", inline: "center" });
      }
      break;
    }
  }
}
function toggleSearch(plugin) {
  let searchPopup = document.querySelector(".card-navigator-search-popup");
  if (!searchPopup) {
    searchPopup = document.createElement("div");
    searchPopup.className = "card-navigator-search-popup";
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Search...";
    input.addEventListener("input", async () => {
      const searchTerm = input.value;
      const view = plugin.app.workspace.getLeavesOfType("card-navigator-view")[0].view;
      await view.cardContainer.searchCards(searchTerm);
    });
    searchPopup.appendChild(input);
    const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
    if (toolbarEl) {
      toolbarEl.insertAdjacentElement("afterend", searchPopup);
      document.addEventListener("click", function onClickOutside(event) {
        if (searchPopup && !searchPopup.contains(event.target) && !toolbarEl.contains(event.target)) {
          searchPopup.remove();
          document.removeEventListener("click", onClickOutside);
        }
      });
    }
  } else {
    searchPopup.classList.toggle("hidden");
  }
}
function toggleSort(plugin) {
  let sortPopup = document.querySelector(".card-navigator-sort-popup");
  if (!sortPopup) {
    sortPopup = document.createElement("div");
    sortPopup.className = "card-navigator-sort-popup";
    const options = ["fileName", "lastModified", "created"];
    options.forEach((option) => {
      const ascButton = document.createElement("button");
      ascButton.textContent = `${option} \u2191`;
      ascButton.addEventListener("click", async () => {
        await plugin.sortCards(option, "asc");
        sortPopup.classList.add("hidden");
      });
      const descButton = document.createElement("button");
      descButton.textContent = `${option} \u2193`;
      descButton.addEventListener("click", async () => {
        await plugin.sortCards(option, "desc");
        sortPopup.classList.add("hidden");
      });
      sortPopup.appendChild(ascButton);
      sortPopup.appendChild(descButton);
    });
    const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
    if (toolbarEl) {
      toolbarEl.insertAdjacentElement("afterend", sortPopup);
      document.addEventListener("click", function onClickOutside(event) {
        if (sortPopup && !sortPopup.contains(event.target) && !toolbarEl.contains(event.target)) {
          sortPopup.remove();
          document.removeEventListener("click", onClickOutside);
        }
      });
    }
  } else {
    sortPopup.classList.toggle("hidden");
  }
}
function toggleSettings(plugin) {
  let settingsPopup = document.querySelector(".card-navigator-settings-popup");
  if (!settingsPopup) {
    settingsPopup = document.createElement("div");
    settingsPopup.className = "card-navigator-settings-popup";
    const cardsPerViewSetting = document.createElement("input");
    cardsPerViewSetting.type = "range";
    cardsPerViewSetting.min = "1";
    cardsPerViewSetting.max = "10";
    cardsPerViewSetting.value = plugin.settings.cardsPerView.toString();
    cardsPerViewSetting.addEventListener("input", (e) => {
      const value = e.target.value;
      plugin.settings.cardsPerView = parseInt(value, 10);
      plugin.saveSettings();
      plugin.refreshViews();
    });
    const cardsPerViewLabel = document.createElement("label");
    cardsPerViewLabel.textContent = "Cards Per View:";
    settingsPopup.appendChild(cardsPerViewLabel);
    settingsPopup.appendChild(cardsPerViewSetting);
    const fontSizeSetting = document.createElement("input");
    fontSizeSetting.type = "range";
    fontSizeSetting.min = "10";
    fontSizeSetting.max = "30";
    fontSizeSetting.value = plugin.settings.contentSize.toString();
    fontSizeSetting.addEventListener("input", (e) => {
      const value = e.target.value;
      plugin.settings.contentSize = parseInt(value, 10);
      plugin.saveSettings();
      plugin.refreshViews();
    });
    const fontSizeLabel = document.createElement("label");
    fontSizeLabel.textContent = "Content Font Size:";
    settingsPopup.appendChild(fontSizeLabel);
    settingsPopup.appendChild(fontSizeSetting);
    const createToggle = (labelText, initialValue, onChange) => {
      const container = document.createElement("div");
      const label = document.createElement("label");
      label.textContent = labelText;
      const toggle = document.createElement("input");
      toggle.type = "checkbox";
      toggle.checked = initialValue;
      toggle.addEventListener("change", (e) => {
        onChange(e.target.checked);
        plugin.saveSettings();
        plugin.refreshViews();
      });
      container.appendChild(label);
      container.appendChild(toggle);
      return container;
    };
    const fileNameToggle = createToggle("Show File Name", plugin.settings.showFileName, (value) => {
      plugin.settings.showFileName = value;
    });
    settingsPopup.appendChild(fileNameToggle);
    const firstHeaderToggle = createToggle("Show First Header", plugin.settings.showFirstHeader, (value) => {
      plugin.settings.showFirstHeader = value;
    });
    settingsPopup.appendChild(firstHeaderToggle);
    const contentToggle = createToggle("Show Content", plugin.settings.showContent, (value) => {
      plugin.settings.showContent = value;
    });
    settingsPopup.appendChild(contentToggle);
    const dragDropContentToggle = createToggle("Drag and Drop Content", plugin.settings.dragDropContent, (value) => {
      plugin.settings.dragDropContent = value;
    });
    settingsPopup.appendChild(dragDropContentToggle);
    const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
    if (toolbarEl) {
      toolbarEl.insertAdjacentElement("afterend", settingsPopup);
      document.addEventListener("click", function onClickOutside(event) {
        if (settingsPopup && !settingsPopup.contains(event.target) && !toolbarEl.contains(event.target)) {
          settingsPopup.remove();
          document.removeEventListener("click", onClickOutside);
        }
      });
    }
  } else {
    settingsPopup.classList.toggle("hidden");
  }
}

// src/ui/toolbar/toolbar.ts
var Toolbar = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.containerEl = void 0;
    this.isVertical = false;
  }
  initialize(containerEl) {
    this.containerEl = containerEl;
    this.createToolbar();
  }
  setOrientation(isVertical) {
    if (this.isVertical !== isVertical) {
      this.isVertical = isVertical;
      this.updateToolbarStyle();
      this.createToolbar();
    }
  }
  updateToolbarStyle() {
    if (this.containerEl) {
      this.containerEl.classList.toggle("vertical", this.isVertical);
      this.containerEl.classList.toggle("horizontal", !this.isVertical);
    }
  }
  createToolbar() {
    if (!this.containerEl) {
      return;
    }
    this.containerEl.empty();
    const toolbarContainer = document.createElement("div");
    toolbarContainer.className = "card-navigator-toolbar-container";
    const moveIconsContainer = this.isVertical ? this.createVerticalMoveIconsContainer() : this.createHorizontalMoveIconsContainer();
    const separator = this.createSeparator();
    const actionIconsContainer = this.createActionIconsContainer();
    toolbarContainer.appendChild(moveIconsContainer);
    toolbarContainer.appendChild(separator);
    toolbarContainer.appendChild(actionIconsContainer);
    this.containerEl.appendChild(toolbarContainer);
  }
  getMode() {
    const view = this.plugin.app.workspace.getLeavesOfType("card-navigator-view")[0].view;
    return view.containerEl.clientHeight > view.containerEl.clientWidth ? "vertical" : "horizontal";
  }
  createVerticalMoveIconsContainer() {
    const container = document.createElement("div");
    container.className = "card-navigator-move-icons-container";
    const icons = [
      { name: "chevrons-up", label: "Move up multiple", action: () => moveCards("up", this.plugin, "multiple") },
      { name: "chevron-up", label: "Move up single", action: () => moveCards("up", this.plugin, "single") },
      { name: "chevrons-down-up", label: "Center active card", action: () => moveCards("center", this.plugin) },
      { name: "chevron-down", label: "Move down single", action: () => moveCards("down", this.plugin, "single") },
      { name: "chevrons-down", label: "Move down multiple", action: () => moveCards("down", this.plugin, "multiple") }
    ];
    icons.forEach((icon) => {
      const iconElement = this.createToolbarIcon(icon.name, icon.label, icon.action);
      container.appendChild(iconElement);
    });
    return container;
  }
  createHorizontalMoveIconsContainer() {
    const container = document.createElement("div");
    container.className = "card-navigator-move-icons-container";
    const icons = [
      { name: "chevrons-left", label: "Move left multiple", action: () => moveCards("left", this.plugin, "multiple") },
      { name: "chevron-left", label: "Move left single", action: () => moveCards("left", this.plugin, "single") },
      { name: "chevrons-right-left", label: "Center active card", action: () => moveCards("center", this.plugin) },
      { name: "chevron-right", label: "Move right single", action: () => moveCards("right", this.plugin, "single") },
      { name: "chevrons-right", label: "Move right multiple", action: () => moveCards("right", this.plugin, "multiple") }
    ];
    icons.forEach((icon) => {
      const iconElement = this.createToolbarIcon(icon.name, icon.label, icon.action);
      container.appendChild(iconElement);
    });
    return container;
  }
  createActionIconsContainer() {
    const container = document.createElement("div");
    container.className = "card-navigator-action-icons-container";
    const icons = [
      { name: "search", label: "Search", action: () => toggleSearch(this.plugin) },
      { name: "arrow-up-narrow-wide", label: "Sort cards", action: () => toggleSort(this.plugin) },
      { name: "settings", label: "Settings", action: () => toggleSettings(this.plugin) }
    ];
    icons.forEach((icon) => {
      const iconElement = this.createToolbarIcon(icon.name, icon.label, icon.action);
      container.appendChild(iconElement);
    });
    return container;
  }
  createSeparator() {
    const separator = document.createElement("div");
    separator.className = "toolbar-separator";
    return separator;
  }
  createToolbarIcon(iconName, ariaLabel, action) {
    const icon = document.createElement("div");
    icon.className = "clickable-icon";
    icon.setAttribute("aria-label", ariaLabel);
    (0, import_obsidian.setIcon)(icon, iconName);
    icon.addEventListener("click", action);
    return icon;
  }
  refresh() {
  }
  onClose() {
  }
};

// src/ui/cardContainer/cardContainer.ts
var import_obsidian3 = require("obsidian");

// src/ui/cardContainer/cardMaker.ts
var import_obsidian2 = require("obsidian");

// src/common/utils.ts
function debounce(func, waitFor) {
  let timeout = null;
  return (...args) => {
    if (timeout) {
      clearTimeout(timeout);
    }
    return new Promise((resolve) => {
      timeout = setTimeout(() => {
        const result = func(...args);
        resolve(result);
      }, waitFor);
    });
  };
}
function separateFrontmatterAndContent(content) {
  const frontmatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n/;
  const match = content.match(frontmatterRegex);
  return match ? { frontmatter: match[1], cleanContent: content.slice(match[0].length).trim() } : { frontmatter: null, cleanContent: content.trim() };
}
function sortFiles(files, criterion, locale = "en") {
  const collator = new Intl.Collator(locale, { numeric: true, sensitivity: "base" });
  return files.sort((a, b) => {
    switch (criterion) {
      case "fileName":
        return collator.compare(a.basename, b.basename);
      case "lastModified":
        return b.stat.mtime - a.stat.mtime;
      case "created":
        return b.stat.ctime - a.stat.ctime;
      default:
        return 0;
    }
  });
}
function calculateCardSize(isVertical, containerRect, cardsPerView, padding = 15) {
  const { width: leafWidth, height: leafHeight } = containerRect;
  let cardWidth, cardHeight;
  if (isVertical) {
    cardWidth = leafWidth - 2 * padding;
    cardHeight = leafHeight / cardsPerView;
  } else {
    cardWidth = leafWidth / cardsPerView;
    cardHeight = leafHeight - 2 * padding;
  }
  return { cardWidth, cardHeight };
}
function setContainerSize(containerEl, cardWidth, cardHeight, cardsPerView, isVertical) {
  if (isVertical) {
    containerEl.style.flexDirection = "column";
    containerEl.style.width = `${cardWidth}px`;
    containerEl.style.height = `${cardHeight * cardsPerView}px`;
  } else {
    containerEl.style.flexDirection = "row";
    containerEl.style.width = `${cardWidth * cardsPerView}px`;
    containerEl.style.height = `${cardHeight}px`;
  }
}

// src/ui/cardContainer/cardMaker.ts
var CardMaker = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async getCardsForActiveFile(activeFile) {
    const folder = activeFile.parent;
    if (!folder) {
      return [];
    }
    const files = folder.children.filter((file) => file instanceof import_obsidian2.TFile);
    const userLocale = navigator.language || "en";
    const sortedFiles = sortFiles(files, this.plugin.settings.sortCriterion, userLocale);
    return await Promise.all(sortedFiles.map((file) => this.createCard(file)));
  }
  async createCard(file) {
    const content = await this.plugin.app.vault.cachedRead(file);
    const { cleanContent } = separateFrontmatterAndContent(content);
    const contentWithoutHeader = this.removeFirstHeader(cleanContent);
    return {
      file,
      fileName: this.plugin.settings.showFileName ? file.basename : void 0,
      firstHeader: this.plugin.settings.showFirstHeader ? this.findFirstHeader(cleanContent) : void 0,
      content: this.plugin.settings.showContent ? this.truncateContent(contentWithoutHeader) : void 0
    };
  }
  removeFirstHeader(content) {
    const headerRegex = /^#+\s+(.+)$/m;
    return content.replace(headerRegex, "").trim();
  }
  findFirstHeader(content) {
    const headerRegex = /^#+\s+(.+)$/m;
    const match = content.match(headerRegex);
    return match ? match[1].trim() : void 0;
  }
  truncateContent(content) {
    const maxLength = this.plugin.settings.contentLength * 100;
    return content.length <= maxLength ? content : content.slice(0, maxLength) + "...";
  }
  createCardElement(card) {
    const cardElement = document.createElement("div");
    cardElement.className = "card-navigator-card";
    if (this.plugin.settings.showFileName && card.fileName) {
      const fileNameEl = cardElement.createEl("h3", { text: card.fileName });
      fileNameEl.className = "card-navigator-filename";
      fileNameEl.style.fontSize = `${this.plugin.settings.fileNameSize}px`;
    }
    if (this.plugin.settings.showFirstHeader && card.firstHeader) {
      const headerEl = cardElement.createEl("h4", { text: card.firstHeader });
      headerEl.className = "card-navigator-first-header";
      headerEl.style.fontSize = `${this.plugin.settings.firstHeaderSize}px`;
    }
    if (this.plugin.settings.showContent && card.content) {
      const contentEl = cardElement.createEl("p", { text: card.content });
      contentEl.className = "card-navigator-content";
      contentEl.style.fontSize = `${this.plugin.settings.contentSize}px`;
    }
    if (this.plugin.app.workspace.getActiveFile() === card.file) {
      cardElement.addClass("card-navigator-active");
    }
    this.addCardInteractions(cardElement, card);
    return cardElement;
  }
  addCardInteractions(cardElement, card) {
    cardElement.addEventListener("click", () => this.openFile(card.file));
    this.setupDragAndDrop(cardElement, card);
    this.setupContextMenu(cardElement, card.file);
  }
  setupDragAndDrop(cardElement, card) {
    cardElement.setAttribute("draggable", "true");
    cardElement.addEventListener("dragstart", (event) => {
      if (event.dataTransfer) {
        let dragContent = "";
        if (this.plugin.settings.dragDropContent) {
          if (this.plugin.settings.showFileName && card.fileName) {
            dragContent += `## ${card.fileName}

`;
          }
          if (this.plugin.settings.showFirstHeader && card.firstHeader) {
            dragContent += `# ${card.firstHeader}

`;
          }
          if (this.plugin.settings.showContent && card.content) {
            dragContent += `${card.content}

`;
          }
          if (dragContent === "") {
            dragContent = `[[${card.file.name}]]`;
          }
        } else {
          dragContent = `[[${card.file.name}]]`;
        }
        event.dataTransfer.setData("text/plain", dragContent.trim());
        event.dataTransfer.setDragImage(cardElement, 0, 0);
      }
    });
  }
  setupContextMenu(cardElement, file) {
    cardElement.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      const menu = new import_obsidian2.Menu();
      this.plugin.app.workspace.trigger("file-menu", menu, file, "more-options");
      menu.showAtPosition({ x: e.clientX, y: e.clientY });
    });
  }
  openFile(file) {
    this.plugin.app.workspace.getLeaf().openFile(file);
  }
};

// src/ui/cardContainer/cardContainer.ts
var CardContainer = class {
  constructor(plugin, leaf) {
    this.containerEl = null;
    this.cardWidth = 0;
    this.cardHeight = 0;
    this.plugin = plugin;
    this.leaf = leaf;
    this.cardMaker = new CardMaker(this.plugin);
    this.isVertical = false;
  }
  async initialize(containerEl) {
    this.containerEl = containerEl;
    await this.waitForLeafCreation();
    this.registerEvents();
    this.refresh();
  }
  setOrientation(isVertical) {
    this.isVertical = isVertical;
    this.updateContainerStyle();
  }
  setCardSize(cardWidth, cardHeight) {
    this.cardWidth = cardWidth;
    this.cardHeight = cardHeight;
  }
  getContainerEl() {
    return this.containerEl;
  }
  getCardSizeAndOrientation() {
    return {
      cardWidth: this.cardWidth,
      cardHeight: this.cardHeight,
      isVertical: this.isVertical
    };
  }
  updateContainerStyle() {
    if (this.containerEl) {
      if (this.isVertical) {
        this.containerEl.classList.add("vertical");
        this.containerEl.classList.remove("horizontal");
      } else {
        this.containerEl.classList.add("horizontal");
        this.containerEl.classList.remove("vertical");
      }
    }
  }
  async waitForLeafCreation() {
    return new Promise((resolve) => {
      const checkLeaf = () => {
        if (this.containerEl && this.containerEl.getBoundingClientRect().width > 0) {
          resolve();
        } else {
          requestAnimationFrame(checkLeaf);
        }
      };
      checkLeaf();
    });
  }
  registerEvents() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("active-leaf-change", debounce(this.refresh.bind(this), 100))
    );
    this.plugin.registerEvent(
      this.plugin.app.vault.on("modify", debounce(this.refresh.bind(this), 100))
    );
  }
  async refresh() {
    const activeFile = this.plugin.app.workspace.getActiveFile();
    if (!activeFile || !this.containerEl) {
      return;
    }
    setContainerSize(this.containerEl, this.cardWidth, this.cardHeight, this.plugin.settings.cardsPerView, this.isVertical);
    const cardsData = await this.cardMaker.getCardsForActiveFile(activeFile);
    this.renderCards(cardsData, this.cardWidth, this.cardHeight);
  }
  renderCards(cardsData, cardWidth, cardHeight) {
    const containerEl = this.containerEl;
    if (!containerEl) return;
    containerEl.innerHTML = "";
    containerEl.classList.toggle("card-container-horizontal", !this.isVertical);
    cardsData.forEach((cardData) => {
      const card = this.cardMaker.createCardElement(cardData);
      card.classList.toggle("card-navigator-card-horizontal", !this.isVertical);
      card.style.width = `${cardWidth}px`;
      card.style.height = `${cardHeight}px`;
      containerEl.appendChild(card);
    });
    if (this.plugin.settings.centerCardMethod === "scroll") {
      this.scrollToActiveCard(cardsData, cardWidth, cardHeight);
    }
  }
  renderActiveCardCentered(cardsData, activeIndex, cardWidth, cardHeight) {
    const containerEl = this.containerEl;
    if (!containerEl) {
      return;
    }
    const isVertical = this.isVertical;
    const leftCards = cardsData.slice(0, activeIndex);
    const rightCards = cardsData.slice(activeIndex + 1);
    const cardSpacing = 15;
    const containerSize = isVertical ? cardHeight : cardWidth;
    const totalSize = (containerSize + cardSpacing) * this.plugin.settings.cardsPerView - cardSpacing;
    const activeCardOffset = (totalSize - containerSize) / 2;
    let currentOffset = activeCardOffset - (leftCards.length * containerSize + leftCards.length * cardSpacing);
    leftCards.forEach((cardData) => {
      const card = this.cardMaker.createCardElement(cardData);
      card.style.position = "absolute";
      card.style.width = `${cardWidth}px`;
      card.style.height = `${cardHeight}px`;
      if (isVertical) {
        card.style.top = `${currentOffset}px`;
      } else {
        card.style.left = `${currentOffset}px`;
      }
      containerEl.appendChild(card);
      currentOffset += containerSize + cardSpacing;
    });
    const activeCard = this.cardMaker.createCardElement(cardsData[activeIndex]);
    activeCard.style.position = "absolute";
    activeCard.style.width = `${cardWidth}px`;
    activeCard.style.height = `${cardHeight}px`;
    if (isVertical) {
      activeCard.style.top = `${activeCardOffset}px`;
    } else {
      activeCard.style.left = `${activeCardOffset}px`;
    }
    containerEl.appendChild(activeCard);
    currentOffset = activeCardOffset + containerSize + cardSpacing;
    rightCards.forEach((cardData) => {
      const card = this.cardMaker.createCardElement(cardData);
      card.style.position = "absolute";
      card.style.width = `${cardWidth}px`;
      card.style.height = `${cardHeight}px`;
      if (isVertical) {
        card.style.top = `${currentOffset}px`;
      } else {
        card.style.left = `${currentOffset}px`;
      }
      containerEl.appendChild(card);
      currentOffset += containerSize + cardSpacing;
    });
  }
  scrollToActiveCard(cardsData, cardWidth, cardHeight) {
    const containerEl = this.containerEl;
    if (!containerEl) {
      return;
    }
    containerEl.innerHTML = "";
    let activeCard = null;
    cardsData.forEach((cardData) => {
      const card = this.cardMaker.createCardElement(cardData);
      card.style.width = `${cardWidth}px`;
      card.style.height = `${cardHeight}px`;
      containerEl.appendChild(card);
      if (card.classList.contains("card-navigator-active")) {
        activeCard = card;
      }
    });
    if (activeCard && this.plugin.settings.centerCardMethod === "scroll") {
      activeCard.scrollIntoView({ behavior: "smooth", block: "center", inline: "center" });
    }
  }
  displayCards(filteredFiles) {
  }
  async searchCards(searchTerm) {
    const activeFile = this.plugin.app.workspace.getActiveFile();
    if (!activeFile) return;
    const folder = activeFile.parent;
    if (!folder) return;
    const files = folder.children.filter((file) => file instanceof import_obsidian3.TFile);
    const filteredFiles = await this.filterFilesByContent(files, searchTerm);
    const cards = await Promise.all(filteredFiles.map(async (file) => ({
      file,
      fileName: this.plugin.settings.showFileName ? file.basename : void 0,
      firstHeader: this.plugin.settings.showFirstHeader ? await this.findFirstHeader(file) : void 0,
      content: this.plugin.settings.showContent ? await this.getFileContent(file) : void 0
    })));
    this.renderCards(cards, this.cardWidth, this.cardHeight);
  }
  async filterFilesByContent(files, searchTerm) {
    const lowercaseSearchTerm = searchTerm.toLowerCase();
    const filteredFiles = [];
    for (const file of files) {
      const content = await this.plugin.app.vault.cachedRead(file);
      if (file.basename.toLowerCase().includes(lowercaseSearchTerm) || content.toLowerCase().includes(lowercaseSearchTerm)) {
        filteredFiles.push(file);
      }
    }
    return filteredFiles;
  }
  async sortCards(criterion, order) {
    const activeFile = this.plugin.app.workspace.getActiveFile();
    if (!activeFile) return;
    const folder = activeFile.parent;
    if (!folder) return;
    const files = folder.children.filter((file) => file instanceof import_obsidian3.TFile);
    const sortedFiles = sortFiles(files, criterion, order);
    const cards = await Promise.all(sortedFiles.map(async (file) => ({
      file,
      fileName: this.plugin.settings.showFileName ? file.basename : void 0,
      firstHeader: this.plugin.settings.showFirstHeader ? await this.findFirstHeader(file) : void 0,
      content: this.plugin.settings.showContent ? await this.getFileContent(file) : void 0
    })));
    this.renderCards(cards, this.cardWidth, this.cardHeight);
  }
  async findFirstHeader(file) {
    const content = await this.plugin.app.vault.cachedRead(file);
    const headerRegex = /^#+\s+(.+)$/m;
    const match = content.match(headerRegex);
    return match ? match[1].trim() : void 0;
  }
  async getFileContent(file) {
    const content = await this.plugin.app.vault.cachedRead(file);
    const maxLength = this.plugin.settings.contentLength * 100;
    return content.length <= maxLength ? content : content.slice(0, maxLength) + "...";
  }
  onClose() {
  }
};

// src/ui/cardNavigator.ts
var VIEW_TYPE_CARD_NAVIGATOR = "card-navigator-view";
var CardNavigator = class extends import_obsidian4.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.toolbar = new Toolbar(this.plugin);
    this.cardContainer = new CardContainer(this.plugin, this.leaf);
    this.isVertical = this.calculateIsVertical();
    this.resizeObserver = new ResizeObserver(this.handleResize.bind(this));
  }
  getViewType() {
    return VIEW_TYPE_CARD_NAVIGATOR;
  }
  getDisplayText() {
    return "Card Navigator";
  }
  getIcon() {
    return "layers-3";
  }
  calculateIsVertical() {
    const { width, height } = this.leaf.view.containerEl.getBoundingClientRect();
    return height > width;
  }
  handleResize() {
    this.updateLayoutAndRefresh();
  }
  updateLayoutAndRefresh() {
    this.isVertical = this.calculateIsVertical();
    const containerRect = this.leaf.view.containerEl.getBoundingClientRect();
    const { cardWidth, cardHeight } = calculateCardSize(this.isVertical, containerRect, this.plugin.settings.cardsPerView);
    this.cardContainer.setOrientation(this.isVertical);
    this.cardContainer.setCardSize(cardWidth, cardHeight);
    this.toolbar.setOrientation(this.isVertical);
    this.refresh();
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const cardNavigatorContainerEl = container.createDiv("card-navigator");
    const toolbarEl = cardNavigatorContainerEl.createDiv("card-navigator-toolbar");
    const viewAreaEl = cardNavigatorContainerEl.createDiv("card-view-area");
    const cardContainerEl = viewAreaEl.createDiv("card-container");
    this.toolbar.initialize(toolbarEl);
    this.cardContainer.initialize(cardContainerEl);
    this.isVertical = this.calculateIsVertical();
    this.updateLayoutAndRefresh();
    this.resizeObserver.observe(this.leaf.view.containerEl);
    this.refresh();
  }
  async onClose() {
    this.resizeObserver.disconnect();
    this.toolbar.onClose();
    this.cardContainer.onClose();
  }
  refresh() {
    this.toolbar.refresh();
    this.cardContainer.refresh();
  }
};

// src/ui/settingsTab.ts
var import_obsidian5 = require("obsidian");
var SettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Card Navigator Settings" });
    new import_obsidian5.Setting(containerEl).setName("Cards per view").setDesc("Number of cards to display at once").addSlider((slider) => slider.setLimits(3, 9, 1).setValue(this.plugin.settings.cardsPerView).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.cardsPerView = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Drag and Drop Content").setDesc("When enabled, dragging a card will insert the note content instead of a link.").addToggle((toggle) => toggle.setValue(this.plugin.settings.dragDropContent).onChange(async (value) => {
      this.plugin.settings.dragDropContent = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Show File Name").setDesc("Toggle to display or hide the file name on cards").addToggle((toggle) => toggle.setValue(this.plugin.settings.showFileName).onChange(async (value) => {
      this.plugin.settings.showFileName = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("File Name Size").setDesc("Set the font size for the file name").addSlider((slider) => slider.setLimits(15, 25, 1).setValue(this.plugin.settings.fileNameSize).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.fileNameSize = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Show First Header").setDesc("Toggle to display or hide the first header on cards").addToggle((toggle) => toggle.setValue(this.plugin.settings.showFirstHeader).onChange(async (value) => {
      this.plugin.settings.showFirstHeader = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("First Header Size").setDesc("Set the font size for the first header").addSlider((slider) => slider.setLimits(15, 25, 1).setValue(this.plugin.settings.firstHeaderSize).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.firstHeaderSize = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Show Content").setDesc("Toggle to display or hide the content on cards").addToggle((toggle) => toggle.setValue(this.plugin.settings.showContent).onChange(async (value) => {
      this.plugin.settings.showContent = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Content Size").setDesc("Set the font size for the content").addSlider((slider) => slider.setLimits(10, 20, 1).setValue(this.plugin.settings.contentSize).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.contentSize = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
    new import_obsidian5.Setting(containerEl).setName("Content Length").setDesc("Maximum content length displayed on each card").addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.contentLength).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.contentLength = value;
      await this.plugin.saveSettings();
      this.plugin.refreshViews();
    }));
  }
};

// src/common/settings.ts
var DEFAULT_SETTINGS = {
  cardsPerView: 6,
  centerCardMethod: "scroll",
  activeCardBorderColor: "var(--active-border-color)",
  activeCardBackgroundColor: "var(--active-background-color)",
  sortCriterion: "fileName",
  dragDropContent: false,
  showFileName: true,
  fileNameSize: 20,
  showFirstHeader: true,
  firstHeaderSize: 18,
  showContent: true,
  contentSize: 15,
  contentLength: 5
};

// src/main.ts
var CardNavigatorPlugin = class extends import_obsidian6.Plugin {
  constructor() {
    super(...arguments);
    this.settings = DEFAULT_SETTINGS;
  }
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_CARD_NAVIGATOR,
      (leaf) => new CardNavigator(leaf, this)
    );
    this.addSettingTab(new SettingTab(this.app, this));
    this.addRibbonIcon("layers-3", "Activate Card Navigator", () => {
      this.activateView();
    });
    this.addCommand({
      id: "activate-card-navigator",
      name: "Activate Card Navigator",
      callback: () => {
        this.activateView();
      }
    });
    this.app.workspace.onLayoutReady(() => {
      this.activateView();
    });
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.refreshViews();
  }
  refreshViews() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.updateLayoutAndRefresh();
      }
    });
  }
  displayFilteredCards(filteredFiles) {
    const view = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0].view;
    view.cardContainer.displayCards(filteredFiles);
  }
  sortCards(criterion, order) {
    const view = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0].view;
    view.cardContainer.sortCards(criterion, order);
  }
  async activateView() {
    const { workspace } = this.app;
    let leaves = workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    let leaf = leaves[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        await rightLeaf.setViewState({ type: VIEW_TYPE_CARD_NAVIGATOR, active: true });
        leaves = workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
        leaf = leaves[0];
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3VpL2NhcmROYXZpZ2F0b3IudHMiLCAic3JjL3VpL3Rvb2xiYXIvdG9vbGJhci50cyIsICJzcmMvdWkvdG9vbGJhci90b29sYmFyQWN0aW9ucy50cyIsICJzcmMvdWkvY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyLnRzIiwgInNyYy91aS9jYXJkQ29udGFpbmVyL2NhcmRNYWtlci50cyIsICJzcmMvY29tbW9uL3V0aWxzLnRzIiwgInNyYy91aS9zZXR0aW5nc1RhYi50cyIsICJzcmMvY29tbW9uL3NldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBzcmMvbWFpbi50c1xuXG5pbXBvcnQgeyBQbHVnaW4sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvciwgVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SIH0gZnJvbSAnLi91aS9jYXJkTmF2aWdhdG9yJztcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICcuL3VpL3NldHRpbmdzVGFiJztcbmltcG9ydCB7IENhcmROYXZpZ2F0b3JTZXR0aW5ncyB9IGZyb20gJy4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL2NvbW1vbi9zZXR0aW5ncyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmROYXZpZ2F0b3JQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuXHRwdWJsaWMgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SLFxuICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBDYXJkTmF2aWdhdG9yKGxlYWYsIHRoaXMpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdsYXllcnMtMycsICdBY3RpdmF0ZSBDYXJkIE5hdmlnYXRvcicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2FjdGl2YXRlLWNhcmQtbmF2aWdhdG9yJyxcbiAgICAgICAgICAgIG5hbWU6ICdBY3RpdmF0ZSBDYXJkIE5hdmlnYXRvcicsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBvbnVubG9hZCgpIHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnJlZnJlc2hWaWV3cygpO1xuICAgIH1cblxuICAgIHJlZnJlc2hWaWV3cygpIHtcbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpO1xuICAgICAgICBsZWF2ZXMuZm9yRWFjaCgobGVhZikgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcbiAgICAgICAgICAgICAgICBsZWFmLnZpZXcudXBkYXRlTGF5b3V0QW5kUmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cblx0ZGlzcGxheUZpbHRlcmVkQ2FyZHMoZmlsdGVyZWRGaWxlczogVEZpbGVbXSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpWzBdLnZpZXcgYXMgQ2FyZE5hdmlnYXRvcjtcbiAgICAgICAgdmlldy5jYXJkQ29udGFpbmVyLmRpc3BsYXlDYXJkcyhmaWx0ZXJlZEZpbGVzKTtcbiAgICB9XG5cdFxuXHRzb3J0Q2FyZHMoY3JpdGVyaW9uOiAnZmlsZU5hbWUnIHwgJ2xhc3RNb2RpZmllZCcgfCAnY3JlYXRlZCcsIG9yZGVyOiAnYXNjJyB8ICdkZXNjJykge1xuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUilbMF0udmlldyBhcyBDYXJkTmF2aWdhdG9yO1xuXHRcdHZpZXcuY2FyZENvbnRhaW5lci5zb3J0Q2FyZHMoY3JpdGVyaW9uLCBvcmRlcik7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG5cdFx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuXHRcdGxldCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUik7XG5cdFx0bGV0IGxlYWYgPSBsZWF2ZXNbMF07XG5cdFxuXHRcdGlmICghbGVhZikge1xuXHRcdFx0Y29uc3QgcmlnaHRMZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG5cdFx0XHRpZiAocmlnaHRMZWFmKSB7XG5cdFx0XHRcdGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IsIGFjdGl2ZTogdHJ1ZSB9KTtcblx0XHRcdFx0bGVhdmVzID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpOyAvLyBcdUIyRTRcdUMyREMgXHVBQzAwXHVDODM4XHVDNjI0XHVBRTMwXG5cdFx0XHRcdGxlYWYgPSBsZWF2ZXNbMF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcblx0XHRpZiAobGVhZikge1xuXHRcdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdFx0fVxuXHR9XG5cdFxufVxuIiwgIi8vIHNyYy91aS9jYXJkTmF2aWdhdG9yLnRzXG5cbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IFRvb2xiYXIgfSBmcm9tICcuL3Rvb2xiYXIvdG9vbGJhcic7XG5pbXBvcnQgeyBDYXJkQ29udGFpbmVyIH0gZnJvbSAnLi9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXInO1xuaW1wb3J0IHsgY2FsY3VsYXRlQ2FyZFNpemUgfSBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SID0gXCJjYXJkLW5hdmlnYXRvci12aWV3XCI7XG5cbmV4cG9ydCBjbGFzcyBDYXJkTmF2aWdhdG9yIGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luO1xuICAgIHByaXZhdGUgdG9vbGJhcjogVG9vbGJhcjtcbiAgICBwdWJsaWMgY2FyZENvbnRhaW5lcjogQ2FyZENvbnRhaW5lcjtcbiAgICBwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlcjtcblx0cHJpdmF0ZSBpc1ZlcnRpY2FsOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy50b29sYmFyID0gbmV3IFRvb2xiYXIodGhpcy5wbHVnaW4pO1xuICAgICAgICB0aGlzLmNhcmRDb250YWluZXIgPSBuZXcgQ2FyZENvbnRhaW5lcih0aGlzLnBsdWdpbiwgdGhpcy5sZWFmKTtcblx0XHR0aGlzLmlzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcih0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUjtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2FyZCBOYXZpZ2F0b3JcIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImxheWVycy0zXCI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVJc1ZlcnRpY2FsKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMubGVhZi52aWV3LmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gaGVpZ2h0ID4gd2lkdGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVSZXNpemUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTGF5b3V0QW5kUmVmcmVzaCgpO1xuICAgIH1cbiAgICBcblx0cHVibGljIHVwZGF0ZUxheW91dEFuZFJlZnJlc2goKSB7XG5cdFx0dGhpcy5pc1ZlcnRpY2FsID0gdGhpcy5jYWxjdWxhdGVJc1ZlcnRpY2FsKCk7XG5cdFx0Y29uc3QgY29udGFpbmVyUmVjdCA9IHRoaXMubGVhZi52aWV3LmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdGNvbnN0IHsgY2FyZFdpZHRoLCBjYXJkSGVpZ2h0IH0gPSBjYWxjdWxhdGVDYXJkU2l6ZSh0aGlzLmlzVmVydGljYWwsIGNvbnRhaW5lclJlY3QsIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldyk7XG5cdFx0XG5cdFx0dGhpcy5jYXJkQ29udGFpbmVyLnNldE9yaWVudGF0aW9uKHRoaXMuaXNWZXJ0aWNhbCk7XG5cdFx0dGhpcy5jYXJkQ29udGFpbmVyLnNldENhcmRTaXplKGNhcmRXaWR0aCwgY2FyZEhlaWdodCk7XG5cdFx0dGhpcy50b29sYmFyLnNldE9yaWVudGF0aW9uKHRoaXMuaXNWZXJ0aWNhbCk7XG5cdFx0XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG5cdH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3QgY2FyZE5hdmlnYXRvckNvbnRhaW5lckVsID0gY29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1uYXZpZ2F0b3InKTtcbiAgICAgICAgY29uc3QgdG9vbGJhckVsID0gY2FyZE5hdmlnYXRvckNvbnRhaW5lckVsLmNyZWF0ZURpdignY2FyZC1uYXZpZ2F0b3ItdG9vbGJhcicpO1xuICAgICAgICBjb25zdCB2aWV3QXJlYUVsID0gY2FyZE5hdmlnYXRvckNvbnRhaW5lckVsLmNyZWF0ZURpdignY2FyZC12aWV3LWFyZWEnKTtcbiAgICAgICAgY29uc3QgY2FyZENvbnRhaW5lckVsID0gdmlld0FyZWFFbC5jcmVhdGVEaXYoJ2NhcmQtY29udGFpbmVyJyk7XG5cbiAgICAgICAgdGhpcy50b29sYmFyLmluaXRpYWxpemUodG9vbGJhckVsKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLmluaXRpYWxpemUoY2FyZENvbnRhaW5lckVsKTtcblxuXHRcdHRoaXMuaXNWZXJ0aWNhbCA9IHRoaXMuY2FsY3VsYXRlSXNWZXJ0aWNhbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxheW91dEFuZFJlZnJlc2goKTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMubGVhZi52aWV3LmNvbnRhaW5lckVsKTtcblxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBhc3luYyBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy50b29sYmFyLm9uQ2xvc2UoKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLm9uQ2xvc2UoKTtcbiAgICB9XG5cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLnRvb2xiYXIucmVmcmVzaCgpO1xuICAgICAgICB0aGlzLmNhcmRDb250YWluZXIucmVmcmVzaCgpO1xuICAgIH1cbn1cbiIsICIvLyBzcmMvdWkvdG9vbGJhci90b29sYmFyLnRzXG5cbmltcG9ydCB7IHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IG1vdmVDYXJkcywgdG9nZ2xlU2VhcmNoLCB0b2dnbGVTb3J0LCB0b2dnbGVTZXR0aW5ncyB9IGZyb20gJy4vdG9vbGJhckFjdGlvbnMnO1xuXG5leHBvcnQgY2xhc3MgVG9vbGJhciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cdHByaXZhdGUgaXNWZXJ0aWNhbDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG5cdFx0dGhpcy5pc1ZlcnRpY2FsID0gZmFsc2U7XG5cdH1cblxuICAgIGluaXRpYWxpemUoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgfVxuXG5cdHNldE9yaWVudGF0aW9uKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCAhPT0gaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbGJhclN0eWxlKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXHRwcml2YXRlIHVwZGF0ZVRvb2xiYXJTdHlsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmVydGljYWwnLCB0aGlzLmlzVmVydGljYWwpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdob3Jpem9udGFsJywgIXRoaXMuaXNWZXJ0aWNhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRvb2xiYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9vbGJhckNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInO1xuXG4gICAgICAgIGNvbnN0IG1vdmVJY29uc0NvbnRhaW5lciA9IHRoaXMuaXNWZXJ0aWNhbCA/IHRoaXMuY3JlYXRlVmVydGljYWxNb3ZlSWNvbnNDb250YWluZXIoKSA6IHRoaXMuY3JlYXRlSG9yaXpvbnRhbE1vdmVJY29uc0NvbnRhaW5lcigpO1xuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSB0aGlzLmNyZWF0ZVNlcGFyYXRvcigpO1xuICAgICAgICBjb25zdCBhY3Rpb25JY29uc0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlQWN0aW9uSWNvbnNDb250YWluZXIoKTtcblxuICAgICAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vdmVJY29uc0NvbnRhaW5lcik7XG4gICAgICAgIHRvb2xiYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTtcbiAgICAgICAgdG9vbGJhckNvbnRhaW5lci5hcHBlbmRDaGlsZChhY3Rpb25JY29uc0NvbnRhaW5lcik7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZCh0b29sYmFyQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE1vZGUoKTogJ3ZlcnRpY2FsJyB8ICdob3Jpem9udGFsJyB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FyZC1uYXZpZ2F0b3ItdmlldycpWzBdLnZpZXc7XG4gICAgICAgIHJldHVybiB2aWV3LmNvbnRhaW5lckVsLmNsaWVudEhlaWdodCA+IHZpZXcuY29udGFpbmVyRWwuY2xpZW50V2lkdGggPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVmVydGljYWxNb3ZlSWNvbnNDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1tb3ZlLWljb25zLWNvbnRhaW5lcic7XG5cbiAgICAgICAgY29uc3QgaWNvbnMgPSBbXG4gICAgICAgICAgICB7IG5hbWU6ICdjaGV2cm9ucy11cCcsIGxhYmVsOiAnTW92ZSB1cCBtdWx0aXBsZScsIGFjdGlvbjogKCkgPT4gbW92ZUNhcmRzKCd1cCcsIHRoaXMucGx1Z2luLCAnbXVsdGlwbGUnKSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY2hldnJvbi11cCcsIGxhYmVsOiAnTW92ZSB1cCBzaW5nbGUnLCBhY3Rpb246ICgpID0+IG1vdmVDYXJkcygndXAnLCB0aGlzLnBsdWdpbiwgJ3NpbmdsZScpIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjaGV2cm9ucy1kb3duLXVwJywgbGFiZWw6ICdDZW50ZXIgYWN0aXZlIGNhcmQnLCBhY3Rpb246ICgpID0+IG1vdmVDYXJkcygnY2VudGVyJywgdGhpcy5wbHVnaW4pIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjaGV2cm9uLWRvd24nLCBsYWJlbDogJ01vdmUgZG93biBzaW5nbGUnLCBhY3Rpb246ICgpID0+IG1vdmVDYXJkcygnZG93bicsIHRoaXMucGx1Z2luLCAnc2luZ2xlJykgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2NoZXZyb25zLWRvd24nLCBsYWJlbDogJ01vdmUgZG93biBtdWx0aXBsZScsIGFjdGlvbjogKCkgPT4gbW92ZUNhcmRzKCdkb3duJywgdGhpcy5wbHVnaW4sICdtdWx0aXBsZScpIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgaWNvbnMuZm9yRWFjaChpY29uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGljb25FbGVtZW50ID0gdGhpcy5jcmVhdGVUb29sYmFySWNvbihpY29uLm5hbWUsIGljb24ubGFiZWwsIGljb24uYWN0aW9uKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uRWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVIb3Jpem9udGFsTW92ZUljb25zQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItbW92ZS1pY29ucy1jb250YWluZXInO1xuXG4gICAgICAgIGNvbnN0IGljb25zID0gW1xuICAgICAgICAgICAgeyBuYW1lOiAnY2hldnJvbnMtbGVmdCcsIGxhYmVsOiAnTW92ZSBsZWZ0IG11bHRpcGxlJywgYWN0aW9uOiAoKSA9PiBtb3ZlQ2FyZHMoJ2xlZnQnLCB0aGlzLnBsdWdpbiwgJ211bHRpcGxlJykgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2NoZXZyb24tbGVmdCcsIGxhYmVsOiAnTW92ZSBsZWZ0IHNpbmdsZScsIGFjdGlvbjogKCkgPT4gbW92ZUNhcmRzKCdsZWZ0JywgdGhpcy5wbHVnaW4sICdzaW5nbGUnKSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY2hldnJvbnMtcmlnaHQtbGVmdCcsIGxhYmVsOiAnQ2VudGVyIGFjdGl2ZSBjYXJkJywgYWN0aW9uOiAoKSA9PiBtb3ZlQ2FyZHMoJ2NlbnRlcicsIHRoaXMucGx1Z2luKSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnY2hldnJvbi1yaWdodCcsIGxhYmVsOiAnTW92ZSByaWdodCBzaW5nbGUnLCBhY3Rpb246ICgpID0+IG1vdmVDYXJkcygncmlnaHQnLCB0aGlzLnBsdWdpbiwgJ3NpbmdsZScpIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdjaGV2cm9ucy1yaWdodCcsIGxhYmVsOiAnTW92ZSByaWdodCBtdWx0aXBsZScsIGFjdGlvbjogKCkgPT4gbW92ZUNhcmRzKCdyaWdodCcsIHRoaXMucGx1Z2luLCAnbXVsdGlwbGUnKSB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGljb25zLmZvckVhY2goaWNvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IHRoaXMuY3JlYXRlVG9vbGJhckljb24oaWNvbi5uYW1lLCBpY29uLmxhYmVsLCBpY29uLmFjdGlvbik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbkVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQWN0aW9uSWNvbnNDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1hY3Rpb24taWNvbnMtY29udGFpbmVyJztcblxuICAgICAgICBjb25zdCBpY29ucyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogJ3NlYXJjaCcsIGxhYmVsOiAnU2VhcmNoJywgYWN0aW9uOiAoKSA9PiB0b2dnbGVTZWFyY2godGhpcy5wbHVnaW4pIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdhcnJvdy11cC1uYXJyb3ctd2lkZScsIGxhYmVsOiAnU29ydCBjYXJkcycsIGFjdGlvbjogKCkgPT4gdG9nZ2xlU29ydCh0aGlzLnBsdWdpbikgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ3NldHRpbmdzJywgbGFiZWw6ICdTZXR0aW5ncycsIGFjdGlvbjogKCkgPT4gdG9nZ2xlU2V0dGluZ3ModGhpcy5wbHVnaW4pIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgaWNvbnMuZm9yRWFjaChpY29uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGljb25FbGVtZW50ID0gdGhpcy5jcmVhdGVUb29sYmFySWNvbihpY29uLm5hbWUsIGljb24ubGFiZWwsIGljb24uYWN0aW9uKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uRWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTZXBhcmF0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc2VwYXJhdG9yLmNsYXNzTmFtZSA9ICd0b29sYmFyLXNlcGFyYXRvcic7XG4gICAgICAgIHJldHVybiBzZXBhcmF0b3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUb29sYmFySWNvbihpY29uTmFtZTogc3RyaW5nLCBhcmlhTGFiZWw6IHN0cmluZywgYWN0aW9uOiAoKSA9PiB2b2lkKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGljb24uY2xhc3NOYW1lID0gJ2NsaWNrYWJsZS1pY29uJztcbiAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBhcmlhTGFiZWwpO1xuXG4gICAgICAgIHNldEljb24oaWNvbiwgaWNvbk5hbWUpO1xuICAgICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWN0aW9uKTtcblxuICAgICAgICByZXR1cm4gaWNvbjtcbiAgICB9XG5cdFxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIC8vIEltcGxlbWVudCByZWZyZXNoIGxvZ2ljIGlmIG5lY2Vzc2FyeVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIC8vIENsZWFudXAgdG9vbGJhci1yZWxhdGVkIHJlc291cmNlc1xuICAgIH1cbn1cbiIsICIvLyBzcmMvdWkvdG9vbGJhci90b29sYmFyQWN0aW9ucy50c1xuXG5pbXBvcnQgeyBDYXJkTmF2aWdhdG9yIH0gZnJvbSAnLi4vY2FyZE5hdmlnYXRvcic7XG5pbXBvcnQgeyBWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IgfSBmcm9tICcuLi9jYXJkTmF2aWdhdG9yJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gbW92ZUNhcmRzKGRpcmVjdGlvbjogc3RyaW5nLCBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIGFtb3VudDogJ3NpbmdsZScgfCAnbXVsdGlwbGUnID0gJ3NpbmdsZScpIHtcbiAgICBjb25zdCB2aWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUilbMF0udmlldyBhcyBDYXJkTmF2aWdhdG9yO1xuICAgIGNvbnN0IGNhcmRDb250YWluZXIgPSB2aWV3LmNhcmRDb250YWluZXI7XG4gICAgY29uc3QgY2FyZENvbnRhaW5lckVsID0gY2FyZENvbnRhaW5lci5nZXRDb250YWluZXJFbCgpO1xuICAgIGlmICghY2FyZENvbnRhaW5lckVsKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGNhcmRXaWR0aCwgY2FyZEhlaWdodCwgaXNWZXJ0aWNhbCB9ID0gY2FyZENvbnRhaW5lci5nZXRDYXJkU2l6ZUFuZE9yaWVudGF0aW9uKCk7XG5cbiAgICBjb25zdCBtb3ZlQW1vdW50ID0gYW1vdW50ID09PSAnc2luZ2xlJ1xuICAgICAgICA/IChpc1ZlcnRpY2FsID8gY2FyZEhlaWdodCA6IGNhcmRXaWR0aClcbiAgICAgICAgOiAoaXNWZXJ0aWNhbCA/IGNhcmRIZWlnaHQgOiBjYXJkV2lkdGgpICogcGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldztcbiAgICBcbiAgICBjb25zdCBjdXJyZW50U2Nyb2xsID0gaXNWZXJ0aWNhbCA/IGNhcmRDb250YWluZXJFbC5zY3JvbGxUb3AgOiBjYXJkQ29udGFpbmVyRWwuc2Nyb2xsTGVmdDtcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICAgIGNhcmRDb250YWluZXJFbC5zY3JvbGxUbyh7IHRvcDogY3VycmVudFNjcm9sbCAtIG1vdmVBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgICAgIGNhcmRDb250YWluZXJFbC5zY3JvbGxUbyh7IHRvcDogY3VycmVudFNjcm9sbCArIG1vdmVBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgIGNhcmRDb250YWluZXJFbC5zY3JvbGxUbyh7IGxlZnQ6IGN1cnJlbnRTY3JvbGwgLSBtb3ZlQW1vdW50LCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgY2FyZENvbnRhaW5lckVsLnNjcm9sbFRvKHsgbGVmdDogY3VycmVudFNjcm9sbCArIG1vdmVBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjZW50ZXInOiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDYXJkID0gY2FyZENvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci1hY3RpdmUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChhY3RpdmVDYXJkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQ2FyZC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInLCBpbmxpbmU6ICdjZW50ZXInIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVTZWFyY2gocGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG4gICAgbGV0IHNlYXJjaFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXNlYXJjaC1wb3B1cCcpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKCFzZWFyY2hQb3B1cCkge1xuICAgICAgICBzZWFyY2hQb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzZWFyY2hQb3B1cC5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3Itc2VhcmNoLXBvcHVwJztcblxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gJ1NlYXJjaC4uLic7XG5cbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gaW5wdXQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdjYXJkLW5hdmlnYXRvci12aWV3JylbMF0udmlldyBhcyBDYXJkTmF2aWdhdG9yO1xuICAgICAgICAgICAgYXdhaXQgdmlldy5jYXJkQ29udGFpbmVyLnNlYXJjaENhcmRzKHNlYXJjaFRlcm0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZWFyY2hQb3B1cC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgICAgICAgLy8gXHVEMjM0XHVCQzE0IFx1RDU1OFx1QjJFOFx1QzVEMCBcdUJDMzBcdUNFNThcbiAgICAgICAgY29uc3QgdG9vbGJhckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXRvb2xiYXItY29udGFpbmVyJyk7XG4gICAgICAgIGlmICh0b29sYmFyRWwpIHtcbiAgICAgICAgICAgIHRvb2xiYXJFbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgc2VhcmNoUG9wdXApO1xuXG4gICAgICAgICAgICAvLyBcdUQ2NTRcdUJBNzRcdUM3NTggXHVCMkU0XHVCOTc4IFx1QUNGM1x1Qzc0NCBcdUQwNzRcdUI5QURcdUQ1NThcdUJBNzQgXHVEMzFEXHVDNUM1XHVDNzQ0IFx1QjJFQlx1QjI5NCBcdUM3NzRcdUJDQTRcdUQyQjggXHVDRDk0XHVBQzAwXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIG9uQ2xpY2tPdXRzaWRlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaFBvcHVwICYmICFzZWFyY2hQb3B1cC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkgJiYgIXRvb2xiYXJFbC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja091dHNpZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VhcmNoUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlU29ydChwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHtcbiAgICBsZXQgc29ydFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXNvcnQtcG9wdXAnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmICghc29ydFBvcHVwKSB7XG4gICAgICAgIHNvcnRQb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzb3J0UG9wdXAuY2xhc3NOYW1lID0gJ2NhcmQtbmF2aWdhdG9yLXNvcnQtcG9wdXAnO1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEFycmF5PCdmaWxlTmFtZScgfCAnbGFzdE1vZGlmaWVkJyB8ICdjcmVhdGVkJz4gPSBbJ2ZpbGVOYW1lJywgJ2xhc3RNb2RpZmllZCcsICdjcmVhdGVkJ107XG4gICAgICAgIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYXNjQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBhc2NCdXR0b24udGV4dENvbnRlbnQgPSBgJHtvcHRpb259IFx1MjE5MWA7XG4gICAgICAgICAgICBhc2NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNvcnRDYXJkcyhvcHRpb24sICdhc2MnKTtcbiAgICAgICAgICAgICAgICBzb3J0UG9wdXAuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGVzY0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgZGVzY0J1dHRvbi50ZXh0Q29udGVudCA9IGAke29wdGlvbn0gXHUyMTkzYDtcbiAgICAgICAgICAgIGRlc2NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNvcnRDYXJkcyhvcHRpb24sICdkZXNjJyk7XG4gICAgICAgICAgICAgICAgc29ydFBvcHVwLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNvcnRQb3B1cC5hcHBlbmRDaGlsZChhc2NCdXR0b24pO1xuICAgICAgICAgICAgc29ydFBvcHVwLmFwcGVuZENoaWxkKGRlc2NCdXR0b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUQyMzRcdUJDMTQgXHVENTU4XHVCMkU4XHVDNUQwIFx1QkMzMFx1Q0U1OFxuICAgICAgICBjb25zdCB0b29sYmFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInKTtcbiAgICAgICAgaWYgKHRvb2xiYXJFbCkge1xuICAgICAgICAgICAgdG9vbGJhckVsLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBzb3J0UG9wdXApO1xuXG4gICAgICAgICAgICAvLyBcdUQ2NTRcdUJBNzRcdUM3NTggXHVCMkU0XHVCOTc4IFx1QUNGM1x1Qzc0NCBcdUQwNzRcdUI5QURcdUQ1NThcdUJBNzQgXHVEMzFEXHVDNUM1XHVDNzQ0IFx1QjJFQlx1QjI5NCBcdUM3NzRcdUJDQTRcdUQyQjggXHVDRDk0XHVBQzAwXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIG9uQ2xpY2tPdXRzaWRlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvcnRQb3B1cCAmJiAhc29ydFBvcHVwLmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSAmJiAhdG9vbGJhckVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBzb3J0UG9wdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja091dHNpZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc29ydFBvcHVwLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVNldHRpbmdzKHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbikge1xuICAgIGxldCBzZXR0aW5nc1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXNldHRpbmdzLXBvcHVwJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAoIXNldHRpbmdzUG9wdXApIHtcbiAgICAgICAgc2V0dGluZ3NQb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzZXR0aW5nc1BvcHVwLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1zZXR0aW5ncy1wb3B1cCc7XG5cbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzIxOCBcdUMxMjRcdUM4MTVcbiAgICAgICAgY29uc3QgY2FyZHNQZXJWaWV3U2V0dGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcudHlwZSA9ICdyYW5nZSc7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcubWluID0gJzEnO1xuICAgICAgICBjYXJkc1BlclZpZXdTZXR0aW5nLm1heCA9ICcxMCc7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcudmFsdWUgPSBwbHVnaW4uc2V0dGluZ3MuY2FyZHNQZXJWaWV3LnRvU3RyaW5nKCk7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY2FyZHNQZXJWaWV3ID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICAgIHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoVmlld3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNhcmRzUGVyVmlld0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgY2FyZHNQZXJWaWV3TGFiZWwudGV4dENvbnRlbnQgPSAnQ2FyZHMgUGVyIFZpZXc6JztcbiAgICAgICAgc2V0dGluZ3NQb3B1cC5hcHBlbmRDaGlsZChjYXJkc1BlclZpZXdMYWJlbCk7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoY2FyZHNQZXJWaWV3U2V0dGluZyk7XG5cbiAgICAgICAgLy8gXHVBRTAwXHVDNzkwIFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcbiAgICAgICAgY29uc3QgZm9udFNpemVTZXR0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZm9udFNpemVTZXR0aW5nLnR5cGUgPSAncmFuZ2UnO1xuICAgICAgICBmb250U2l6ZVNldHRpbmcubWluID0gJzEwJztcbiAgICAgICAgZm9udFNpemVTZXR0aW5nLm1heCA9ICczMCc7XG4gICAgICAgIGZvbnRTaXplU2V0dGluZy52YWx1ZSA9IHBsdWdpbi5zZXR0aW5ncy5jb250ZW50U2l6ZS50b1N0cmluZygpO1xuICAgICAgICBmb250U2l6ZVNldHRpbmcuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY29udGVudFNpemUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgcGx1Z2luLnJlZnJlc2hWaWV3cygpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZm9udFNpemVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGZvbnRTaXplTGFiZWwudGV4dENvbnRlbnQgPSAnQ29udGVudCBGb250IFNpemU6JztcbiAgICAgICAgc2V0dGluZ3NQb3B1cC5hcHBlbmRDaGlsZChmb250U2l6ZUxhYmVsKTtcbiAgICAgICAgc2V0dGluZ3NQb3B1cC5hcHBlbmRDaGlsZChmb250U2l6ZVNldHRpbmcpO1xuXG4gICAgICAgIC8vIFx1RDQ1Q1x1QzJEQyBcdUQ1NkRcdUJBQTkgXHVDMTIwXHVEMEREXHVDNzQ0IFx1QzcwNFx1RDU1QyBcdUQxQTBcdUFFMDAgXHVCQzg0XHVEMkJDXHVCNEU0XG4gICAgICAgIGNvbnN0IGNyZWF0ZVRvZ2dsZSA9IChsYWJlbFRleHQ6IHN0cmluZywgaW5pdGlhbFZhbHVlOiBib29sZWFuLCBvbkNoYW5nZTogKHZhbHVlOiBib29sZWFuKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbGFiZWxUZXh0O1xuXG4gICAgICAgICAgICBjb25zdCB0b2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgdG9nZ2xlLnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgdG9nZ2xlLmNoZWNrZWQgPSBpbml0aWFsVmFsdWU7XG4gICAgICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZSgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIHBsdWdpbi5yZWZyZXNoVmlld3MoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRvZ2dsZSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEZpbGUgTmFtZSBcdUQ0NUNcdUMyRENcbiAgICAgICAgY29uc3QgZmlsZU5hbWVUb2dnbGUgPSBjcmVhdGVUb2dnbGUoJ1Nob3cgRmlsZSBOYW1lJywgcGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSwgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3Muc2hvd0ZpbGVOYW1lID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXR0aW5nc1BvcHVwLmFwcGVuZENoaWxkKGZpbGVOYW1lVG9nZ2xlKTtcblxuICAgICAgICAvLyBGaXJzdCBIZWFkZXIgXHVENDVDXHVDMkRDXG4gICAgICAgIGNvbnN0IGZpcnN0SGVhZGVyVG9nZ2xlID0gY3JlYXRlVG9nZ2xlKCdTaG93IEZpcnN0IEhlYWRlcicsIHBsdWdpbi5zZXR0aW5ncy5zaG93Rmlyc3RIZWFkZXIsICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0dGluZ3NQb3B1cC5hcHBlbmRDaGlsZChmaXJzdEhlYWRlclRvZ2dsZSk7XG5cbiAgICAgICAgLy8gQ29udGVudCBcdUQ0NUNcdUMyRENcbiAgICAgICAgY29uc3QgY29udGVudFRvZ2dsZSA9IGNyZWF0ZVRvZ2dsZSgnU2hvdyBDb250ZW50JywgcGx1Z2luLnNldHRpbmdzLnNob3dDb250ZW50LCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5zaG93Q29udGVudCA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0dGluZ3NQb3B1cC5hcHBlbmRDaGlsZChjb250ZW50VG9nZ2xlKTtcblxuICAgICAgICAvLyBEcmFnIGFuZCBEcm9wIENvbnRlbnQgXHVENDVDXHVDMkRDIChcdUMwQzhcdUI4NUMgXHVDRDk0XHVBQzAwXHVCNDFDIFx1QkQ4MFx1QkQ4NClcbiAgICAgICAgY29uc3QgZHJhZ0Ryb3BDb250ZW50VG9nZ2xlID0gY3JlYXRlVG9nZ2xlKCdEcmFnIGFuZCBEcm9wIENvbnRlbnQnLCBwbHVnaW4uc2V0dGluZ3MuZHJhZ0Ryb3BDb250ZW50LCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5kcmFnRHJvcENvbnRlbnQgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoZHJhZ0Ryb3BDb250ZW50VG9nZ2xlKTtcblxuICAgICAgICAvLyBcdUQyMzRcdUJDMTQgXHVENTU4XHVCMkU4XHVDNUQwIFx1QkMzMFx1Q0U1OFxuICAgICAgICBjb25zdCB0b29sYmFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInKTtcbiAgICAgICAgaWYgKHRvb2xiYXJFbCkge1xuICAgICAgICAgICAgdG9vbGJhckVsLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBzZXR0aW5nc1BvcHVwKTtcblxuICAgICAgICAgICAgLy8gXHVENjU0XHVCQTc0XHVDNzU4IFx1QjJFNFx1Qjk3OCBcdUFDRjNcdUM3NDQgXHVEMDc0XHVCOUFEXHVENTU4XHVCQTc0IFx1RDMxRFx1QzVDNVx1Qzc0NCBcdUIyRUJcdUIyOTQgXHVDNzc0XHVCQ0E0XHVEMkI4IFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBvbkNsaWNrT3V0c2lkZShldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nc1BvcHVwICYmICFzZXR0aW5nc1BvcHVwLmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSAmJiAhdG9vbGJhckVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc1BvcHVwLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPdXRzaWRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxufVxuIiwgIi8vIHNyYy91aS9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXIudHNcblxuaW1wb3J0IHsgV29ya3NwYWNlTGVhZiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJ21haW4nO1xuaW1wb3J0IHsgQ2FyZE1ha2VyIH0gZnJvbSAnLi9jYXJkTWFrZXInXG5pbXBvcnQgeyBkZWJvdW5jZSwgc29ydEZpbGVzLCBzZXRDb250YWluZXJTaXplIH0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcbmltcG9ydCB7IENhcmQsIFNvcnRDcml0ZXJpb24gfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2FyZENvbnRhaW5lciB7XG4gICAgcHJpdmF0ZSBsZWFmOiBXb3Jrc3BhY2VMZWFmO1xuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjYXJkTWFrZXI6IENhcmRNYWtlcjtcbiAgICBwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbjtcblx0cHJpdmF0ZSBpc1ZlcnRpY2FsOiBib29sZWFuO1xuXHRwcml2YXRlIGNhcmRXaWR0aCA9IDA7XG4gICAgcHJpdmF0ZSBjYXJkSGVpZ2h0ID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgbGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5sZWFmID0gbGVhZjtcbiAgICAgICAgdGhpcy5jYXJkTWFrZXIgPSBuZXcgQ2FyZE1ha2VyKHRoaXMucGx1Z2luKTtcbiAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JMZWFmQ3JlYXRpb24oKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50cygpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cblx0c2V0T3JpZW50YXRpb24oaXNWZXJ0aWNhbDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lclN0eWxlKCk7XG4gICAgfVxuXG4gICAgc2V0Q2FyZFNpemUoY2FyZFdpZHRoOiBudW1iZXIsIGNhcmRIZWlnaHQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmNhcmRXaWR0aCA9IGNhcmRXaWR0aDtcbiAgICAgICAgdGhpcy5jYXJkSGVpZ2h0ID0gY2FyZEhlaWdodDtcbiAgICB9XG5cbiAgICBnZXRDb250YWluZXJFbCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJFbDtcbiAgICB9XG5cbiAgICBnZXRDYXJkU2l6ZUFuZE9yaWVudGF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FyZFdpZHRoOiB0aGlzLmNhcmRXaWR0aCxcbiAgICAgICAgICAgIGNhcmRIZWlnaHQ6IHRoaXMuY2FyZEhlaWdodCxcbiAgICAgICAgICAgIGlzVmVydGljYWw6IHRoaXMuaXNWZXJ0aWNhbCxcbiAgICAgICAgfTtcbiAgICB9XG5cblx0cHJpdmF0ZSB1cGRhdGVDb250YWluZXJTdHlsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoJ3ZlcnRpY2FsJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QucmVtb3ZlKCdob3Jpem9udGFsJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgnaG9yaXpvbnRhbCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LnJlbW92ZSgndmVydGljYWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgd2FpdEZvckxlYWZDcmVhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja0xlYWYgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjaGVja0xlYWYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjaGVja0xlYWYoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RlckV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsIGRlYm91bmNlKHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpLCAxMDApKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCBkZWJvdW5jZSh0aGlzLnJlZnJlc2guYmluZCh0aGlzKSwgMTAwKSlcbiAgICAgICAgKTtcbiAgICB9XG5cblx0YXN5bmMgcmVmcmVzaCgpIHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0aWYgKCFhY3RpdmVGaWxlIHx8ICF0aGlzLmNvbnRhaW5lckVsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRzZXRDb250YWluZXJTaXplKHRoaXMuY29udGFpbmVyRWwsIHRoaXMuY2FyZFdpZHRoLCB0aGlzLmNhcmRIZWlnaHQsIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldywgdGhpcy5pc1ZlcnRpY2FsKTtcblx0XG5cdFx0Y29uc3QgY2FyZHNEYXRhID0gYXdhaXQgdGhpcy5jYXJkTWFrZXIuZ2V0Q2FyZHNGb3JBY3RpdmVGaWxlKGFjdGl2ZUZpbGUpO1xuXHRcdHRoaXMucmVuZGVyQ2FyZHMoY2FyZHNEYXRhLCB0aGlzLmNhcmRXaWR0aCwgdGhpcy5jYXJkSGVpZ2h0KTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ2FyZHMoY2FyZHNEYXRhOiBDYXJkW10sIGNhcmRXaWR0aDogbnVtYmVyLCBjYXJkSGVpZ2h0OiBudW1iZXIpIHtcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG5cdFx0aWYgKCFjb250YWluZXJFbCkgcmV0dXJuO1xuXHRcblx0XHRjb250YWluZXJFbC5pbm5lckhUTUwgPSAnJztcblx0XHRjb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkLWNvbnRhaW5lci1ob3Jpem9udGFsJywgIXRoaXMuaXNWZXJ0aWNhbCk7XG5cdFxuXHRcdGNhcmRzRGF0YS5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xuXHRcdFx0Y29uc3QgY2FyZCA9IHRoaXMuY2FyZE1ha2VyLmNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKTtcblx0XHRcdGNhcmQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZC1uYXZpZ2F0b3ItY2FyZC1ob3Jpem9udGFsJywgIXRoaXMuaXNWZXJ0aWNhbCk7XG5cdFx0XHRjYXJkLnN0eWxlLndpZHRoID0gYCR7Y2FyZFdpZHRofXB4YDtcblx0XHRcdGNhcmQuc3R5bGUuaGVpZ2h0ID0gYCR7Y2FyZEhlaWdodH1weGA7XG5cdFx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZChjYXJkKTtcblx0XHR9KTtcblx0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNlbnRlckNhcmRNZXRob2QgPT09ICdzY3JvbGwnKSB7XG5cdFx0XHR0aGlzLnNjcm9sbFRvQWN0aXZlQ2FyZChjYXJkc0RhdGEsIGNhcmRXaWR0aCwgY2FyZEhlaWdodCk7XG5cdFx0fVxuXHR9XG5cbiAgICBwcml2YXRlIHJlbmRlckFjdGl2ZUNhcmRDZW50ZXJlZChjYXJkc0RhdGE6IENhcmRbXSwgYWN0aXZlSW5kZXg6IG51bWJlciwgY2FyZFdpZHRoOiBudW1iZXIsIGNhcmRIZWlnaHQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgICAgIGlmICghY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzVmVydGljYWwgPSB0aGlzLmlzVmVydGljYWw7XG5cbiAgICAgICAgY29uc3QgbGVmdENhcmRzID0gY2FyZHNEYXRhLnNsaWNlKDAsIGFjdGl2ZUluZGV4KTtcbiAgICAgICAgY29uc3QgcmlnaHRDYXJkcyA9IGNhcmRzRGF0YS5zbGljZShhY3RpdmVJbmRleCArIDEpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRTcGFjaW5nID0gMTU7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclNpemUgPSBpc1ZlcnRpY2FsID8gY2FyZEhlaWdodCA6IGNhcmRXaWR0aDtcbiAgICAgICAgY29uc3QgdG90YWxTaXplID0gKGNvbnRhaW5lclNpemUgKyBjYXJkU3BhY2luZykgKiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXcgLSBjYXJkU3BhY2luZztcbiAgICAgICAgY29uc3QgYWN0aXZlQ2FyZE9mZnNldCA9ICgodG90YWxTaXplIC0gY29udGFpbmVyU2l6ZSkgLyAyKTtcblxuICAgICAgICBsZXQgY3VycmVudE9mZnNldCA9IGFjdGl2ZUNhcmRPZmZzZXQgLSAoKGxlZnRDYXJkcy5sZW5ndGggKiBjb250YWluZXJTaXplKSArIChsZWZ0Q2FyZHMubGVuZ3RoICogY2FyZFNwYWNpbmcpKTtcblxuICAgICAgICBsZWZ0Q2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNhcmRNYWtlci5jcmVhdGVDYXJkRWxlbWVudChjYXJkRGF0YSk7XG4gICAgICAgICAgICBjYXJkLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIGNhcmQuc3R5bGUud2lkdGggPSBgJHtjYXJkV2lkdGh9cHhgO1xuICAgICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSBgJHtjYXJkSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgY2FyZC5zdHlsZS50b3AgPSBgJHtjdXJyZW50T2Zmc2V0fXB4YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FyZC5zdHlsZS5sZWZ0ID0gYCR7Y3VycmVudE9mZnNldH1weGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChjYXJkKTtcbiAgICAgICAgICAgIGN1cnJlbnRPZmZzZXQgKz0gY29udGFpbmVyU2l6ZSArIGNhcmRTcGFjaW5nO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhY3RpdmVDYXJkID0gdGhpcy5jYXJkTWFrZXIuY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZHNEYXRhW2FjdGl2ZUluZGV4XSk7XG4gICAgICAgIGFjdGl2ZUNhcmQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBhY3RpdmVDYXJkLnN0eWxlLndpZHRoID0gYCR7Y2FyZFdpZHRofXB4YDtcbiAgICAgICAgYWN0aXZlQ2FyZC5zdHlsZS5oZWlnaHQgPSBgJHtjYXJkSGVpZ2h0fXB4YDtcbiAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgIGFjdGl2ZUNhcmQuc3R5bGUudG9wID0gYCR7YWN0aXZlQ2FyZE9mZnNldH1weGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3RpdmVDYXJkLnN0eWxlLmxlZnQgPSBgJHthY3RpdmVDYXJkT2Zmc2V0fXB4YDtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChhY3RpdmVDYXJkKTtcblxuICAgICAgICBjdXJyZW50T2Zmc2V0ID0gYWN0aXZlQ2FyZE9mZnNldCArIGNvbnRhaW5lclNpemUgKyBjYXJkU3BhY2luZztcbiAgICAgICAgcmlnaHRDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9IHRoaXMuY2FyZE1ha2VyLmNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKTtcbiAgICAgICAgICAgIGNhcmQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgY2FyZC5zdHlsZS53aWR0aCA9IGAke2NhcmRXaWR0aH1weGA7XG4gICAgICAgICAgICBjYXJkLnN0eWxlLmhlaWdodCA9IGAke2NhcmRIZWlnaHR9cHhgO1xuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLnRvcCA9IGAke2N1cnJlbnRPZmZzZXR9cHhgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLmxlZnQgPSBgJHtjdXJyZW50T2Zmc2V0fXB4YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNhcmQpO1xuICAgICAgICAgICAgY3VycmVudE9mZnNldCArPSBjb250YWluZXJTaXplICsgY2FyZFNwYWNpbmc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXHRwcml2YXRlIHNjcm9sbFRvQWN0aXZlQ2FyZChjYXJkc0RhdGE6IENhcmRbXSwgY2FyZFdpZHRoOiBudW1iZXIsIGNhcmRIZWlnaHQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgICAgIGlmICghY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lckVsLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGxldCBhY3RpdmVDYXJkOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGNhcmRzRGF0YS5mb3JFYWNoKChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9IHRoaXMuY2FyZE1ha2VyLmNyZWF0ZUNhcmRFbGVtZW50KGNhcmREYXRhKTtcbiAgICAgICAgICAgIGNhcmQuc3R5bGUud2lkdGggPSBgJHtjYXJkV2lkdGh9cHhgO1xuICAgICAgICAgICAgY2FyZC5zdHlsZS5oZWlnaHQgPSBgJHtjYXJkSGVpZ2h0fXB4YDtcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNhcmQpO1xuXG4gICAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQtbmF2aWdhdG9yLWFjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQ2FyZCA9IGNhcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChhY3RpdmVDYXJkICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNlbnRlckNhcmRNZXRob2QgPT09ICdzY3JvbGwnKSB7XG4gICAgICAgICAgICAoYWN0aXZlQ2FyZCBhcyBIVE1MRWxlbWVudCkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnY2VudGVyJywgaW5saW5lOiAnY2VudGVyJyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXHRwdWJsaWMgZGlzcGxheUNhcmRzKGZpbHRlcmVkRmlsZXM6IFRGaWxlW10pIHtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyBzZWFyY2hDYXJkcyhzZWFyY2hUZXJtOiBzdHJpbmcpIHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0aWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG5cdFxuXHRcdGNvbnN0IGZvbGRlciA9IGFjdGl2ZUZpbGUucGFyZW50O1xuXHRcdGlmICghZm9sZGVyKSByZXR1cm47XG5cdFxuXHRcdGNvbnN0IGZpbGVzID0gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcblx0XHRjb25zdCBmaWx0ZXJlZEZpbGVzID0gYXdhaXQgdGhpcy5maWx0ZXJGaWxlc0J5Q29udGVudChmaWxlcywgc2VhcmNoVGVybSk7XG5cdFxuXHRcdGNvbnN0IGNhcmRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZmlsdGVyZWRGaWxlcy5tYXAoYXN5bmMgZmlsZSA9PiAoe1xuXHRcdFx0ZmlsZSxcblx0XHRcdGZpbGVOYW1lOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZU5hbWUgPyBmaWxlLmJhc2VuYW1lIDogdW5kZWZpbmVkLFxuXHRcdFx0Zmlyc3RIZWFkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciA/IGF3YWl0IHRoaXMuZmluZEZpcnN0SGVhZGVyKGZpbGUpIDogdW5kZWZpbmVkLFxuXHRcdFx0Y29udGVudDogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NvbnRlbnQgPyBhd2FpdCB0aGlzLmdldEZpbGVDb250ZW50KGZpbGUpIDogdW5kZWZpbmVkLFxuXHRcdH0pKSk7XG5cdFxuXHRcdHRoaXMucmVuZGVyQ2FyZHMoY2FyZHMsIHRoaXMuY2FyZFdpZHRoLCB0aGlzLmNhcmRIZWlnaHQpO1xuXHR9XG5cdFxuXHRwcml2YXRlIGFzeW5jIGZpbHRlckZpbGVzQnlDb250ZW50KGZpbGVzOiBURmlsZVtdLCBzZWFyY2hUZXJtOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcblx0XHRjb25zdCBsb3dlcmNhc2VTZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuXHRcdGNvbnN0IGZpbHRlcmVkRmlsZXMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRcdGlmIChmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJjYXNlU2VhcmNoVGVybSkgfHxcblx0XHRcdFx0Y29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyY2FzZVNlYXJjaFRlcm0pKSB7XG5cdFx0XHRcdGZpbHRlcmVkRmlsZXMucHVzaChmaWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZpbHRlcmVkRmlsZXM7XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgc29ydENhcmRzKGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgb3JkZXI6ICdhc2MnIHwgJ2Rlc2MnKSB7XG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuO1xuXHRcblx0XHRjb25zdCBmb2xkZXIgPSBhY3RpdmVGaWxlLnBhcmVudDtcblx0XHRpZiAoIWZvbGRlcikgcmV0dXJuO1xuXHRcblx0XHRjb25zdCBmaWxlcyA9IGZvbGRlci5jaGlsZHJlbi5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG5cdFx0Y29uc3Qgc29ydGVkRmlsZXMgPSBzb3J0RmlsZXMoZmlsZXMsIGNyaXRlcmlvbiwgb3JkZXIpO1xuXHRcblx0XHRjb25zdCBjYXJkcyA9IGF3YWl0IFByb21pc2UuYWxsKHNvcnRlZEZpbGVzLm1hcChhc3luYyBmaWxlID0+ICh7XG5cdFx0XHRmaWxlLFxuXHRcdFx0ZmlsZU5hbWU6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSA/IGZpbGUuYmFzZW5hbWUgOiB1bmRlZmluZWQsXG5cdFx0XHRmaXJzdEhlYWRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpcnN0SGVhZGVyID8gYXdhaXQgdGhpcy5maW5kRmlyc3RIZWFkZXIoZmlsZSkgOiB1bmRlZmluZWQsXG5cdFx0XHRjb250ZW50OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29udGVudCA/IGF3YWl0IHRoaXMuZ2V0RmlsZUNvbnRlbnQoZmlsZSkgOiB1bmRlZmluZWQsXG5cdFx0fSkpKTtcblx0XG5cdFx0dGhpcy5yZW5kZXJDYXJkcyhjYXJkcywgdGhpcy5jYXJkV2lkdGgsIHRoaXMuY2FyZEhlaWdodCk7XG5cdH1cblx0XG5cdHByaXZhdGUgYXN5bmMgZmluZEZpcnN0SGVhZGVyKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgaGVhZGVyUmVnZXggPSAvXiMrXFxzKyguKykkL207XG5cdFx0Y29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGhlYWRlclJlZ2V4KTtcblx0XHRyZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXS50cmltKCkgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdHByaXZhdGUgYXN5bmMgZ2V0RmlsZUNvbnRlbnQoZmlsZTogVEZpbGUpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcblx0XHRjb25zdCBtYXhMZW5ndGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50TGVuZ3RoICogMTAwO1xuXHRcdHJldHVybiBjb250ZW50Lmxlbmd0aCA8PSBtYXhMZW5ndGggPyBjb250ZW50IDogY29udGVudC5zbGljZSgwLCBtYXhMZW5ndGgpICsgJy4uLic7XG5cdH1cblxuICAgIG9uQ2xvc2UoKSB7fVxufVxuIiwgIi8vIHNyYy91aS9jYXJkQ29udGFpbmVyL2NhcmRNYWtlci50c1xuXG5pbXBvcnQgeyBNZW51LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyBzb3J0RmlsZXMsIHNlcGFyYXRlRnJvbnRtYXR0ZXJBbmRDb250ZW50IH0gZnJvbSAnLi4vLi4vY29tbW9uL3V0aWxzJztcblxuZXhwb3J0IGNsYXNzIENhcmRNYWtlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHt9XG5cbiAgICBhc3luYyBnZXRDYXJkc0ZvckFjdGl2ZUZpbGUoYWN0aXZlRmlsZTogVEZpbGUpOiBQcm9taXNlPENhcmRbXT4ge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhY3RpdmVGaWxlLnBhcmVudDtcbiAgICAgICAgaWYgKCFmb2xkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVzID0gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcbiAgICAgICAgY29uc3QgdXNlckxvY2FsZSA9IG5hdmlnYXRvci5sYW5ndWFnZSB8fCAnZW4nOyBcbiAgICAgICAgY29uc3Qgc29ydGVkRmlsZXMgPSBzb3J0RmlsZXMoZmlsZXMsIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRDcml0ZXJpb24sIHVzZXJMb2NhbGUpO1xuICAgICAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoc29ydGVkRmlsZXMubWFwKGZpbGUgPT4gdGhpcy5jcmVhdGVDYXJkKGZpbGUpKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVDYXJkKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxDYXJkPiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgY29uc3QgeyBjbGVhbkNvbnRlbnQgfSA9IHNlcGFyYXRlRnJvbnRtYXR0ZXJBbmRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICBjb25zdCBjb250ZW50V2l0aG91dEhlYWRlciA9IHRoaXMucmVtb3ZlRmlyc3RIZWFkZXIoY2xlYW5Db250ZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICBmaWxlTmFtZTogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpbGVOYW1lID8gZmlsZS5iYXNlbmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGZpcnN0SGVhZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Rmlyc3RIZWFkZXIgPyB0aGlzLmZpbmRGaXJzdEhlYWRlcihjbGVhbkNvbnRlbnQpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29udGVudDogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NvbnRlbnQgPyB0aGlzLnRydW5jYXRlQ29udGVudChjb250ZW50V2l0aG91dEhlYWRlcikgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVGaXJzdEhlYWRlcihjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBoZWFkZXJSZWdleCA9IC9eIytcXHMrKC4rKSQvbTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZShoZWFkZXJSZWdleCwgJycpLnRyaW0oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbmRGaXJzdEhlYWRlcihjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBoZWFkZXJSZWdleCA9IC9eIytcXHMrKC4rKSQvbTtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGhlYWRlclJlZ2V4KTtcbiAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0udHJpbSgpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJ1bmNhdGVDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1heExlbmd0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRMZW5ndGggKiAxMDA7XG4gICAgICAgIHJldHVybiBjb250ZW50Lmxlbmd0aCA8PSBtYXhMZW5ndGggPyBjb250ZW50IDogY29udGVudC5zbGljZSgwLCBtYXhMZW5ndGgpICsgJy4uLic7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2FyZEVsZW1lbnQoY2FyZDogQ2FyZCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2FyZEVsZW1lbnQuY2xhc3NOYW1lID0gJ2NhcmQtbmF2aWdhdG9yLWNhcmQnO1xuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZU5hbWUgJiYgY2FyZC5maWxlTmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWVFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogY2FyZC5maWxlTmFtZSB9KTtcbiAgICAgICAgICAgIGZpbGVOYW1lRWwuY2xhc3NOYW1lID0gJ2NhcmQtbmF2aWdhdG9yLWZpbGVuYW1lJztcbiAgICAgICAgICAgIGZpbGVOYW1lRWwuc3R5bGUuZm9udFNpemUgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlTmFtZVNpemV9cHhgO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciAmJiBjYXJkLmZpcnN0SGVhZGVyKSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogY2FyZC5maXJzdEhlYWRlciB9KTtcbiAgICAgICAgICAgIGhlYWRlckVsLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1maXJzdC1oZWFkZXInO1xuICAgICAgICAgICAgaGVhZGVyRWwuc3R5bGUuZm9udFNpemUgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXJzdEhlYWRlclNpemV9cHhgO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb250ZW50ICYmIGNhcmQuY29udGVudCkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudEVsID0gY2FyZEVsZW1lbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGNhcmQuY29udGVudCB9KTtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItY29udGVudCc7XG4gICAgICAgICAgICBjb250ZW50RWwuc3R5bGUuZm9udFNpemUgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZW50U2l6ZX1weGA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgPT09IGNhcmQuZmlsZSkge1xuICAgICAgICAgICAgY2FyZEVsZW1lbnQuYWRkQ2xhc3MoJ2NhcmQtbmF2aWdhdG9yLWFjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHVDRTc0XHVCNERDIFx1QzBERFx1QzEzMSBcdUQ2QzQgXHVCNERDXHVCNzk4XHVBREY4IFx1QzU2NCBcdUI0RENcdUI4NkQgXHVCQzBGIFx1QjJFNFx1Qjk3OCBcdUM3NzhcdUQxMzBcdUI3OTlcdUMxNTggXHVDMTI0XHVDODE1XG4gICAgICAgIHRoaXMuYWRkQ2FyZEludGVyYWN0aW9ucyhjYXJkRWxlbWVudCwgY2FyZCk7XG5cbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkQ2FyZEludGVyYWN0aW9ucyhjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGNhcmQ6IENhcmQpIHtcbiAgICAgICAgY2FyZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5GaWxlKGNhcmQuZmlsZSkpO1xuICAgICAgICB0aGlzLnNldHVwRHJhZ0FuZERyb3AoY2FyZEVsZW1lbnQsIGNhcmQpO1xuICAgICAgICB0aGlzLnNldHVwQ29udGV4dE1lbnUoY2FyZEVsZW1lbnQsIGNhcmQuZmlsZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cERyYWdBbmREcm9wKGNhcmRFbGVtZW50OiBIVE1MRWxlbWVudCwgY2FyZDogQ2FyZCkge1xuICAgICAgICBjYXJkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICAgIGNhcmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgICAgICAgICAgIGxldCBkcmFnQ29udGVudCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRyYWdEcm9wQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdUNFNzRcdUI0RENcdUM1RDAgXHVENDVDXHVDMkRDXHVCNDE4XHVCMjk0IFx1RDU2RFx1QkFBOVx1QzVEMCBcdUI1MzBcdUI3N0MgXHVCNERDXHVCNzk4XHVBREY4IFx1QzU2NCBcdUI0RENcdUI4NkQgXHVDMkRDIFx1QzBCRFx1Qzc4NVx1RDU2MCBcdUIwQjRcdUM2QTkgXHVBQ0IwXHVDODE1XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZU5hbWUgJiYgY2FyZC5maWxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0NvbnRlbnQgKz0gYCMjICR7Y2FyZC5maWxlTmFtZX1cXG5cXG5gOyAvLyBcdUQzMENcdUM3N0NcdUJBODUgXHVDNTVFXHVDNUQwIFx1RDVFNFx1QjM1NCBcdUNEOTRcdUFDMDBcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Rmlyc3RIZWFkZXIgJiYgY2FyZC5maXJzdEhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0NvbnRlbnQgKz0gYCMgJHtjYXJkLmZpcnN0SGVhZGVyfVxcblxcbmA7IC8vIFx1Q0NBQiBcdUJDODhcdUM5RjggXHVENUU0XHVCMzU0IFx1QzU1RVx1QzVEMCBcdUQ1RTRcdUIzNTQgXHVDRDk0XHVBQzAwXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0NvbnRlbnQgJiYgY2FyZC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnQ29udGVudCArPSBgJHtjYXJkLmNvbnRlbnR9XFxuXFxuYDsgLy8gXHVCQ0Y4XHVCQjM4IFx1QjBCNFx1QzZBOSBcdUNEOTRcdUFDMDBcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcmFnQ29udGVudCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1QjlDQ1x1QzU3RCBcdUQ0NUNcdUMyREMgXHVDMTI0XHVDODE1XHVDNzc0IFx1QjQxOFx1QzVCNFx1Qzc4OFx1QzlDMCBcdUM1NEFcdUM3M0NcdUJBNzQgXHVBRTMwXHVCQ0Y4IFx1RDMwQ1x1Qzc3QyBcdUI5QzFcdUQwNkMgXHVDMEJEXHVDNzg1XG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnQ29udGVudCA9IGBbWyR7Y2FyZC5maWxlLm5hbWV9XV1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJEcmFnIGFuZCBEcm9wIENvbnRlbnRcIiBcdUM2MzVcdUMxNThcdUM3NzQgXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVCNDFDIFx1QUNCRFx1QzZCMCBcdUQzMENcdUM3N0NcdUJBODUgXHVCOUMxXHVEMDZDXHVCOTdDIFx1QzBCRFx1Qzc4NVxuICAgICAgICAgICAgICAgICAgICBkcmFnQ29udGVudCA9IGBbWyR7Y2FyZC5maWxlLm5hbWV9XV1gO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgZHJhZ0NvbnRlbnQudHJpbSgpKTtcblx0XHRcdFx0ZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShjYXJkRWxlbWVudCwgMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBDb250ZXh0TWVudShjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGNhcmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdmaWxlLW1lbnUnLCBtZW51LCBmaWxlLCAnbW9yZS1vcHRpb25zJyk7XG4gICAgICAgICAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbkZpbGUoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XG4gICAgfVxufVxuIiwgIi8vIHNyYy9jb21tb24vdXRpbHMudHNcblxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTb3J0Q3JpdGVyaW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZTxGIGV4dGVuZHMgKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdW5rbm93bj4oZnVuYzogRiwgd2FpdEZvcjogbnVtYmVyKSB7XG4gICAgbGV0IHRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgICByZXR1cm4gKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Rj4pOiBQcm9taXNlPFJldHVyblR5cGU8Rj4+ID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8UmV0dXJuVHlwZTxGPj4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0IGFzIFJldHVyblR5cGU8Rj4pO1xuICAgICAgICAgICAgfSwgd2FpdEZvcik7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXBhcmF0ZUZyb250bWF0dGVyQW5kQ29udGVudChjb250ZW50OiBzdHJpbmcpOiB7IGZyb250bWF0dGVyOiBzdHJpbmcgfCBudWxsLCBjbGVhbkNvbnRlbnQ6IHN0cmluZyB9IHtcbiAgICBjb25zdCBmcm9udG1hdHRlclJlZ2V4ID0gL14tLS1cXHMqXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxzKlxcbi87XG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGZyb250bWF0dGVyUmVnZXgpO1xuICAgIHJldHVybiBtYXRjaFxuICAgICAgICA/IHsgZnJvbnRtYXR0ZXI6IG1hdGNoWzFdLCBjbGVhbkNvbnRlbnQ6IGNvbnRlbnQuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKS50cmltKCkgfVxuICAgICAgICA6IHsgZnJvbnRtYXR0ZXI6IG51bGwsIGNsZWFuQ29udGVudDogY29udGVudC50cmltKCkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRGaWxlcyhmaWxlczogVEZpbGVbXSwgY3JpdGVyaW9uOiBTb3J0Q3JpdGVyaW9uLCBsb2NhbGUgPSAnZW4nKTogVEZpbGVbXSB7XG4gICAgY29uc3QgY29sbGF0b3IgPSBuZXcgSW50bC5Db2xsYXRvcihsb2NhbGUsIHsgbnVtZXJpYzogdHJ1ZSwgc2Vuc2l0aXZpdHk6ICdiYXNlJyB9KTtcblxuICAgIHJldHVybiBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoY3JpdGVyaW9uKSB7XG4gICAgICAgICAgICBjYXNlICdmaWxlTmFtZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxhdG9yLmNvbXBhcmUoYS5iYXNlbmFtZSwgYi5iYXNlbmFtZSk7XG4gICAgICAgICAgICBjYXNlICdsYXN0TW9kaWZpZWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWU7XG4gICAgICAgICAgICBjYXNlICdjcmVhdGVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYi5zdGF0LmN0aW1lIC0gYS5zdGF0LmN0aW1lO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlQ2FyZFNpemUoXG4gICAgaXNWZXJ0aWNhbDogYm9vbGVhbiwgXG4gICAgY29udGFpbmVyUmVjdDogRE9NUmVjdCwgXG4gICAgY2FyZHNQZXJWaWV3OiBudW1iZXIsIFxuICAgIHBhZGRpbmcgPSAxNVxuKSB7XG4gICAgY29uc3QgeyB3aWR0aDogbGVhZldpZHRoLCBoZWlnaHQ6IGxlYWZIZWlnaHQgfSA9IGNvbnRhaW5lclJlY3Q7XG5cbiAgICBsZXQgY2FyZFdpZHRoOiBudW1iZXIsIGNhcmRIZWlnaHQ6IG51bWJlcjtcblxuICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgIGNhcmRXaWR0aCA9IGxlYWZXaWR0aCAtIDIgKiBwYWRkaW5nO1xuICAgICAgICBjYXJkSGVpZ2h0ID0gbGVhZkhlaWdodCAvIGNhcmRzUGVyVmlldztcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYXJkV2lkdGggPSBsZWFmV2lkdGggLyBjYXJkc1BlclZpZXc7XG4gICAgICAgIGNhcmRIZWlnaHQgPSBsZWFmSGVpZ2h0IC0gMiAqIHBhZGRpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY2FyZFdpZHRoLCBjYXJkSGVpZ2h0IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb250YWluZXJTaXplKFxuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICBjYXJkV2lkdGg6IG51bWJlcixcbiAgICBjYXJkSGVpZ2h0OiBudW1iZXIsXG4gICAgY2FyZHNQZXJWaWV3OiBudW1iZXIsXG4gICAgaXNWZXJ0aWNhbDogYm9vbGVhblxuKSB7XG4gICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICAgICAgICBjb250YWluZXJFbC5zdHlsZS53aWR0aCA9IGAke2NhcmRXaWR0aH1weGA7XG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLmhlaWdodCA9IGAke2NhcmRIZWlnaHQgKiBjYXJkc1BlclZpZXd9cHhgO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lckVsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93JztcbiAgICAgICAgY29udGFpbmVyRWwuc3R5bGUud2lkdGggPSBgJHtjYXJkV2lkdGggKiBjYXJkc1BlclZpZXd9cHhgO1xuICAgICAgICBjb250YWluZXJFbC5zdHlsZS5oZWlnaHQgPSBgJHtjYXJkSGVpZ2h0fXB4YDtcbiAgICB9XG59XG4iLCAiLy8gc3JjL3VpL3NldHRpbmdzVGFiLnRzXG5cbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDYXJkIE5hdmlnYXRvciBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2FyZHMgcGVyIHZpZXcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ051bWJlciBvZiBjYXJkcyB0byBkaXNwbGF5IGF0IG9uY2UnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygzLCA5LCAxKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXcpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaFZpZXdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cdFx0Ly8gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0Ly8gXHQuc2V0TmFtZSgnQ2VudGVyIENhcmQgTWV0aG9kJylcblx0XHQvLyBcdC5zZXREZXNjKCdDaG9vc2UgaG93IHRvIGNlbnRlciB0aGUgYWN0aXZlIGNhcmQgaW4gdGhlIHZpZXcnKVxuXHRcdC8vIFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG5cdFx0Ly8gXHRcdC5hZGRPcHRpb24oJ3Njcm9sbCcsICdTY3JvbGwgdG8gYWN0aXZlIGNhcmQnKVxuXHRcdC8vIFx0XHQuYWRkT3B0aW9uKCdjZW50ZXJlZCcsICdSZW5kZXIgdGhlIGFjdGl2ZSBjYXJkIGNlbnRyZWQnKVxuXHRcdC8vIFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2VudGVyQ2FyZE1ldGhvZClcblx0XHQvLyBcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdC8vIFx0XHRcdGNvbnN0IG1ldGhvZCA9IHZhbHVlIGFzICdzY3JvbGwnIHwgJ2NlbnRlcmVkJztcblx0XHQvLyBcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jZW50ZXJDYXJkTWV0aG9kID0gbWV0aG9kO1xuXHRcdC8vIFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdC8vIFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWaWV3cygpO1xuXHRcdC8vIFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHQuc2V0TmFtZSgnRHJhZyBhbmQgRHJvcCBDb250ZW50Jylcblx0XHQuc2V0RGVzYygnV2hlbiBlbmFibGVkLCBkcmFnZ2luZyBhIGNhcmQgd2lsbCBpbnNlcnQgdGhlIG5vdGUgY29udGVudCBpbnN0ZWFkIG9mIGEgbGluay4nKVxuXHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRyYWdEcm9wQ29udGVudClcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ0Ryb3BDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoVmlld3MoKTtcblx0XHRcdH0pKTtcblxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ1Nob3cgRmlsZSBOYW1lJylcblx0XHQuc2V0RGVzYygnVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgZmlsZSBuYW1lIG9uIGNhcmRzJylcblx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZU5hbWUpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSA9IHZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFZpZXdzKCk7XG5cdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdGaWxlIE5hbWUgU2l6ZScpXG5cdFx0XHQuc2V0RGVzYygnU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBmaWxlIG5hbWUnKVxuXHRcdFx0LmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG5cdFx0XHRcdC5zZXRMaW1pdHMoMTUsIDI1LCAxKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZU5hbWVTaXplKVxuXHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZU5hbWVTaXplID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFZpZXdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1Nob3cgRmlyc3QgSGVhZGVyJylcblx0XHRcdC5zZXREZXNjKCdUb2dnbGUgdG8gZGlzcGxheSBvciBoaWRlIHRoZSBmaXJzdCBoZWFkZXIgb24gY2FyZHMnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Rmlyc3RIZWFkZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Rmlyc3RIZWFkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoVmlld3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRmlyc3QgSGVhZGVyIFNpemUnKVxuXHRcdFx0LnNldERlc2MoJ1NldCB0aGUgZm9udCBzaXplIGZvciB0aGUgZmlyc3QgaGVhZGVyJylcblx0XHRcdC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuXHRcdFx0XHQuc2V0TGltaXRzKDE1LCAyNSwgMSlcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0SGVhZGVyU2l6ZSlcblx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0SGVhZGVyU2l6ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWaWV3cygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdTaG93IENvbnRlbnQnKVxuXHRcdFx0LnNldERlc2MoJ1RvZ2dsZSB0byBkaXNwbGF5IG9yIGhpZGUgdGhlIGNvbnRlbnQgb24gY2FyZHMnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29udGVudClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFZpZXdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0NvbnRlbnQgU2l6ZScpXG5cdFx0XHQuc2V0RGVzYygnU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBjb250ZW50Jylcblx0XHRcdC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuXHRcdFx0XHQuc2V0TGltaXRzKDEwLCAyMCwgMSlcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRTaXplKVxuXHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFNpemUgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoVmlld3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0LnNldE5hbWUoJ0NvbnRlbnQgTGVuZ3RoJylcblx0XHQuc2V0RGVzYygnTWF4aW11bSBjb250ZW50IGxlbmd0aCBkaXNwbGF5ZWQgb24gZWFjaCBjYXJkJylcblx0XHQuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcblx0XHRcdC5zZXRMaW1pdHMoMSwgMTAsIDEpXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudExlbmd0aClcblx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRlbnRMZW5ndGggPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hWaWV3cygpO1xuXHRcdFx0fSkpO1xuICAgIH1cbn1cbiIsICIvLyBzcmMvY29tbW9uL3NldHRpbmdzLnRzXG5cbmltcG9ydCB7IENhcmROYXZpZ2F0b3JTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQ2FyZE5hdmlnYXRvclNldHRpbmdzID0ge1xuICAgIGNhcmRzUGVyVmlldzogNixcbiAgICBjZW50ZXJDYXJkTWV0aG9kOiAnc2Nyb2xsJyxcbiAgICBhY3RpdmVDYXJkQm9yZGVyQ29sb3I6ICd2YXIoLS1hY3RpdmUtYm9yZGVyLWNvbG9yKScsXG4gICAgYWN0aXZlQ2FyZEJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yKScsXG4gICAgc29ydENyaXRlcmlvbjogJ2ZpbGVOYW1lJyxcblx0ZHJhZ0Ryb3BDb250ZW50OiBmYWxzZSxcbiAgICBzaG93RmlsZU5hbWU6IHRydWUsXG4gICAgZmlsZU5hbWVTaXplOiAyMCxcbiAgICBzaG93Rmlyc3RIZWFkZXI6IHRydWUsXG4gICAgZmlyc3RIZWFkZXJTaXplOiAxOCxcbiAgICBzaG93Q29udGVudDogdHJ1ZSxcbiAgICBjb250ZW50U2l6ZTogMTUsXG4gICAgY29udGVudExlbmd0aDogNSxcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUEsSUFBQUEsbUJBQThCOzs7QUNBOUIsSUFBQUMsbUJBQXdDOzs7QUNBeEMsc0JBQXdCOzs7QUNJakIsU0FBUyxVQUFVLFdBQW1CLFFBQTZCLFNBQWdDLFVBQVU7QUFDaEgsUUFBTSxPQUFPLE9BQU8sSUFBSSxVQUFVLGdCQUFnQix3QkFBd0IsRUFBRSxDQUFDLEVBQUU7QUFDL0UsUUFBTSxnQkFBZ0IsS0FBSztBQUMzQixRQUFNLGtCQUFrQixjQUFjLGVBQWU7QUFDckQsTUFBSSxDQUFDLGdCQUFpQjtBQUV0QixRQUFNLEVBQUUsV0FBVyxZQUFZLFdBQVcsSUFBSSxjQUFjLDBCQUEwQjtBQUV0RixRQUFNLGFBQWEsV0FBVyxXQUN2QixhQUFhLGFBQWEsYUFDMUIsYUFBYSxhQUFhLGFBQWEsT0FBTyxTQUFTO0FBRTlELFFBQU0sZ0JBQWdCLGFBQWEsZ0JBQWdCLFlBQVksZ0JBQWdCO0FBRS9FLFVBQVEsV0FBVztBQUFBLElBQ2YsS0FBSztBQUNELHNCQUFnQixTQUFTLEVBQUUsS0FBSyxnQkFBZ0IsWUFBWSxVQUFVLFNBQVMsQ0FBQztBQUNoRjtBQUFBLElB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QUFBLEVBQ0w7QUFBQSxFQUVILHFCQUFxQixlQUF3QjtBQUN0QyxVQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLHdCQUF3QixFQUFFLENBQUMsRUFBRTtBQUM3RSxTQUFLLGNBQWMsYUFBYSxhQUFhO0FBQUEsRUFDakQ7QUFBQSxFQUVILFVBQVUsV0FBb0QsT0FBdUI7QUFDcEYsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLGdCQUFnQix3QkFBd0IsRUFBRSxDQUFDLEVBQUU7QUFDN0UsU0FBSyxjQUFjLFVBQVUsV0FBVyxLQUFLO0FBQUEsRUFDOUM7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEVBQUUsVUFBVSxJQUFJLEtBQUs7QUFDM0IsUUFBSSxTQUFTLFVBQVUsZ0JBQWdCLHdCQUF3QjtBQUMvRCxRQUFJLE9BQU8sT0FBTyxDQUFDO0FBRW5CLFFBQUksQ0FBQyxNQUFNO0FBQ1YsWUFBTSxZQUFZLFVBQVUsYUFBYSxLQUFLO0FBQzlDLFVBQUksV0FBVztBQUNkLGNBQU0sVUFBVSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsUUFBUSxLQUFLLENBQUM7QUFDN0UsaUJBQVMsVUFBVSxnQkFBZ0Isd0JBQXdCO0FBQzNELGVBQU8sT0FBTyxDQUFDO0FBQUEsTUFDaEI7QUFBQSxJQUNEO0FBRUEsUUFBSSxNQUFNO0FBQ1QsZ0JBQVUsV0FBVyxJQUFJO0FBQUEsSUFDMUI7QUFBQSxFQUNEO0FBRUQ7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==

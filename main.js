/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CardNavigatorPlugin,
  languageResources: () => languageResources,
  translationLanguage: () => translationLanguage
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/ui/cardNavigator.ts
var import_obsidian5 = require("obsidian");

// src/ui/toolbar/toolbar.ts
var import_obsidian2 = require("obsidian");

// src/ui/toolbar/toolbarActions.ts
var import_obsidian = require("obsidian");

// node_modules/i18next/dist/esm/i18next.js
var consoleLogger = {
  type: "logger",
  log(args) {
    this.output("log", args);
  },
  warn(args) {
    this.output("warn", args);
  },
  error(args) {
    this.output("error", args);
  },
  output(type, args) {
    if (console && console[type]) console[type].apply(console, args);
  }
};
var Logger = class _Logger {
  constructor(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.init(concreteLogger, options);
  }
  init(concreteLogger) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.prefix = options.prefix || "i18next:";
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  }
  log() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    return this.forward(args, "log", "", true);
  }
  warn() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    return this.forward(args, "warn", "", true);
  }
  error() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    return this.forward(args, "error", "");
  }
  deprecate() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    return this.forward(args, "warn", "WARNING DEPRECATED: ", true);
  }
  forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (typeof args[0] === "string") args[0] = `${prefix}${this.prefix} ${args[0]}`;
    return this.logger[lvl](args);
  }
  create(moduleName) {
    return new _Logger(this.logger, {
      ...{
        prefix: `${this.prefix}:${moduleName}:`
      },
      ...this.options
    });
  }
  clone(options) {
    options = options || this.options;
    options.prefix = options.prefix || this.prefix;
    return new _Logger(this.logger, options);
  }
};
var baseLogger = new Logger();
var EventEmitter = class {
  constructor() {
    this.observers = {};
  }
  on(events, listener) {
    events.split(" ").forEach((event) => {
      if (!this.observers[event]) this.observers[event] = /* @__PURE__ */ new Map();
      const numListeners = this.observers[event].get(listener) || 0;
      this.observers[event].set(listener, numListeners + 1);
    });
    return this;
  }
  off(event, listener) {
    if (!this.observers[event]) return;
    if (!listener) {
      delete this.observers[event];
      return;
    }
    this.observers[event].delete(listener);
  }
  emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.observers[event]) {
      const cloned = Array.from(this.observers[event].entries());
      cloned.forEach((_ref) => {
        let [observer, numTimesAdded] = _ref;
        for (let i = 0; i < numTimesAdded; i++) {
          observer(...args);
        }
      });
    }
    if (this.observers["*"]) {
      const cloned = Array.from(this.observers["*"].entries());
      cloned.forEach((_ref2) => {
        let [observer, numTimesAdded] = _ref2;
        for (let i = 0; i < numTimesAdded; i++) {
          observer.apply(observer, [event, ...args]);
        }
      });
    }
  }
};
var defer = () => {
  let res;
  let rej;
  const promise = new Promise((resolve, reject) => {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};
var makeString = (object) => {
  if (object == null) return "";
  return "" + object;
};
var copy = (a, s, t2) => {
  a.forEach((m) => {
    if (s[m]) t2[m] = s[m];
  });
};
var lastOfPathSeparatorRegExp = /###/g;
var cleanKey = (key) => key && key.indexOf("###") > -1 ? key.replace(lastOfPathSeparatorRegExp, ".") : key;
var canNotTraverseDeeper = (object) => !object || typeof object === "string";
var getLastOfPath = (object, path, Empty) => {
  const stack = typeof path !== "string" ? path : path.split(".");
  let stackIndex = 0;
  while (stackIndex < stack.length - 1) {
    if (canNotTraverseDeeper(object)) return {};
    const key = cleanKey(stack[stackIndex]);
    if (!object[key] && Empty) object[key] = new Empty();
    if (Object.prototype.hasOwnProperty.call(object, key)) {
      object = object[key];
    } else {
      object = {};
    }
    ++stackIndex;
  }
  if (canNotTraverseDeeper(object)) return {};
  return {
    obj: object,
    k: cleanKey(stack[stackIndex])
  };
};
var setPath = (object, path, newValue) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  if (obj !== void 0 || path.length === 1) {
    obj[k] = newValue;
    return;
  }
  let e = path[path.length - 1];
  let p = path.slice(0, path.length - 1);
  let last = getLastOfPath(object, p, Object);
  while (last.obj === void 0 && p.length) {
    e = `${p[p.length - 1]}.${e}`;
    p = p.slice(0, p.length - 1);
    last = getLastOfPath(object, p, Object);
    if (last && last.obj && typeof last.obj[`${last.k}.${e}`] !== "undefined") {
      last.obj = void 0;
    }
  }
  last.obj[`${last.k}.${e}`] = newValue;
};
var pushPath = (object, path, newValue, concat) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path, Object);
  obj[k] = obj[k] || [];
  obj[k].push(newValue);
};
var getPath = (object, path) => {
  const {
    obj,
    k
  } = getLastOfPath(object, path);
  if (!obj) return void 0;
  return obj[k];
};
var getPathWithDefaults = (data, defaultData, key) => {
  const value = getPath(data, key);
  if (value !== void 0) {
    return value;
  }
  return getPath(defaultData, key);
};
var deepExtend = (target, source, overwrite) => {
  for (const prop in source) {
    if (prop !== "__proto__" && prop !== "constructor") {
      if (prop in target) {
        if (typeof target[prop] === "string" || target[prop] instanceof String || typeof source[prop] === "string" || source[prop] instanceof String) {
          if (overwrite) target[prop] = source[prop];
        } else {
          deepExtend(target[prop], source[prop], overwrite);
        }
      } else {
        target[prop] = source[prop];
      }
    }
  }
  return target;
};
var regexEscape = (str) => str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;",
  "/": "&#x2F;"
};
var escape = (data) => {
  if (typeof data === "string") {
    return data.replace(/[&<>"'\/]/g, (s) => _entityMap[s]);
  }
  return data;
};
var RegExpCache = class {
  constructor(capacity) {
    this.capacity = capacity;
    this.regExpMap = /* @__PURE__ */ new Map();
    this.regExpQueue = [];
  }
  getRegExp(pattern) {
    const regExpFromCache = this.regExpMap.get(pattern);
    if (regExpFromCache !== void 0) {
      return regExpFromCache;
    }
    const regExpNew = new RegExp(pattern);
    if (this.regExpQueue.length === this.capacity) {
      this.regExpMap.delete(this.regExpQueue.shift());
    }
    this.regExpMap.set(pattern, regExpNew);
    this.regExpQueue.push(pattern);
    return regExpNew;
  }
};
var chars = [" ", ",", "?", "!", ";"];
var looksLikeObjectPathRegExpCache = new RegExpCache(20);
var looksLikeObjectPath = (key, nsSeparator, keySeparator) => {
  nsSeparator = nsSeparator || "";
  keySeparator = keySeparator || "";
  const possibleChars = chars.filter((c) => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);
  if (possibleChars.length === 0) return true;
  const r = looksLikeObjectPathRegExpCache.getRegExp(`(${possibleChars.map((c) => c === "?" ? "\\?" : c).join("|")})`);
  let matched = !r.test(key);
  if (!matched) {
    const ki = key.indexOf(keySeparator);
    if (ki > 0 && !r.test(key.substring(0, ki))) {
      matched = true;
    }
  }
  return matched;
};
var deepFind = function(obj, path) {
  let keySeparator = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : ".";
  if (!obj) return void 0;
  if (obj[path]) return obj[path];
  const tokens = path.split(keySeparator);
  let current = obj;
  for (let i = 0; i < tokens.length; ) {
    if (!current || typeof current !== "object") {
      return void 0;
    }
    let next;
    let nextPath = "";
    for (let j = i; j < tokens.length; ++j) {
      if (j !== i) {
        nextPath += keySeparator;
      }
      nextPath += tokens[j];
      next = current[nextPath];
      if (next !== void 0) {
        if (["string", "number", "boolean"].indexOf(typeof next) > -1 && j < tokens.length - 1) {
          continue;
        }
        i += j - i + 1;
        break;
      }
    }
    current = next;
  }
  return current;
};
var getCleanedCode = (code) => {
  if (code && code.indexOf("_") > 0) return code.replace("_", "-");
  return code;
};
var ResourceStore = class extends EventEmitter {
  constructor(data) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      ns: ["translation"],
      defaultNS: "translation"
    };
    super();
    this.data = data || {};
    this.options = options;
    if (this.options.keySeparator === void 0) {
      this.options.keySeparator = ".";
    }
    if (this.options.ignoreJSONStructure === void 0) {
      this.options.ignoreJSONStructure = true;
    }
  }
  addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  }
  removeNamespaces(ns) {
    const index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  }
  getResource(lng, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    const ignoreJSONStructure = options.ignoreJSONStructure !== void 0 ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;
    let path;
    if (lng.indexOf(".") > -1) {
      path = lng.split(".");
    } else {
      path = [lng, ns];
      if (key) {
        if (Array.isArray(key)) {
          path.push(...key);
        } else if (typeof key === "string" && keySeparator) {
          path.push(...key.split(keySeparator));
        } else {
          path.push(key);
        }
      }
    }
    const result = getPath(this.data, path);
    if (!result && !ns && !key && lng.indexOf(".") > -1) {
      lng = path[0];
      ns = path[1];
      key = path.slice(2).join(".");
    }
    if (result || !ignoreJSONStructure || typeof key !== "string") return result;
    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);
  }
  addResource(lng, ns, key, value) {
    let options = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
      silent: false
    };
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    let path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);
    if (lng.indexOf(".") > -1) {
      path = lng.split(".");
      value = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    setPath(this.data, path, value);
    if (!options.silent) this.emit("added", lng, ns, key, value);
  }
  addResources(lng, ns, resources) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {
      silent: false
    };
    for (const m in resources) {
      if (typeof resources[m] === "string" || Array.isArray(resources[m])) this.addResource(lng, ns, m, resources[m], {
        silent: true
      });
    }
    if (!options.silent) this.emit("added", lng, ns, resources);
  }
  addResourceBundle(lng, ns, resources, deep, overwrite) {
    let options = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {
      silent: false,
      skipCopy: false
    };
    let path = [lng, ns];
    if (lng.indexOf(".") > -1) {
      path = lng.split(".");
      deep = resources;
      resources = ns;
      ns = path[1];
    }
    this.addNamespaces(ns);
    let pack = getPath(this.data, path) || {};
    if (!options.skipCopy) resources = JSON.parse(JSON.stringify(resources));
    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = {
        ...pack,
        ...resources
      };
    }
    setPath(this.data, path, pack);
    if (!options.silent) this.emit("added", lng, ns, resources);
  }
  removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);
    this.emit("removed", lng, ns);
  }
  hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== void 0;
  }
  getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;
    if (this.options.compatibilityAPI === "v1") return {
      ...{},
      ...this.getResource(lng, ns)
    };
    return this.getResource(lng, ns);
  }
  getDataByLanguage(lng) {
    return this.data[lng];
  }
  hasLanguageSomeTranslations(lng) {
    const data = this.getDataByLanguage(lng);
    const n = data && Object.keys(data) || [];
    return !!n.find((v) => data[v] && Object.keys(data[v]).length > 0);
  }
  toJSON() {
    return this.data;
  }
};
var postProcessor = {
  processors: {},
  addPostProcessor(module2) {
    this.processors[module2.name] = module2;
  },
  handle(processors, value, key, options, translator) {
    processors.forEach((processor) => {
      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);
    });
    return value;
  }
};
var checkedLoadedFor = {};
var Translator = class _Translator extends EventEmitter {
  constructor(services) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    super();
    copy(["resourceStore", "languageUtils", "pluralResolver", "interpolator", "backendConnector", "i18nFormat", "utils"], services, this);
    this.options = options;
    if (this.options.keySeparator === void 0) {
      this.options.keySeparator = ".";
    }
    this.logger = baseLogger.create("translator");
  }
  changeLanguage(lng) {
    if (lng) this.language = lng;
  }
  exists(key) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      interpolation: {}
    };
    if (key === void 0 || key === null) {
      return false;
    }
    const resolved = this.resolve(key, options);
    return resolved && resolved.res !== void 0;
  }
  extractFromKey(key, options) {
    let nsSeparator = options.nsSeparator !== void 0 ? options.nsSeparator : this.options.nsSeparator;
    if (nsSeparator === void 0) nsSeparator = ":";
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    let namespaces = options.ns || this.options.defaultNS || [];
    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;
    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);
    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {
      const m = key.match(this.interpolator.nestingRegexp);
      if (m && m.length > 0) {
        return {
          key,
          namespaces
        };
      }
      const parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === "string") namespaces = [namespaces];
    return {
      key,
      namespaces
    };
  }
  translate(keys, options, lastKey) {
    if (typeof options !== "object" && this.options.overloadTranslationOptionHandler) {
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (typeof options === "object") options = {
      ...options
    };
    if (!options) options = {};
    if (keys === void 0 || keys === null) return "";
    if (!Array.isArray(keys)) keys = [String(keys)];
    const returnDetails = options.returnDetails !== void 0 ? options.returnDetails : this.options.returnDetails;
    const keySeparator = options.keySeparator !== void 0 ? options.keySeparator : this.options.keySeparator;
    const {
      key,
      namespaces
    } = this.extractFromKey(keys[keys.length - 1], options);
    const namespace = namespaces[namespaces.length - 1];
    const lng = options.lng || this.language;
    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === "cimode") {
      if (appendNamespaceToCIMode) {
        const nsSeparator = options.nsSeparator || this.options.nsSeparator;
        if (returnDetails) {
          return {
            res: `${namespace}${nsSeparator}${key}`,
            usedKey: key,
            exactUsedKey: key,
            usedLng: lng,
            usedNS: namespace,
            usedParams: this.getUsedParamsDetails(options)
          };
        }
        return `${namespace}${nsSeparator}${key}`;
      }
      if (returnDetails) {
        return {
          res: key,
          usedKey: key,
          exactUsedKey: key,
          usedLng: lng,
          usedNS: namespace,
          usedParams: this.getUsedParamsDetails(options)
        };
      }
      return key;
    }
    const resolved = this.resolve(keys, options);
    let res = resolved && resolved.res;
    const resUsedKey = resolved && resolved.usedKey || key;
    const resExactUsedKey = resolved && resolved.exactUsedKey || key;
    const resType = Object.prototype.toString.apply(res);
    const noObject = ["[object Number]", "[object Function]", "[object RegExp]"];
    const joinArrays = options.joinArrays !== void 0 ? options.joinArrays : this.options.joinArrays;
    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;
    const handleAsObject = typeof res !== "string" && typeof res !== "boolean" && typeof res !== "number";
    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === "string" && Array.isArray(res))) {
      if (!options.returnObjects && !this.options.returnObjects) {
        if (!this.options.returnedObjectHandler) {
          this.logger.warn("accessing an object - but returnObjects options is not enabled!");
        }
        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {
          ...options,
          ns: namespaces
        }) : `key '${key} (${this.language})' returned an object instead of string.`;
        if (returnDetails) {
          resolved.res = r;
          resolved.usedParams = this.getUsedParamsDetails(options);
          return resolved;
        }
        return r;
      }
      if (keySeparator) {
        const resTypeIsArray = Array.isArray(res);
        const copy2 = resTypeIsArray ? [] : {};
        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;
        for (const m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            const deepKey = `${newKeyToUse}${keySeparator}${m}`;
            copy2[m] = this.translate(deepKey, {
              ...options,
              ...{
                joinArrays: false,
                ns: namespaces
              }
            });
            if (copy2[m] === deepKey) copy2[m] = res[m];
          }
        }
        res = copy2;
      }
    } else if (handleAsObjectInI18nFormat && typeof joinArrays === "string" && Array.isArray(res)) {
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options, lastKey);
    } else {
      let usedDefault = false;
      let usedKey = false;
      const needsPluralHandling = options.count !== void 0 && typeof options.count !== "string";
      const hasDefaultValue = _Translator.hasDefaultValue(options);
      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : "";
      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {
        ordinal: false
      }) : "";
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const defaultValue = needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] || options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;
      if (!this.isValidLookup(res) && hasDefaultValue) {
        usedDefault = true;
        res = defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }
      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;
      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? void 0 : res;
      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? "updateKey" : "missingKey", lng, namespace, key, updateMissing ? defaultValue : res);
        if (keySeparator) {
          const fk = this.resolve(key, {
            ...options,
            keySeparator: false
          });
          if (fk && fk.res) this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.");
        }
        let lngs = [];
        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === "fallback" && fallbackLngs && fallbackLngs[0]) {
          for (let i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === "all") {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }
        const send = (l, k, specificDefaultValue) => {
          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);
          }
          this.emit("missingKey", l, namespace, k, res);
        };
        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && needsPluralHandling) {
            lngs.forEach((language) => {
              const suffixes = this.pluralResolver.getSuffixes(language, options);
              if (needsZeroSuffixLookup && options[`defaultValue${this.options.pluralSeparator}zero`] && suffixes.indexOf(`${this.options.pluralSeparator}zero`) < 0) {
                suffixes.push(`${this.options.pluralSeparator}zero`);
              }
              suffixes.forEach((suffix) => {
                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);
              });
            });
          } else {
            send(lngs, key, defaultValue);
          }
        }
      }
      res = this.extendTranslation(res, keys, options, resolved, lastKey);
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;
      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {
        if (this.options.compatibilityAPI !== "v1") {
          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : void 0);
        } else {
          res = this.options.parseMissingKeyHandler(res);
        }
      }
    }
    if (returnDetails) {
      resolved.res = res;
      resolved.usedParams = this.getUsedParamsDetails(options);
      return resolved;
    }
    return res;
  }
  extendTranslation(res, key, options, resolved, lastKey) {
    var _this = this;
    if (this.i18nFormat && this.i18nFormat.parse) {
      res = this.i18nFormat.parse(res, {
        ...this.options.interpolation.defaultVariables,
        ...options
      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {
        resolved
      });
    } else if (!options.skipInterpolation) {
      if (options.interpolation) this.interpolator.init({
        ...options,
        ...{
          interpolation: {
            ...this.options.interpolation,
            ...options.interpolation
          }
        }
      });
      const skipOnVariables = typeof res === "string" && (options && options.interpolation && options.interpolation.skipOnVariables !== void 0 ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);
      let nestBef;
      if (skipOnVariables) {
        const nb = res.match(this.interpolator.nestingRegexp);
        nestBef = nb && nb.length;
      }
      let data = options.replace && typeof options.replace !== "string" ? options.replace : options;
      if (this.options.interpolation.defaultVariables) data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
      res = this.interpolator.interpolate(res, data, options.lng || this.language || resolved.usedLng, options);
      if (skipOnVariables) {
        const na = res.match(this.interpolator.nestingRegexp);
        const nestAft = na && na.length;
        if (nestBef < nestAft) options.nest = false;
      }
      if (!options.lng && this.options.compatibilityAPI !== "v1" && resolved && resolved.res) options.lng = this.language || resolved.usedLng;
      if (options.nest !== false) res = this.interpolator.nest(res, function() {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (lastKey && lastKey[0] === args[0] && !options.context) {
          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);
          return null;
        }
        return _this.translate(...args, key);
      }, options);
      if (options.interpolation) this.interpolator.reset();
    }
    const postProcess = options.postProcess || this.options.postProcess;
    const postProcessorNames = typeof postProcess === "string" ? [postProcess] : postProcess;
    if (res !== void 0 && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {
        i18nResolved: {
          ...resolved,
          usedParams: this.getUsedParamsDetails(options)
        },
        ...options
      } : options, this);
    }
    return res;
  }
  resolve(keys) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    let found;
    let usedKey;
    let exactUsedKey;
    let usedLng;
    let usedNS;
    if (typeof keys === "string") keys = [keys];
    keys.forEach((k) => {
      if (this.isValidLookup(found)) return;
      const extracted = this.extractFromKey(k, options);
      const key = extracted.key;
      usedKey = key;
      let namespaces = extracted.namespaces;
      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);
      const needsPluralHandling = options.count !== void 0 && typeof options.count !== "string";
      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();
      const needsContextHandling = options.context !== void 0 && (typeof options.context === "string" || typeof options.context === "number") && options.context !== "";
      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);
      namespaces.forEach((ns) => {
        if (this.isValidLookup(found)) return;
        usedNS = ns;
        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {
          checkedLoadedFor[`${codes[0]}-${ns}`] = true;
          this.logger.warn(`key "${usedKey}" for languages "${codes.join(", ")}" won't get resolved as namespace "${usedNS}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");
        }
        codes.forEach((code) => {
          if (this.isValidLookup(found)) return;
          usedLng = code;
          const finalKeys = [key];
          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {
            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);
          } else {
            let pluralSuffix;
            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);
            const zeroSuffix = `${this.options.pluralSeparator}zero`;
            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;
            if (needsPluralHandling) {
              finalKeys.push(key + pluralSuffix);
              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
              }
              if (needsZeroSuffixLookup) {
                finalKeys.push(key + zeroSuffix);
              }
            }
            if (needsContextHandling) {
              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;
              finalKeys.push(contextKey);
              if (needsPluralHandling) {
                finalKeys.push(contextKey + pluralSuffix);
                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {
                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));
                }
                if (needsZeroSuffixLookup) {
                  finalKeys.push(contextKey + zeroSuffix);
                }
              }
            }
          }
          let possibleKey;
          while (possibleKey = finalKeys.pop()) {
            if (!this.isValidLookup(found)) {
              exactUsedKey = possibleKey;
              found = this.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });
    return {
      res: found,
      usedKey,
      exactUsedKey,
      usedLng,
      usedNS
    };
  }
  isValidLookup(res) {
    return res !== void 0 && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === "");
  }
  getResource(code, ns, key) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);
    return this.resourceStore.getResource(code, ns, key, options);
  }
  getUsedParamsDetails() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    const optionsKeys = ["defaultValue", "ordinal", "context", "replace", "lng", "lngs", "fallbackLng", "ns", "keySeparator", "nsSeparator", "returnObjects", "returnDetails", "joinArrays", "postProcess", "interpolation"];
    const useOptionsReplaceForData = options.replace && typeof options.replace !== "string";
    let data = useOptionsReplaceForData ? options.replace : options;
    if (useOptionsReplaceForData && typeof options.count !== "undefined") {
      data.count = options.count;
    }
    if (this.options.interpolation.defaultVariables) {
      data = {
        ...this.options.interpolation.defaultVariables,
        ...data
      };
    }
    if (!useOptionsReplaceForData) {
      data = {
        ...data
      };
      for (const key of optionsKeys) {
        delete data[key];
      }
    }
    return data;
  }
  static hasDefaultValue(options) {
    const prefix = "defaultValue";
    for (const option in options) {
      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && void 0 !== options[option]) {
        return true;
      }
    }
    return false;
  }
};
var capitalize = (string) => string.charAt(0).toUpperCase() + string.slice(1);
var LanguageUtil = class {
  constructor(options) {
    this.options = options;
    this.supportedLngs = this.options.supportedLngs || false;
    this.logger = baseLogger.create("languageUtils");
  }
  getScriptPartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf("-") < 0) return null;
    const p = code.split("-");
    if (p.length === 2) return null;
    p.pop();
    if (p[p.length - 1].toLowerCase() === "x") return null;
    return this.formatLanguageCode(p.join("-"));
  }
  getLanguagePartFromCode(code) {
    code = getCleanedCode(code);
    if (!code || code.indexOf("-") < 0) return code;
    const p = code.split("-");
    return this.formatLanguageCode(p[0]);
  }
  formatLanguageCode(code) {
    if (typeof code === "string" && code.indexOf("-") > -1) {
      const specialCases = ["hans", "hant", "latn", "cyrl", "cans", "mong", "arab"];
      let p = code.split("-");
      if (this.options.lowerCaseLng) {
        p = p.map((part) => part.toLowerCase());
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== "sgn" && p[2].length === 2) p[2] = p[2].toUpperCase();
        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }
      return p.join("-");
    }
    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  }
  isSupportedCode(code) {
    if (this.options.load === "languageOnly" || this.options.nonExplicitSupportedLngs) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;
  }
  getBestMatchFromCodes(codes) {
    if (!codes) return null;
    let found;
    codes.forEach((code) => {
      if (found) return;
      const cleanedLng = this.formatLanguageCode(code);
      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;
    });
    if (!found && this.options.supportedLngs) {
      codes.forEach((code) => {
        if (found) return;
        const lngOnly = this.getLanguagePartFromCode(code);
        if (this.isSupportedCode(lngOnly)) return found = lngOnly;
        found = this.options.supportedLngs.find((supportedLng) => {
          if (supportedLng === lngOnly) return supportedLng;
          if (supportedLng.indexOf("-") < 0 && lngOnly.indexOf("-") < 0) return;
          if (supportedLng.indexOf("-") > 0 && lngOnly.indexOf("-") < 0 && supportedLng.substring(0, supportedLng.indexOf("-")) === lngOnly) return supportedLng;
          if (supportedLng.indexOf(lngOnly) === 0 && lngOnly.length > 1) return supportedLng;
        });
      });
    }
    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];
    return found;
  }
  getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === "function") fallbacks = fallbacks(code);
    if (typeof fallbacks === "string") fallbacks = [fallbacks];
    if (Array.isArray(fallbacks)) return fallbacks;
    if (!code) return fallbacks.default || [];
    let found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];
    if (!found) found = fallbacks.default;
    return found || [];
  }
  toResolveHierarchy(code, fallbackCode) {
    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);
    const codes = [];
    const addCode = (c) => {
      if (!c) return;
      if (this.isSupportedCode(c)) {
        codes.push(c);
      } else {
        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);
      }
    };
    if (typeof code === "string" && (code.indexOf("-") > -1 || code.indexOf("_") > -1)) {
      if (this.options.load !== "languageOnly") addCode(this.formatLanguageCode(code));
      if (this.options.load !== "languageOnly" && this.options.load !== "currentOnly") addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== "currentOnly") addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === "string") {
      addCode(this.formatLanguageCode(code));
    }
    fallbackCodes.forEach((fc) => {
      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));
    });
    return codes;
  }
};
var sets = [{
  lngs: ["ach", "ak", "am", "arn", "br", "fil", "gun", "ln", "mfe", "mg", "mi", "oc", "pt", "pt-BR", "tg", "tl", "ti", "tr", "uz", "wa"],
  nr: [1, 2],
  fc: 1
}, {
  lngs: ["af", "an", "ast", "az", "bg", "bn", "ca", "da", "de", "dev", "el", "en", "eo", "es", "et", "eu", "fi", "fo", "fur", "fy", "gl", "gu", "ha", "hi", "hu", "hy", "ia", "it", "kk", "kn", "ku", "lb", "mai", "ml", "mn", "mr", "nah", "nap", "nb", "ne", "nl", "nn", "no", "nso", "pa", "pap", "pms", "ps", "pt-PT", "rm", "sco", "se", "si", "so", "son", "sq", "sv", "sw", "ta", "te", "tk", "ur", "yo"],
  nr: [1, 2],
  fc: 2
}, {
  lngs: ["ay", "bo", "cgg", "fa", "ht", "id", "ja", "jbo", "ka", "km", "ko", "ky", "lo", "ms", "sah", "su", "th", "tt", "ug", "vi", "wo", "zh"],
  nr: [1],
  fc: 3
}, {
  lngs: ["be", "bs", "cnr", "dz", "hr", "ru", "sr", "uk"],
  nr: [1, 2, 5],
  fc: 4
}, {
  lngs: ["ar"],
  nr: [0, 1, 2, 3, 11, 100],
  fc: 5
}, {
  lngs: ["cs", "sk"],
  nr: [1, 2, 5],
  fc: 6
}, {
  lngs: ["csb", "pl"],
  nr: [1, 2, 5],
  fc: 7
}, {
  lngs: ["cy"],
  nr: [1, 2, 3, 8],
  fc: 8
}, {
  lngs: ["fr"],
  nr: [1, 2],
  fc: 9
}, {
  lngs: ["ga"],
  nr: [1, 2, 3, 7, 11],
  fc: 10
}, {
  lngs: ["gd"],
  nr: [1, 2, 3, 20],
  fc: 11
}, {
  lngs: ["is"],
  nr: [1, 2],
  fc: 12
}, {
  lngs: ["jv"],
  nr: [0, 1],
  fc: 13
}, {
  lngs: ["kw"],
  nr: [1, 2, 3, 4],
  fc: 14
}, {
  lngs: ["lt"],
  nr: [1, 2, 10],
  fc: 15
}, {
  lngs: ["lv"],
  nr: [1, 2, 0],
  fc: 16
}, {
  lngs: ["mk"],
  nr: [1, 2],
  fc: 17
}, {
  lngs: ["mnk"],
  nr: [0, 1, 2],
  fc: 18
}, {
  lngs: ["mt"],
  nr: [1, 2, 11, 20],
  fc: 19
}, {
  lngs: ["or"],
  nr: [2, 1],
  fc: 2
}, {
  lngs: ["ro"],
  nr: [1, 2, 20],
  fc: 20
}, {
  lngs: ["sl"],
  nr: [5, 1, 2, 3],
  fc: 21
}, {
  lngs: ["he", "iw"],
  nr: [1, 2, 20, 21],
  fc: 22
}];
var _rulesPluralsTypes = {
  1: (n) => Number(n > 1),
  2: (n) => Number(n != 1),
  3: (n) => 0,
  4: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  5: (n) => Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5),
  6: (n) => Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2),
  7: (n) => Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  8: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3),
  9: (n) => Number(n >= 2),
  10: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4),
  11: (n) => Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3),
  12: (n) => Number(n % 10 != 1 || n % 100 == 11),
  13: (n) => Number(n !== 0),
  14: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3),
  15: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2),
  16: (n) => Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2),
  17: (n) => Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1),
  18: (n) => Number(n == 0 ? 0 : n == 1 ? 1 : 2),
  19: (n) => Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3),
  20: (n) => Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2),
  21: (n) => Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0),
  22: (n) => Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3)
};
var nonIntlVersions = ["v1", "v2", "v3"];
var intlVersions = ["v4"];
var suffixesOrder = {
  zero: 0,
  one: 1,
  two: 2,
  few: 3,
  many: 4,
  other: 5
};
var createRules = () => {
  const rules = {};
  sets.forEach((set) => {
    set.lngs.forEach((l) => {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
};
var PluralResolver = class {
  constructor(languageUtils) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    this.languageUtils = languageUtils;
    this.options = options;
    this.logger = baseLogger.create("pluralResolver");
    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === "undefined" || !Intl.PluralRules)) {
      this.options.compatibilityJSON = "v3";
      this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.");
    }
    this.rules = createRules();
    this.pluralRulesCache = {};
  }
  addRule(lng, obj) {
    this.rules[lng] = obj;
  }
  clearCache() {
    this.pluralRulesCache = {};
  }
  getRule(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (this.shouldUseIntlApi()) {
      try {
        const cleanedCode = getCleanedCode(code === "dev" ? "en" : code);
        const type = options.ordinal ? "ordinal" : "cardinal";
        const cacheKey = JSON.stringify({
          cleanedCode,
          type
        });
        if (cacheKey in this.pluralRulesCache) {
          return this.pluralRulesCache[cacheKey];
        }
        const rule = new Intl.PluralRules(cleanedCode, {
          type
        });
        this.pluralRulesCache[cacheKey] = rule;
        return rule;
      } catch (err) {
        return;
      }
    }
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  }
  needsPlural(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (this.shouldUseIntlApi()) {
      return rule && rule.resolvedOptions().pluralCategories.length > 1;
    }
    return rule && rule.numbers.length > 1;
  }
  getPluralFormsOfKey(code, key) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    return this.getSuffixes(code, options).map((suffix) => `${key}${suffix}`);
  }
  getSuffixes(code) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    const rule = this.getRule(code, options);
    if (!rule) {
      return [];
    }
    if (this.shouldUseIntlApi()) {
      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map((pluralCategory) => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ""}${pluralCategory}`);
    }
    return rule.numbers.map((number) => this.getSuffix(code, number, options));
  }
  getSuffix(code, count) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    const rule = this.getRule(code, options);
    if (rule) {
      if (this.shouldUseIntlApi()) {
        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ""}${rule.select(count)}`;
      }
      return this.getSuffixRetroCompatible(rule, count);
    }
    this.logger.warn(`no plural rule found for: ${code}`);
    return "";
  }
  getSuffixRetroCompatible(rule, count) {
    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
    let suffix = rule.numbers[idx];
    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      if (suffix === 2) {
        suffix = "plural";
      } else if (suffix === 1) {
        suffix = "";
      }
    }
    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();
    if (this.options.compatibilityJSON === "v1") {
      if (suffix === 1) return "";
      if (typeof suffix === "number") return `_plural_${suffix.toString()}`;
      return returnSuffix();
    } else if (this.options.compatibilityJSON === "v2") {
      return returnSuffix();
    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
      return returnSuffix();
    }
    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
  }
  shouldUseIntlApi() {
    return !nonIntlVersions.includes(this.options.compatibilityJSON);
  }
};
var deepFindWithDefaults = function(data, defaultData, key) {
  let keySeparator = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : ".";
  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : true;
  let path = getPathWithDefaults(data, defaultData, key);
  if (!path && ignoreJSONStructure && typeof key === "string") {
    path = deepFind(data, key, keySeparator);
    if (path === void 0) path = deepFind(defaultData, key, keySeparator);
  }
  return path;
};
var regexSafe = (val) => val.replace(/\$/g, "$$$$");
var Interpolator = class {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    this.logger = baseLogger.create("interpolator");
    this.options = options;
    this.format = options.interpolation && options.interpolation.format || ((value) => value);
    this.init(options);
  }
  init() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (!options.interpolation) options.interpolation = {
      escapeValue: true
    };
    const {
      escape: escape$1,
      escapeValue,
      useRawValueToEscape,
      prefix,
      prefixEscaped,
      suffix,
      suffixEscaped,
      formatSeparator,
      unescapeSuffix,
      unescapePrefix,
      nestingPrefix,
      nestingPrefixEscaped,
      nestingSuffix,
      nestingSuffixEscaped,
      nestingOptionsSeparator,
      maxReplaces,
      alwaysFormat
    } = options.interpolation;
    this.escape = escape$1 !== void 0 ? escape$1 : escape;
    this.escapeValue = escapeValue !== void 0 ? escapeValue : true;
    this.useRawValueToEscape = useRawValueToEscape !== void 0 ? useRawValueToEscape : false;
    this.prefix = prefix ? regexEscape(prefix) : prefixEscaped || "{{";
    this.suffix = suffix ? regexEscape(suffix) : suffixEscaped || "}}";
    this.formatSeparator = formatSeparator || ",";
    this.unescapePrefix = unescapeSuffix ? "" : unescapePrefix || "-";
    this.unescapeSuffix = this.unescapePrefix ? "" : unescapeSuffix || "";
    this.nestingPrefix = nestingPrefix ? regexEscape(nestingPrefix) : nestingPrefixEscaped || regexEscape("$t(");
    this.nestingSuffix = nestingSuffix ? regexEscape(nestingSuffix) : nestingSuffixEscaped || regexEscape(")");
    this.nestingOptionsSeparator = nestingOptionsSeparator || ",";
    this.maxReplaces = maxReplaces || 1e3;
    this.alwaysFormat = alwaysFormat !== void 0 ? alwaysFormat : false;
    this.resetRegExp();
  }
  reset() {
    if (this.options) this.init(this.options);
  }
  resetRegExp() {
    const getOrResetRegExp = (existingRegExp, pattern) => {
      if (existingRegExp && existingRegExp.source === pattern) {
        existingRegExp.lastIndex = 0;
        return existingRegExp;
      }
      return new RegExp(pattern, "g");
    };
    this.regexp = getOrResetRegExp(this.regexp, `${this.prefix}(.+?)${this.suffix}`);
    this.regexpUnescape = getOrResetRegExp(this.regexpUnescape, `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`);
    this.nestingRegexp = getOrResetRegExp(this.nestingRegexp, `${this.nestingPrefix}(.+?)${this.nestingSuffix}`);
  }
  interpolate(str, data, lng, options) {
    let match;
    let value;
    let replaces;
    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};
    const handleFormat = (key) => {
      if (key.indexOf(this.formatSeparator) < 0) {
        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);
        return this.alwaysFormat ? this.format(path, void 0, lng, {
          ...options,
          ...data,
          interpolationkey: key
        }) : path;
      }
      const p = key.split(this.formatSeparator);
      const k = p.shift().trim();
      const f = p.join(this.formatSeparator).trim();
      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {
        ...options,
        ...data,
        interpolationkey: k
      });
    };
    this.resetRegExp();
    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;
    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== void 0 ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;
    const todos = [{
      regex: this.regexpUnescape,
      safeValue: (val) => regexSafe(val)
    }, {
      regex: this.regexp,
      safeValue: (val) => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)
    }];
    todos.forEach((todo) => {
      replaces = 0;
      while (match = todo.regex.exec(str)) {
        const matchedVar = match[1].trim();
        value = handleFormat(matchedVar);
        if (value === void 0) {
          if (typeof missingInterpolationHandler === "function") {
            const temp = missingInterpolationHandler(str, match, options);
            value = typeof temp === "string" ? temp : "";
          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {
            value = "";
          } else if (skipOnVariables) {
            value = match[0];
            continue;
          } else {
            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);
            value = "";
          }
        } else if (typeof value !== "string" && !this.useRawValueToEscape) {
          value = makeString(value);
        }
        const safeValue = todo.safeValue(value);
        str = str.replace(match[0], safeValue);
        if (skipOnVariables) {
          todo.regex.lastIndex += value.length;
          todo.regex.lastIndex -= match[0].length;
        } else {
          todo.regex.lastIndex = 0;
        }
        replaces++;
        if (replaces >= this.maxReplaces) {
          break;
        }
      }
    });
    return str;
  }
  nest(str, fc) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    let match;
    let value;
    let clonedOptions;
    const handleHasOptions = (key, inheritedOptions) => {
      const sep = this.nestingOptionsSeparator;
      if (key.indexOf(sep) < 0) return key;
      const c = key.split(new RegExp(`${sep}[ ]*{`));
      let optionsString = `{${c[1]}`;
      key = c[0];
      optionsString = this.interpolate(optionsString, clonedOptions);
      const matchedSingleQuotes = optionsString.match(/'/g);
      const matchedDoubleQuotes = optionsString.match(/"/g);
      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {
        optionsString = optionsString.replace(/'/g, '"');
      }
      try {
        clonedOptions = JSON.parse(optionsString);
        if (inheritedOptions) clonedOptions = {
          ...inheritedOptions,
          ...clonedOptions
        };
      } catch (e) {
        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);
        return `${key}${sep}${optionsString}`;
      }
      if (clonedOptions.defaultValue && clonedOptions.defaultValue.indexOf(this.prefix) > -1) delete clonedOptions.defaultValue;
      return key;
    };
    while (match = this.nestingRegexp.exec(str)) {
      let formatters = [];
      clonedOptions = {
        ...options
      };
      clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== "string" ? clonedOptions.replace : clonedOptions;
      clonedOptions.applyPostProcessor = false;
      delete clonedOptions.defaultValue;
      let doReduce = false;
      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {
        const r = match[1].split(this.formatSeparator).map((elem) => elem.trim());
        match[1] = r.shift();
        formatters = r;
        doReduce = true;
      }
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);
      if (value && match[0] === str && typeof value !== "string") return value;
      if (typeof value !== "string") value = makeString(value);
      if (!value) {
        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);
        value = "";
      }
      if (doReduce) {
        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {
          ...options,
          interpolationkey: match[1].trim()
        }), value.trim());
      }
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  }
};
var parseFormatStr = (formatStr) => {
  let formatName = formatStr.toLowerCase().trim();
  const formatOptions = {};
  if (formatStr.indexOf("(") > -1) {
    const p = formatStr.split("(");
    formatName = p[0].toLowerCase().trim();
    const optStr = p[1].substring(0, p[1].length - 1);
    if (formatName === "currency" && optStr.indexOf(":") < 0) {
      if (!formatOptions.currency) formatOptions.currency = optStr.trim();
    } else if (formatName === "relativetime" && optStr.indexOf(":") < 0) {
      if (!formatOptions.range) formatOptions.range = optStr.trim();
    } else {
      const opts = optStr.split(";");
      opts.forEach((opt) => {
        if (opt) {
          const [key, ...rest] = opt.split(":");
          const val = rest.join(":").trim().replace(/^'+|'+$/g, "");
          const trimmedKey = key.trim();
          if (!formatOptions[trimmedKey]) formatOptions[trimmedKey] = val;
          if (val === "false") formatOptions[trimmedKey] = false;
          if (val === "true") formatOptions[trimmedKey] = true;
          if (!isNaN(val)) formatOptions[trimmedKey] = parseInt(val, 10);
        }
      });
    }
  }
  return {
    formatName,
    formatOptions
  };
};
var createCachedFormatter = (fn) => {
  const cache = {};
  return (val, lng, options) => {
    let optForCache = options;
    if (options && options.interpolationkey && options.formatParams && options.formatParams[options.interpolationkey] && options[options.interpolationkey]) {
      optForCache = {
        ...optForCache,
        [options.interpolationkey]: void 0
      };
    }
    const key = lng + JSON.stringify(optForCache);
    let formatter = cache[key];
    if (!formatter) {
      formatter = fn(getCleanedCode(lng), options);
      cache[key] = formatter;
    }
    return formatter(val);
  };
};
var Formatter = class {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    this.logger = baseLogger.create("formatter");
    this.options = options;
    this.formats = {
      number: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      }),
      currency: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.NumberFormat(lng, {
          ...opt,
          style: "currency"
        });
        return (val) => formatter.format(val);
      }),
      datetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.DateTimeFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      }),
      relativetime: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.RelativeTimeFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val, opt.range || "day");
      }),
      list: createCachedFormatter((lng, opt) => {
        const formatter = new Intl.ListFormat(lng, {
          ...opt
        });
        return (val) => formatter.format(val);
      })
    };
    this.init(options);
  }
  init(services) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {
      interpolation: {}
    };
    const iOpts = options.interpolation;
    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ",";
  }
  add(name, fc) {
    this.formats[name.toLowerCase().trim()] = fc;
  }
  addCached(name, fc) {
    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);
  }
  format(value, format, lng) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    const formats = format.split(this.formatSeparator);
    if (formats.length > 1 && formats[0].indexOf("(") > 1 && formats[0].indexOf(")") < 0 && formats.find((f) => f.indexOf(")") > -1)) {
      const lastIndex = formats.findIndex((f) => f.indexOf(")") > -1);
      formats[0] = [formats[0], ...formats.splice(1, lastIndex)].join(this.formatSeparator);
    }
    const result = formats.reduce((mem, f) => {
      const {
        formatName,
        formatOptions
      } = parseFormatStr(f);
      if (this.formats[formatName]) {
        let formatted = mem;
        try {
          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};
          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;
          formatted = this.formats[formatName](mem, l, {
            ...formatOptions,
            ...options,
            ...valOptions
          });
        } catch (error) {
          this.logger.warn(error);
        }
        return formatted;
      } else {
        this.logger.warn(`there was no format function for ${formatName}`);
      }
      return mem;
    }, value);
    return result;
  }
};
var removePending = (q, name) => {
  if (q.pending[name] !== void 0) {
    delete q.pending[name];
    q.pendingCount--;
  }
};
var Connector = class extends EventEmitter {
  constructor(backend, store, services) {
    let options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
    super();
    this.backend = backend;
    this.store = store;
    this.services = services;
    this.languageUtils = services.languageUtils;
    this.options = options;
    this.logger = baseLogger.create("backendConnector");
    this.waitingReads = [];
    this.maxParallelReads = options.maxParallelReads || 10;
    this.readingCalls = 0;
    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;
    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;
    this.state = {};
    this.queue = [];
    if (this.backend && this.backend.init) {
      this.backend.init(services, options.backend, options);
    }
  }
  queueLoad(languages, namespaces, options, callback) {
    const toLoad = {};
    const pending = {};
    const toLoadLanguages = {};
    const toLoadNamespaces = {};
    languages.forEach((lng) => {
      let hasAllNamespaces = true;
      namespaces.forEach((ns) => {
        const name = `${lng}|${ns}`;
        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {
          this.state[name] = 2;
        } else if (this.state[name] < 0) ;
        else if (this.state[name] === 1) {
          if (pending[name] === void 0) pending[name] = true;
        } else {
          this.state[name] = 1;
          hasAllNamespaces = false;
          if (pending[name] === void 0) pending[name] = true;
          if (toLoad[name] === void 0) toLoad[name] = true;
          if (toLoadNamespaces[ns] === void 0) toLoadNamespaces[ns] = true;
        }
      });
      if (!hasAllNamespaces) toLoadLanguages[lng] = true;
    });
    if (Object.keys(toLoad).length || Object.keys(pending).length) {
      this.queue.push({
        pending,
        pendingCount: Object.keys(pending).length,
        loaded: {},
        errors: [],
        callback
      });
    }
    return {
      toLoad: Object.keys(toLoad),
      pending: Object.keys(pending),
      toLoadLanguages: Object.keys(toLoadLanguages),
      toLoadNamespaces: Object.keys(toLoadNamespaces)
    };
  }
  loaded(name, err, data) {
    const s = name.split("|");
    const lng = s[0];
    const ns = s[1];
    if (err) this.emit("failedLoading", lng, ns, err);
    if (!err && data) {
      this.store.addResourceBundle(lng, ns, data, void 0, void 0, {
        skipCopy: true
      });
    }
    this.state[name] = err ? -1 : 2;
    if (err && data) this.state[name] = 0;
    const loaded = {};
    this.queue.forEach((q) => {
      pushPath(q.loaded, [lng], ns);
      removePending(q, name);
      if (err) q.errors.push(err);
      if (q.pendingCount === 0 && !q.done) {
        Object.keys(q.loaded).forEach((l) => {
          if (!loaded[l]) loaded[l] = {};
          const loadedKeys = q.loaded[l];
          if (loadedKeys.length) {
            loadedKeys.forEach((n) => {
              if (loaded[l][n] === void 0) loaded[l][n] = true;
            });
          }
        });
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });
    this.emit("loaded", loaded);
    this.queue = this.queue.filter((q) => !q.done);
  }
  read(lng, ns, fcName) {
    let tried = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 0;
    let wait = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : this.retryTimeout;
    let callback = arguments.length > 5 ? arguments[5] : void 0;
    if (!lng.length) return callback(null, {});
    if (this.readingCalls >= this.maxParallelReads) {
      this.waitingReads.push({
        lng,
        ns,
        fcName,
        tried,
        wait,
        callback
      });
      return;
    }
    this.readingCalls++;
    const resolver = (err, data) => {
      this.readingCalls--;
      if (this.waitingReads.length > 0) {
        const next = this.waitingReads.shift();
        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);
      }
      if (err && data && tried < this.maxRetries) {
        setTimeout(() => {
          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    };
    const fc = this.backend[fcName].bind(this.backend);
    if (fc.length === 2) {
      try {
        const r = fc(lng, ns);
        if (r && typeof r.then === "function") {
          r.then((data) => resolver(null, data)).catch(resolver);
        } else {
          resolver(null, r);
        }
      } catch (err) {
        resolver(err);
      }
      return;
    }
    return fc(lng, ns, resolver);
  }
  prepareLoading(languages, namespaces) {
    let options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
    let callback = arguments.length > 3 ? arguments[3] : void 0;
    if (!this.backend) {
      this.logger.warn("No backend was added via i18next.use. Will not load resources.");
      return callback && callback();
    }
    if (typeof languages === "string") languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === "string") namespaces = [namespaces];
    const toLoad = this.queueLoad(languages, namespaces, options, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback();
      return null;
    }
    toLoad.toLoad.forEach((name) => {
      this.loadOne(name);
    });
  }
  load(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {}, callback);
  }
  reload(languages, namespaces, callback) {
    this.prepareLoading(languages, namespaces, {
      reload: true
    }, callback);
  }
  loadOne(name) {
    let prefix = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
    const s = name.split("|");
    const lng = s[0];
    const ns = s[1];
    this.read(lng, ns, "read", void 0, void 0, (err, data) => {
      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);
      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);
      this.loaded(name, err, data);
    });
  }
  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    let options = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {};
    let clb = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : () => {
    };
    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {
      this.logger.warn(`did not save key "${key}" as the namespace "${namespace}" was not yet loaded`, "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");
      return;
    }
    if (key === void 0 || key === null || key === "") return;
    if (this.backend && this.backend.create) {
      const opts = {
        ...options,
        isUpdate
      };
      const fc = this.backend.create.bind(this.backend);
      if (fc.length < 6) {
        try {
          let r;
          if (fc.length === 5) {
            r = fc(languages, namespace, key, fallbackValue, opts);
          } else {
            r = fc(languages, namespace, key, fallbackValue);
          }
          if (r && typeof r.then === "function") {
            r.then((data) => clb(null, data)).catch(clb);
          } else {
            clb(null, r);
          }
        } catch (err) {
          clb(err);
        }
      } else {
        fc(languages, namespace, key, fallbackValue, clb, opts);
      }
    }
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  }
};
var get = () => ({
  debug: false,
  initImmediate: true,
  ns: ["translation"],
  defaultNS: ["translation"],
  fallbackLng: ["dev"],
  fallbackNS: false,
  supportedLngs: false,
  nonExplicitSupportedLngs: false,
  load: "all",
  preload: false,
  simplifyPluralSuffix: true,
  keySeparator: ".",
  nsSeparator: ":",
  pluralSeparator: "_",
  contextSeparator: "_",
  partialBundledLanguages: false,
  saveMissing: false,
  updateMissing: false,
  saveMissingTo: "fallback",
  saveMissingPlurals: true,
  missingKeyHandler: false,
  missingInterpolationHandler: false,
  postProcess: false,
  postProcessPassResolved: false,
  returnNull: false,
  returnEmptyString: true,
  returnObjects: false,
  joinArrays: false,
  returnedObjectHandler: false,
  parseMissingKeyHandler: false,
  appendNamespaceToMissingKey: false,
  appendNamespaceToCIMode: false,
  overloadTranslationOptionHandler: (args) => {
    let ret = {};
    if (typeof args[1] === "object") ret = args[1];
    if (typeof args[1] === "string") ret.defaultValue = args[1];
    if (typeof args[2] === "string") ret.tDescription = args[2];
    if (typeof args[2] === "object" || typeof args[3] === "object") {
      const options = args[3] || args[2];
      Object.keys(options).forEach((key) => {
        ret[key] = options[key];
      });
    }
    return ret;
  },
  interpolation: {
    escapeValue: true,
    format: (value) => value,
    prefix: "{{",
    suffix: "}}",
    formatSeparator: ",",
    unescapePrefix: "-",
    nestingPrefix: "$t(",
    nestingSuffix: ")",
    nestingOptionsSeparator: ",",
    maxReplaces: 1e3,
    skipOnVariables: true
  }
});
var transformOptions = (options) => {
  if (typeof options.ns === "string") options.ns = [options.ns];
  if (typeof options.fallbackLng === "string") options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === "string") options.fallbackNS = [options.fallbackNS];
  if (options.supportedLngs && options.supportedLngs.indexOf("cimode") < 0) {
    options.supportedLngs = options.supportedLngs.concat(["cimode"]);
  }
  return options;
};
var noop = () => {
};
var bindMemberFunctions = (inst) => {
  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));
  mems.forEach((mem) => {
    if (typeof inst[mem] === "function") {
      inst[mem] = inst[mem].bind(inst);
    }
  });
};
var I18n = class _I18n extends EventEmitter {
  constructor() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    super();
    this.options = transformOptions(options);
    this.services = {};
    this.logger = baseLogger;
    this.modules = {
      external: []
    };
    bindMemberFunctions(this);
    if (callback && !this.isInitialized && !options.isClone) {
      if (!this.options.initImmediate) {
        this.init(options, callback);
        return this;
      }
      setTimeout(() => {
        this.init(options, callback);
      }, 0);
    }
  }
  init() {
    var _this = this;
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    this.isInitializing = true;
    if (typeof options === "function") {
      callback = options;
      options = {};
    }
    if (!options.defaultNS && options.defaultNS !== false && options.ns) {
      if (typeof options.ns === "string") {
        options.defaultNS = options.ns;
      } else if (options.ns.indexOf("translation") < 0) {
        options.defaultNS = options.ns[0];
      }
    }
    const defOpts = get();
    this.options = {
      ...defOpts,
      ...this.options,
      ...transformOptions(options)
    };
    if (this.options.compatibilityAPI !== "v1") {
      this.options.interpolation = {
        ...defOpts.interpolation,
        ...this.options.interpolation
      };
    }
    if (options.keySeparator !== void 0) {
      this.options.userDefinedKeySeparator = options.keySeparator;
    }
    if (options.nsSeparator !== void 0) {
      this.options.userDefinedNsSeparator = options.nsSeparator;
    }
    const createClassOnDemand = (ClassOrObject) => {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === "function") return new ClassOrObject();
      return ClassOrObject;
    };
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }
      let formatter;
      if (this.modules.formatter) {
        formatter = this.modules.formatter;
      } else if (typeof Intl !== "undefined") {
        formatter = Formatter;
      }
      const lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);
      const s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, {
        prepend: this.options.pluralSeparator,
        compatibilityJSON: this.options.compatibilityJSON,
        simplifyPluralSuffix: this.options.simplifyPluralSuffix
      });
      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {
        s.formatter = createClassOnDemand(formatter);
        s.formatter.init(s, this.options);
        this.options.interpolation.format = s.formatter.format.bind(s.formatter);
      }
      s.interpolator = new Interpolator(this.options);
      s.utils = {
        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)
      };
      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      s.backendConnector.on("*", function(event) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        _this.emit(event, ...args);
      });
      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);
      }
      if (this.modules.i18nFormat) {
        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);
        if (s.i18nFormat.init) s.i18nFormat.init(this);
      }
      this.translator = new Translator(this.services, this.options);
      this.translator.on("*", function(event) {
        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }
        _this.emit(event, ...args);
      });
      this.modules.external.forEach((m) => {
        if (m.init) m.init(this);
      });
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;
    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {
      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
      if (codes.length > 0 && codes[0] !== "dev") this.options.lng = codes[0];
    }
    if (!this.services.languageDetector && !this.options.lng) {
      this.logger.warn("init: no languageDetector is used and no lng is defined");
    }
    const storeApi = ["getResource", "hasResourceBundle", "getResourceBundle", "getDataByLanguage"];
    storeApi.forEach((fcName) => {
      this[fcName] = function() {
        return _this.store[fcName](...arguments);
      };
    });
    const storeApiChained = ["addResource", "addResources", "addResourceBundle", "removeResourceBundle"];
    storeApiChained.forEach((fcName) => {
      this[fcName] = function() {
        _this.store[fcName](...arguments);
        return _this;
      };
    });
    const deferred = defer();
    const load = () => {
      const finish = (err, t2) => {
        this.isInitializing = false;
        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn("init: i18next is already initialized. You should call init just once!");
        this.isInitialized = true;
        if (!this.options.isClone) this.logger.log("initialized", this.options);
        this.emit("initialized", this.options);
        deferred.resolve(t2);
        callback(err, t2);
      };
      if (this.languages && this.options.compatibilityAPI !== "v1" && !this.isInitialized) return finish(null, this.t.bind(this));
      this.changeLanguage(this.options.lng, finish);
    };
    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }
    return deferred;
  }
  loadResources(language) {
    let callback = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : noop;
    let usedCallback = callback;
    const usedLng = typeof language === "string" ? language : this.language;
    if (typeof language === "function") usedCallback = language;
    if (!this.options.resources || this.options.partialBundledLanguages) {
      if (usedLng && usedLng.toLowerCase() === "cimode" && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();
      const toLoad = [];
      const append = (lng) => {
        if (!lng) return;
        if (lng === "cimode") return;
        const lngs = this.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach((l) => {
          if (l === "cimode") return;
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };
      if (!usedLng) {
        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach((l) => append(l));
      } else {
        append(usedLng);
      }
      if (this.options.preload) {
        this.options.preload.forEach((l) => append(l));
      }
      this.services.backendConnector.load(toLoad, this.options.ns, (e) => {
        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);
        usedCallback(e);
      });
    } else {
      usedCallback(null);
    }
  }
  reloadResources(lngs, ns, callback) {
    const deferred = defer();
    if (typeof lngs === "function") {
      callback = lngs;
      lngs = void 0;
    }
    if (typeof ns === "function") {
      callback = ns;
      ns = void 0;
    }
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    if (!callback) callback = noop;
    this.services.backendConnector.reload(lngs, ns, (err) => {
      deferred.resolve();
      callback(err);
    });
    return deferred;
  }
  use(module2) {
    if (!module2) throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");
    if (!module2.type) throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");
    if (module2.type === "backend") {
      this.modules.backend = module2;
    }
    if (module2.type === "logger" || module2.log && module2.warn && module2.error) {
      this.modules.logger = module2;
    }
    if (module2.type === "languageDetector") {
      this.modules.languageDetector = module2;
    }
    if (module2.type === "i18nFormat") {
      this.modules.i18nFormat = module2;
    }
    if (module2.type === "postProcessor") {
      postProcessor.addPostProcessor(module2);
    }
    if (module2.type === "formatter") {
      this.modules.formatter = module2;
    }
    if (module2.type === "3rdParty") {
      this.modules.external.push(module2);
    }
    return this;
  }
  setResolvedLanguage(l) {
    if (!l || !this.languages) return;
    if (["cimode", "dev"].indexOf(l) > -1) return;
    for (let li = 0; li < this.languages.length; li++) {
      const lngInLngs = this.languages[li];
      if (["cimode", "dev"].indexOf(lngInLngs) > -1) continue;
      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {
        this.resolvedLanguage = lngInLngs;
        break;
      }
    }
  }
  changeLanguage(lng, callback) {
    var _this2 = this;
    this.isLanguageChangingTo = lng;
    const deferred = defer();
    this.emit("languageChanging", lng);
    const setLngProps = (l) => {
      this.language = l;
      this.languages = this.services.languageUtils.toResolveHierarchy(l);
      this.resolvedLanguage = void 0;
      this.setResolvedLanguage(l);
    };
    const done = (err, l) => {
      if (l) {
        setLngProps(l);
        this.translator.changeLanguage(l);
        this.isLanguageChangingTo = void 0;
        this.emit("languageChanged", l);
        this.logger.log("languageChanged", l);
      } else {
        this.isLanguageChangingTo = void 0;
      }
      deferred.resolve(function() {
        return _this2.t(...arguments);
      });
      if (callback) callback(err, function() {
        return _this2.t(...arguments);
      });
    };
    const setLng = (lngs) => {
      if (!lng && !lngs && this.services.languageDetector) lngs = [];
      const l = typeof lngs === "string" ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);
      if (l) {
        if (!this.language) {
          setLngProps(l);
        }
        if (!this.translator.language) this.translator.changeLanguage(l);
        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);
      }
      this.loadResources(l, (err) => {
        done(err, l);
      });
    };
    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      if (this.services.languageDetector.detect.length === 0) {
        this.services.languageDetector.detect().then(setLng);
      } else {
        this.services.languageDetector.detect(setLng);
      }
    } else {
      setLng(lng);
    }
    return deferred;
  }
  getFixedT(lng, ns, keyPrefix) {
    var _this3 = this;
    const fixedT = function(key, opts) {
      let options;
      if (typeof opts !== "object") {
        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {
          rest[_key3 - 2] = arguments[_key3];
        }
        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      } else {
        options = {
          ...opts
        };
      }
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      if (options.keyPrefix !== "") options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;
      const keySeparator = _this3.options.keySeparator || ".";
      let resultKey;
      if (options.keyPrefix && Array.isArray(key)) {
        resultKey = key.map((k) => `${options.keyPrefix}${keySeparator}${k}`);
      } else {
        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;
      }
      return _this3.t(resultKey, options);
    };
    if (typeof lng === "string") {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    fixedT.keyPrefix = keyPrefix;
    return fixedT;
  }
  t() {
    return this.translator && this.translator.translate(...arguments);
  }
  exists() {
    return this.translator && this.translator.exists(...arguments);
  }
  setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  }
  hasLoadedNamespace(ns) {
    let options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (!this.isInitialized) {
      this.logger.warn("hasLoadedNamespace: i18next was not initialized", this.languages);
      return false;
    }
    if (!this.languages || !this.languages.length) {
      this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty", this.languages);
      return false;
    }
    const lng = options.lng || this.resolvedLanguage || this.languages[0];
    const fallbackLng = this.options ? this.options.fallbackLng : false;
    const lastLng = this.languages[this.languages.length - 1];
    if (lng.toLowerCase() === "cimode") return true;
    const loadNotPending = (l, n) => {
      const loadState = this.services.backendConnector.state[`${l}|${n}`];
      return loadState === -1 || loadState === 0 || loadState === 2;
    };
    if (options.precheck) {
      const preResult = options.precheck(this, loadNotPending);
      if (preResult !== void 0) return preResult;
    }
    if (this.hasResourceBundle(lng, ns)) return true;
    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;
    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;
    return false;
  }
  loadNamespaces(ns, callback) {
    const deferred = defer();
    if (!this.options.ns) {
      if (callback) callback();
      return Promise.resolve();
    }
    if (typeof ns === "string") ns = [ns];
    ns.forEach((n) => {
      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);
    });
    this.loadResources((err) => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  loadLanguages(lngs, callback) {
    const deferred = defer();
    if (typeof lngs === "string") lngs = [lngs];
    const preloaded = this.options.preload || [];
    const newLngs = lngs.filter((lng) => preloaded.indexOf(lng) < 0 && this.services.languageUtils.isSupportedCode(lng));
    if (!newLngs.length) {
      if (callback) callback();
      return Promise.resolve();
    }
    this.options.preload = preloaded.concat(newLngs);
    this.loadResources((err) => {
      deferred.resolve();
      if (callback) callback(err);
    });
    return deferred;
  }
  dir(lng) {
    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);
    if (!lng) return "rtl";
    const rtlLngs = ["ar", "shu", "sqr", "ssh", "xaa", "yhd", "yud", "aao", "abh", "abv", "acm", "acq", "acw", "acx", "acy", "adf", "ads", "aeb", "aec", "afb", "ajp", "apc", "apd", "arb", "arq", "ars", "ary", "arz", "auz", "avl", "ayh", "ayl", "ayn", "ayp", "bbz", "pga", "he", "iw", "ps", "pbt", "pbu", "pst", "prp", "prd", "ug", "ur", "ydd", "yds", "yih", "ji", "yi", "hbo", "men", "xmn", "fa", "jpr", "peo", "pes", "prs", "dv", "sam", "ckb"];
    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());
    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf("-arab") > 1 ? "rtl" : "ltr";
  }
  static createInstance() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 ? arguments[1] : void 0;
    return new _I18n(options, callback);
  }
  cloneInstance() {
    let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    let callback = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : noop;
    const forkResourceStore = options.forkResourceStore;
    if (forkResourceStore) delete options.forkResourceStore;
    const mergedOptions = {
      ...this.options,
      ...options,
      ...{
        isClone: true
      }
    };
    const clone = new _I18n(mergedOptions);
    if (options.debug !== void 0 || options.prefix !== void 0) {
      clone.logger = clone.logger.clone(options);
    }
    const membersToCopy = ["store", "services", "language"];
    membersToCopy.forEach((m) => {
      clone[m] = this[m];
    });
    clone.services = {
      ...this.services
    };
    clone.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    if (forkResourceStore) {
      clone.store = new ResourceStore(this.store.data, mergedOptions);
      clone.services.resourceStore = clone.store;
    }
    clone.translator = new Translator(clone.services, mergedOptions);
    clone.translator.on("*", function(event) {
      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }
      clone.emit(event, ...args);
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = mergedOptions;
    clone.translator.backendConnector.services.utils = {
      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)
    };
    return clone;
  }
  toJSON() {
    return {
      options: this.options,
      store: this.store,
      language: this.language,
      languages: this.languages,
      resolvedLanguage: this.resolvedLanguage
    };
  }
};
var instance = I18n.createInstance();
instance.createInstance = I18n.createInstance;
var createInstance = instance.createInstance;
var dir = instance.dir;
var init = instance.init;
var loadResources = instance.loadResources;
var reloadResources = instance.reloadResources;
var use = instance.use;
var changeLanguage = instance.changeLanguage;
var getFixedT = instance.getFixedT;
var t = instance.t;
var exists = instance.exists;
var setDefaultNamespace = instance.setDefaultNamespace;
var hasLoadedNamespace = instance.hasLoadedNamespace;
var loadNamespaces = instance.loadNamespaces;
var loadLanguages = instance.loadLanguages;

// src/ui/toolbar/toolbarActions.ts
var currentPopup = null;
var FolderSuggestModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(plugin, onSelect) {
    super(plugin.app);
    this.plugin = plugin;
    this.onSelect = onSelect;
  }
  getItems() {
    return this.plugin.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian.TFolder);
  }
  getItemText(folder) {
    return folder.path;
  }
  onChooseItem(folder) {
    this.onSelect(folder);
  }
};
function toggleSort(plugin) {
  closeCurrentPopup();
  let sortPopup = document.querySelector(".card-navigator-sort-popup");
  if (!sortPopup) {
    sortPopup = document.createElement("div");
    sortPopup.className = "card-navigator-sort-popup";
    const currentSort = `${plugin.settings.sortCriterion}_${plugin.settings.sortOrder}`;
    const addSortOption = (value, label) => {
      const option = document.createElement("button");
      option.textContent = label;
      option.classList.add("sort-option");
      option.classList.toggle("active", currentSort === value);
      option.addEventListener("click", async () => {
        const [criterion, order] = value.split("_");
        plugin.settings.sortCriterion = criterion;
        plugin.settings.sortOrder = order;
        await plugin.saveSettings();
        plugin.triggerRefresh();
        closeCurrentPopup();
      });
      sortPopup.appendChild(option);
    };
    addSortOption("fileName_asc", t("File name (A to Z)"));
    addSortOption("fileName_desc", t("File name (Z to A)"));
    addSortOption("lastModified_desc", t("Last modified (newest first)"));
    addSortOption("lastModified_asc", t("Last modified (oldest first)"));
    addSortOption("created_desc", t("Created (newest first)"));
    addSortOption("created_asc", t("Created (oldest first)"));
    const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
    if (toolbarEl) {
      toolbarEl.insertAdjacentElement("afterend", sortPopup);
      currentPopup = sortPopup;
      document.addEventListener("click", onClickOutside);
    }
  } else {
    closeCurrentPopup();
  }
}
function toggleSettings(plugin) {
  closeCurrentPopup();
  let settingsPopup = document.querySelector(".card-navigator-settings-popup");
  if (!settingsPopup) {
    settingsPopup = document.createElement("div");
    settingsPopup.className = "card-navigator-settings-popup";
    const updateSetting = async (settingKey, value) => {
      plugin.settings[settingKey] = value;
      await plugin.saveSettings();
      plugin.triggerRefresh();
    };
    const cardsPerViewContainer = createSettingContainer("Cards per view:");
    const cardsPerViewSetting = document.createElement("input");
    cardsPerViewSetting.type = "range";
    cardsPerViewSetting.min = "1";
    cardsPerViewSetting.max = "10";
    cardsPerViewSetting.value = plugin.settings.cardsPerView.toString();
    cardsPerViewSetting.addEventListener("input", (e) => {
      const value = parseInt(e.target.value, 10);
      updateSetting("cardsPerView", value);
      cardsPerViewValue.textContent = value.toString();
    });
    const cardsPerViewValue = document.createElement("span");
    cardsPerViewValue.textContent = plugin.settings.cardsPerView.toString();
    cardsPerViewContainer.appendChild(cardsPerViewSetting);
    cardsPerViewContainer.appendChild(cardsPerViewValue);
    settingsPopup.appendChild(cardsPerViewContainer);
    const fontSizeContainer = createSettingContainer("Content Size:");
    const fontSizeSetting = document.createElement("input");
    fontSizeSetting.type = "range";
    fontSizeSetting.min = "10";
    fontSizeSetting.max = "30";
    fontSizeSetting.value = plugin.settings.contentSize.toString();
    fontSizeSetting.addEventListener("input", (e) => {
      const value = parseInt(e.target.value, 10);
      updateSetting("contentSize", value);
      fontSizeValue.textContent = value.toString() + "px";
    });
    const fontSizeValue = document.createElement("span");
    fontSizeValue.textContent = plugin.settings.contentSize.toString() + "px";
    fontSizeContainer.appendChild(fontSizeSetting);
    fontSizeContainer.appendChild(fontSizeValue);
    settingsPopup.appendChild(fontSizeContainer);
    const createToggle = (labelText, settingKey) => {
      const container = createSettingContainer(labelText);
      const toggleWrapper = document.createElement("div");
      toggleWrapper.className = "toggle-wrapper";
      const toggle = document.createElement("div");
      toggle.className = "toggle-button";
      toggle.classList.toggle("active", plugin.settings[settingKey]);
      toggle.addEventListener("click", async () => {
        const newValue = !plugin.settings[settingKey];
        toggle.classList.toggle("active", newValue);
        await updateSetting(settingKey, newValue);
      });
      toggleWrapper.appendChild(toggle);
      container.appendChild(toggleWrapper);
      return container;
    };
    settingsPopup.appendChild(createToggle(t("Show File Name"), "showFileName"));
    settingsPopup.appendChild(createToggle(t("Show First Header"), "showFirstHeader"));
    settingsPopup.appendChild(createToggle(t("Show Content"), "showContent"));
    settingsPopup.appendChild(createToggle(t("Drag and Drop Content"), "dragDropContent"));
    const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
    if (toolbarEl) {
      toolbarEl.insertAdjacentElement("afterend", settingsPopup);
      currentPopup = settingsPopup;
      document.addEventListener("click", onClickOutside);
    }
  } else {
    closeCurrentPopup();
  }
}
function closeCurrentPopup() {
  if (currentPopup) {
    currentPopup.remove();
    currentPopup = null;
    document.removeEventListener("click", onClickOutside);
  }
}
function onClickOutside(event) {
  const toolbarEl = document.querySelector(".card-navigator-toolbar-container");
  if (currentPopup && !currentPopup.contains(event.target) && !(toolbarEl == null ? void 0 : toolbarEl.contains(event.target))) {
    closeCurrentPopup();
  }
}
function createSettingContainer(labelText) {
  const container = document.createElement("div");
  container.className = "setting-container";
  const label = document.createElement("label");
  label.textContent = labelText;
  container.appendChild(label);
  return container;
}

// src/ui/toolbar/toolbar.ts
var Toolbar = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.containerEl = void 0;
    this.isVertical = false;
  }
  initialize(containerEl) {
    this.containerEl = containerEl;
    this.createToolbar();
  }
  setOrientation(isVertical) {
    if (this.isVertical !== isVertical) {
      this.isVertical = isVertical;
      this.updateToolbarStyle();
      this.createToolbar();
    }
  }
  updateToolbarStyle() {
    if (this.containerEl) {
      this.containerEl.classList.toggle("vertical", this.isVertical);
      this.containerEl.classList.toggle("horizontal", !this.isVertical);
    }
  }
  createToolbar() {
    if (!this.containerEl) {
      return;
    }
    this.containerEl.empty();
    const toolbarContainer = document.createElement("div");
    toolbarContainer.className = "card-navigator-toolbar-container";
    const searchContainer = this.createSearchContainer();
    const separator = this.createSeparator();
    const actionIconsContainer = this.createActionIconsContainer();
    toolbarContainer.appendChild(searchContainer);
    toolbarContainer.appendChild(separator);
    toolbarContainer.appendChild(actionIconsContainer);
    this.containerEl.appendChild(toolbarContainer);
  }
  createSearchContainer() {
    const container = document.createElement("div");
    container.className = "card-navigator-search-container";
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Search...";
    input.className = "card-navigator-search-input";
    input.addEventListener("input", (0, import_obsidian2.debounce)(async (e) => {
      const searchTerm = e.target.value;
      const view = this.plugin.app.workspace.getLeavesOfType("card-navigator-view")[0].view;
      await view.cardContainer.searchCards(searchTerm);
    }, 300));
    container.appendChild(input);
    return container;
  }
  createActionIconsContainer() {
    const container = document.createElement("div");
    container.className = "card-navigator-action-icons-container";
    const icons = [
      { name: "folder", label: "Select folder", action: () => this.openFolderSelector() },
      { name: "arrow-up-narrow-wide", label: "Sort cards", action: () => toggleSort(this.plugin) },
      { name: "settings", label: "Settings", action: () => toggleSettings(this.plugin) }
    ];
    icons.forEach((icon) => {
      const iconElement = this.createToolbarIcon(icon.name, icon.label, icon.action);
      if (icon.name === "arrow-up-narrow-wide") {
        iconElement.classList.toggle(
          "active",
          this.plugin.settings.sortCriterion !== "fileName" || this.plugin.settings.sortOrder !== "asc"
        );
      }
      container.appendChild(iconElement);
    });
    return container;
  }
  createToolbarIcon(iconName, ariaLabel, action) {
    const icon = document.createElement("div");
    icon.className = "clickable-icon";
    icon.setAttribute("aria-label", ariaLabel);
    (0, import_obsidian2.setIcon)(icon, iconName);
    icon.addEventListener("click", action);
    return icon;
  }
  createSeparator() {
    const separator = document.createElement("div");
    separator.className = "toolbar-separator";
    return separator;
  }
  openFolderSelector() {
    new FolderSuggestModal(this.plugin, (folder) => {
      const view = this.plugin.app.workspace.getActiveViewOfType(CardNavigator);
      if (view) {
        view.cardContainer.displayCardsForFolder(folder);
      }
    }).open();
  }
  refresh() {
  }
  onClose() {
  }
};

// src/ui/cardContainer/cardContainer.ts
var import_obsidian4 = require("obsidian");

// src/ui/cardContainer/cardMaker.ts
var import_obsidian3 = require("obsidian");

// src/common/utils.ts
function separateFrontmatterAndContent(content) {
  const frontmatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n/;
  const match = content.match(frontmatterRegex);
  return match ? { frontmatter: match[1], cleanContent: content.slice(match[0].length).trim() } : { frontmatter: null, cleanContent: content.trim() };
}
function sortFiles(files, criterion, order) {
  return files.sort((a, b) => {
    let comparison = 0;
    switch (criterion) {
      case "fileName":
        comparison = a.basename.localeCompare(b.basename, void 0, { numeric: true, sensitivity: "base" });
        break;
      case "lastModified":
        comparison = a.stat.mtime - b.stat.mtime;
        break;
      case "created":
        comparison = a.stat.ctime - b.stat.ctime;
        break;
    }
    return order === "asc" ? comparison : -comparison;
  });
}

// src/ui/cardContainer/cardMaker.ts
var CardMaker = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  async getCardsForActiveFile(activeFile) {
    const folder = activeFile.parent;
    if (!folder) {
      return [];
    }
    const files = folder.children.filter((file) => file instanceof import_obsidian3.TFile);
    const sortedFiles = sortFiles(
      files,
      this.plugin.settings.sortCriterion,
      this.plugin.settings.sortOrder
    );
    return await Promise.all(sortedFiles.map((file) => this.createCard(file)));
  }
  async createCard(file) {
    const content = await this.plugin.app.vault.cachedRead(file);
    const { cleanContent } = separateFrontmatterAndContent(content);
    const contentWithoutHeader = this.removeFirstHeader(cleanContent);
    return {
      file,
      fileName: this.plugin.settings.showFileName ? file.basename : void 0,
      firstHeader: this.plugin.settings.showFirstHeader ? this.findFirstHeader(cleanContent) : void 0,
      content: this.plugin.settings.showContent ? this.truncateContent(contentWithoutHeader) : void 0
    };
  }
  removeFirstHeader(content) {
    const headerRegex = /^#+\s+(.+)$/m;
    return content.replace(headerRegex, "").trim();
  }
  findFirstHeader(content) {
    const headerRegex = /^#+\s+(.+)$/m;
    const match = content.match(headerRegex);
    return match ? match[1].trim() : void 0;
  }
  truncateContent(content) {
    const maxLength = this.plugin.settings.contentLength * 100;
    return content.length <= maxLength ? content : content.slice(0, maxLength) + "...";
  }
  createCardElement(card) {
    const cardElement = document.createElement("div");
    cardElement.className = "card-navigator-card";
    if (this.plugin.settings.showFileName && card.fileName) {
      const fileNameEl = cardElement.createEl("h3", { text: card.fileName });
      fileNameEl.className = "card-navigator-filename";
      fileNameEl.style.setProperty("--file-name-font-size", `${this.plugin.settings.fileNameSize}px`);
    }
    if (this.plugin.settings.showFirstHeader && card.firstHeader) {
      const headerEl = cardElement.createEl("h4", { text: card.firstHeader });
      headerEl.className = "card-navigator-first-header";
      headerEl.style.setProperty("--first-header-font-size", `${this.plugin.settings.firstHeaderSize}px`);
    }
    if (this.plugin.settings.showContent && card.content) {
      const contentEl = cardElement.createEl("div", { cls: "card-navigator-content" });
      contentEl.style.setProperty("--content-font-size", `${this.plugin.settings.contentSize}px`);
      if (this.plugin.settings.renderContentAsHtml) {
        import_obsidian3.MarkdownRenderer.render(
          this.plugin.app,
          card.content,
          contentEl,
          card.file.path,
          this.plugin
        );
      } else {
        contentEl.textContent = card.content;
        contentEl.addClass("ellipsis");
      }
    }
    if (this.plugin.app.workspace.getActiveFile() === card.file) {
      cardElement.addClass("card-navigator-active");
    }
    this.addCardInteractions(cardElement, card);
    return cardElement;
  }
  addCardInteractions(cardElement, card) {
    cardElement.addEventListener("click", () => this.openFile(card.file));
    this.setupDragAndDrop(cardElement, card);
    this.setupContextMenu(cardElement, card.file);
  }
  setupDragAndDrop(cardElement, card) {
    cardElement.setAttribute("draggable", "true");
    cardElement.addEventListener("dragstart", (event) => {
      if (event.dataTransfer) {
        let dragContent = "";
        if (this.plugin.settings.dragDropContent) {
          if (this.plugin.settings.showFileName && card.fileName) {
            dragContent += `## ${card.fileName}

`;
          }
          if (this.plugin.settings.showFirstHeader && card.firstHeader) {
            dragContent += `# ${card.firstHeader}

`;
          }
          if (this.plugin.settings.showContent && card.content) {
            dragContent += `${card.content}

`;
          }
          if (dragContent === "") {
            dragContent = `[[${card.file.name}]]`;
          }
        } else {
          dragContent = `[[${card.file.name}]]`;
        }
        event.dataTransfer.setData("text/plain", dragContent.trim());
        event.dataTransfer.setDragImage(cardElement, 0, 0);
      }
    });
  }
  setupContextMenu(cardElement, file) {
    cardElement.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      const menu = new import_obsidian3.Menu();
      this.plugin.app.workspace.trigger("file-menu", menu, file, "more-options");
      menu.showAtPosition({ x: e.clientX, y: e.clientY });
    });
  }
  openFile(file) {
    this.plugin.app.workspace.getLeaf().openFile(file);
  }
};

// src/ui/cardContainer/cardContainer.ts
var CardContainer = class {
  constructor(plugin, leaf) {
    this.containerEl = null;
    this.plugin = plugin;
    this.leaf = leaf;
    this.cardMaker = new CardMaker(this.plugin);
    this.isVertical = false;
    this.toolbarHeight = this.getCSSVariable("--card-navigator-toolbar-height", 50);
    this.cardGap = this.getCSSVariable("--card-navigator-gap", 10);
  }
  getCSSVariable(variableName, defaultValue) {
    const valueStr = getComputedStyle(document.documentElement).getPropertyValue(variableName).trim();
    return parseInt(valueStr) || defaultValue;
  }
  async initialize(containerEl) {
    this.containerEl = containerEl;
    await this.waitForLeafCreation();
    this.registerEvents();
    this.updateContainerStyle();
    this.refresh();
  }
  async waitForLeafCreation() {
    return new Promise((resolve) => {
      const checkLeaf = () => {
        if (this.containerEl && this.containerEl.getBoundingClientRect().width > 0 && this.containerEl.clientHeight > 0) {
          resolve();
        } else {
          requestAnimationFrame(checkLeaf);
        }
      };
      checkLeaf();
    });
  }
  registerEvents() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("active-leaf-change", () => {
        this.plugin.triggerRefresh();
      })
    );
    this.plugin.registerEvent(
      this.plugin.app.vault.on("modify", () => {
        this.plugin.triggerRefresh();
      })
    );
  }
  setOrientation(isVertical) {
    this.isVertical = isVertical;
    this.updateContainerStyle();
    this.refresh();
  }
  updateContainerStyle() {
    if (this.containerEl) {
      this.containerEl.classList.add("card-navigator-container");
      this.containerEl.classList.toggle("vertical", this.isVertical);
      this.containerEl.classList.toggle("horizontal", !this.isVertical);
      this.containerEl.classList.toggle("fixed-height", this.plugin.settings.fixedCardHeight);
      this.containerEl.classList.toggle("flexible-height", !this.plugin.settings.fixedCardHeight);
      this.containerEl.style.setProperty("--cards-per-view", this.plugin.settings.cardsPerView.toString());
      this.containerEl.style.setProperty("--card-navigator-gap", `${this.cardGap}px`);
      this.containerEl.style.setProperty("--card-navigator-toolbar-height", `${this.toolbarHeight}px`);
    }
  }
  async refresh() {
    let folder = null;
    if (this.plugin.settings.useSelectedFolder && this.plugin.settings.selectedFolder) {
      const abstractFile = this.plugin.app.vault.getAbstractFileByPath(this.plugin.settings.selectedFolder);
      if (abstractFile instanceof import_obsidian4.TFolder) {
        folder = abstractFile;
      } else {
        console.warn(`Selected path is not a folder: ${this.plugin.settings.selectedFolder}`);
      }
    } else {
      const activeFile = this.plugin.app.workspace.getActiveFile();
      folder = (activeFile == null ? void 0 : activeFile.parent) || null;
    }
    if (!folder || !this.containerEl) {
      return;
    }
    const files = folder.children.filter((file) => file instanceof import_obsidian4.TFile);
    const sortedFiles = sortFiles(files, this.plugin.settings.sortCriterion, this.plugin.settings.sortOrder);
    const cardsData = await Promise.all(sortedFiles.map((file) => this.cardMaker.createCard(file)));
    this.renderCards(cardsData);
  }
  renderCards(cardsData) {
    const containerEl = this.containerEl;
    if (!containerEl) return;
    const currentScrollTop = containerEl.scrollTop;
    const currentScrollLeft = containerEl.scrollLeft;
    const activeCardIndex = Array.from(containerEl.children).findIndex(
      (child) => child.classList.contains("card-navigator-active")
    );
    while (containerEl.firstChild) {
      containerEl.removeChild(containerEl.firstChild);
    }
    containerEl.classList.toggle("vertical", this.isVertical);
    containerEl.classList.toggle("horizontal", !this.isVertical);
    containerEl.style.setProperty("--cards-per-view", this.plugin.settings.cardsPerView.toString());
    cardsData.forEach((cardData, index) => {
      const card = this.cardMaker.createCardElement(cardData);
      card.classList.add(this.isVertical ? "vertical" : "horizontal");
      card.classList.toggle("fixed-height", this.plugin.settings.fixedCardHeight);
      if (cardData.file === this.plugin.app.workspace.getActiveFile()) {
        card.classList.add("card-navigator-active");
      }
      containerEl.appendChild(card);
    });
    containerEl.scrollTop = currentScrollTop;
    containerEl.scrollLeft = currentScrollLeft;
    const newActiveCardIndex = Array.from(containerEl.children).findIndex(
      (child) => child.classList.contains("card-navigator-active")
    );
    if (activeCardIndex !== newActiveCardIndex && newActiveCardIndex !== -1) {
      this.scrollToActiveCard(false);
    }
  }
  scrollToActiveCard(animate = true) {
    if (!this.containerEl) return;
    const activeCard = this.containerEl.querySelector(".card-navigator-active");
    if (!activeCard) return;
    const containerRect = this.containerEl.getBoundingClientRect();
    const activeCardRect = activeCard.getBoundingClientRect();
    let offset = 0;
    let scrollProperty;
    if (this.isVertical) {
      const containerVisibleHeight = containerRect.height;
      const cardHeight = activeCardRect.height;
      offset = activeCardRect.top - containerRect.top - (containerVisibleHeight - cardHeight) / 2;
      scrollProperty = "scrollTop";
    } else {
      const containerVisibleWidth = containerRect.width;
      const cardWidth = activeCardRect.width;
      offset = activeCardRect.left - containerRect.left - (containerVisibleWidth - cardWidth) / 2;
      scrollProperty = "scrollLeft";
    }
    const newScrollPosition = this.containerEl[scrollProperty] + offset;
    if (animate) {
      const start = this.containerEl[scrollProperty];
      const change = newScrollPosition - start;
      const duration = 300;
      let startTime = null;
      const animateScroll = (currentTime) => {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1);
        const easeProgress = 0.5 - Math.cos(progress * Math.PI) / 2;
        if (this.containerEl) {
          this.containerEl[scrollProperty] = start + change * easeProgress;
        }
        if (timeElapsed < duration && this.containerEl) {
          requestAnimationFrame(animateScroll);
        }
      };
      requestAnimationFrame(animateScroll);
    } else {
      this.containerEl[scrollProperty] = newScrollPosition;
    }
  }
  centerActiveCard() {
    this.scrollToActiveCard(true);
  }
  scrollUp(count = 1) {
    if (!this.containerEl) return;
    if (this.isVertical) {
      const scrollAmount = this.getCardHeight() * count;
      this.containerEl.scrollBy({ top: -scrollAmount, behavior: "smooth" });
    } else {
      const scrollAmount = this.getCardWidth() * count;
      this.containerEl.scrollBy({ left: -scrollAmount, behavior: "smooth" });
    }
  }
  scrollDown(count = 1) {
    if (!this.containerEl) return;
    if (this.isVertical) {
      const scrollAmount = this.getCardHeight() * count;
      this.containerEl.scrollBy({ top: scrollAmount, behavior: "smooth" });
    } else {
      const scrollAmount = this.getCardWidth() * count;
      this.containerEl.scrollBy({ left: scrollAmount, behavior: "smooth" });
    }
  }
  scrollLeft(count = 1) {
    if (!this.containerEl) return;
    const scrollAmount = this.getCardWidth() * count;
    this.containerEl.scrollBy({ left: -scrollAmount, behavior: "smooth" });
  }
  scrollRight(count = 1) {
    if (!this.containerEl) return;
    const scrollAmount = this.getCardWidth() * count;
    this.containerEl.scrollBy({ left: scrollAmount, behavior: "smooth" });
  }
  getCardHeight() {
    if (!this.containerEl) return 0;
    const firstCard = this.containerEl.querySelector(".card-navigator-card");
    return firstCard ? firstCard.clientHeight : 0;
  }
  getCardWidth() {
    if (!this.containerEl) return 0;
    const firstCard = this.containerEl.querySelector(".card-navigator-card");
    return firstCard ? firstCard.clientWidth : 0;
  }
  scrollToCenter() {
    this.scrollToActiveCard();
  }
  displayCards(filteredFiles) {
  }
  async searchCards(searchTerm) {
    const activeFile = this.plugin.app.workspace.getActiveFile();
    if (!activeFile) return;
    const folder = activeFile.parent;
    if (!folder) return;
    const files = folder.children.filter((file) => file instanceof import_obsidian4.TFile);
    const filteredFiles = await this.filterFilesByContent(files, searchTerm);
    const cards = await Promise.all(filteredFiles.map((file) => this.cardMaker.createCard(file)));
    this.renderCards(cards);
  }
  async displayCardsForFolder(folder) {
    const files = folder.children.filter((file) => file instanceof import_obsidian4.TFile);
    const cards = await Promise.all(files.map((file) => this.cardMaker.createCard(file)));
    this.renderCards(cards);
  }
  async filterFilesByContent(files, searchTerm) {
    const lowercaseSearchTerm = searchTerm.toLowerCase();
    const filteredFiles = [];
    for (const file of files) {
      const content = await this.plugin.app.vault.cachedRead(file);
      if (file.basename.toLowerCase().includes(lowercaseSearchTerm) || content.toLowerCase().includes(lowercaseSearchTerm)) {
        filteredFiles.push(file);
      }
    }
    return filteredFiles;
  }
  async sortCards(criterion, order) {
    this.plugin.settings.sortCriterion = criterion;
    this.plugin.settings.sortOrder = order;
    await this.plugin.saveSettings();
    this.plugin.triggerRefresh();
  }
  onClose() {
  }
};

// src/ui/cardNavigator.ts
var VIEW_TYPE_CARD_NAVIGATOR = "card-navigator-view";
var CardNavigator = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.toolbar = new Toolbar(this.plugin);
    this.cardContainer = new CardContainer(this.plugin, this.leaf);
    this.isVertical = this.calculateIsVertical();
    this.resizeObserver = new ResizeObserver(this.handleResize.bind(this));
  }
  getViewType() {
    return VIEW_TYPE_CARD_NAVIGATOR;
  }
  getDisplayText() {
    return "Card Navigator";
  }
  getIcon() {
    return "layers-3";
  }
  calculateIsVertical() {
    const { width, height } = this.leaf.view.containerEl.getBoundingClientRect();
    const isVertical = height > width;
    this.cardContainer.setOrientation(isVertical);
    return isVertical;
  }
  handleResize() {
    const newIsVertical = this.calculateIsVertical();
    if (newIsVertical !== this.isVertical) {
      this.isVertical = newIsVertical;
      this.cardContainer.setOrientation(this.isVertical);
    }
  }
  updateLayoutAndRefresh() {
    this.isVertical = this.calculateIsVertical();
    this.cardContainer.setOrientation(this.isVertical);
    this.toolbar.setOrientation(this.isVertical);
    this.refresh();
  }
  handleKeyDown(event) {
    if (this.containerEl && this.containerEl.contains(document.activeElement)) {
      switch (event.key) {
        case "ArrowUp":
          this.cardContainer.scrollUp();
          event.preventDefault();
          break;
        case "ArrowDown":
          this.cardContainer.scrollDown();
          event.preventDefault();
          break;
        case "ArrowLeft":
          this.cardContainer.scrollLeft();
          event.preventDefault();
          break;
        case "ArrowRight":
          this.cardContainer.scrollRight();
          event.preventDefault();
          break;
        case "PageUp":
          if (this.isVertical) {
            this.cardContainer.scrollUp();
          } else {
            this.cardContainer.scrollLeft();
          }
          event.preventDefault();
          break;
        case "PageDown":
          if (this.isVertical) {
            this.cardContainer.scrollDown();
          } else {
            this.cardContainer.scrollRight();
          }
          event.preventDefault();
          break;
        case "Home":
          this.cardContainer.scrollToCenter();
          event.preventDefault();
          break;
      }
    }
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const toolbarEl = container.createDiv("card-navigator-toolbar");
    const cardContainerEl = container.createDiv("card-navigator-container");
    this.toolbar.initialize(toolbarEl);
    this.cardContainer.initialize(cardContainerEl);
    this.isVertical = this.calculateIsVertical();
    this.updateLayoutAndRefresh();
    this.resizeObserver.observe(this.leaf.view.containerEl);
    this.registerDomEvent(this.containerEl, "keydown", this.handleKeyDown.bind(this));
    this.refresh();
    this.centerActiveCardOnOpen();
  }
  centerActiveCardOnOpen() {
    if (this.plugin.settings.centerActiveCardOnOpen) {
      setTimeout(() => {
        this.cardContainer.centerActiveCard();
      }, 300);
    }
  }
  async onClose() {
    this.resizeObserver.disconnect();
    this.toolbar.onClose();
    this.cardContainer.onClose();
    this.containerEl.removeEventListener("keydown", this.handleKeyDown.bind(this));
  }
  refresh() {
    this.toolbar.refresh();
    this.cardContainer.refresh();
  }
};

// src/ui/settingsTab.ts
var import_obsidian6 = require("obsidian");
var SettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const createSetting = (name, desc, settingKey) => {
      return new import_obsidian6.Setting(containerEl).setName(t(name)).setDesc(t(desc));
    };
    const updateSetting = async (settingKey, value) => {
      this.plugin.settings[settingKey] = value;
      await this.plugin.saveSettings();
      this.plugin.triggerRefresh();
    };
    createSetting(t("Cards per view"), t("Number of cards to display at once"), t("cardsPerView")).addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.cardsPerView).setDynamicTooltip().onChange(async (value) => {
      await updateSetting("cardsPerView", value);
    }));
    createSetting(t("Folder Selection"), t("Choose whether to use the active file's folder or a selected folder"), t("useSelectedFolder")).addDropdown((dropdown) => dropdown.addOption(t("active"), t("Active File's Folder")).addOption(t("selected"), t("Selected Folder")).setValue(this.plugin.settings.useSelectedFolder ? t("selected") : t("active")).onChange(async (value) => {
      await updateSetting("useSelectedFolder", value === t("selected"));
      this.display();
    }));
    if (this.plugin.settings.useSelectedFolder) {
      createSetting(t("Select Folder"), t("Choose a folder for Card Navigator"), t("selectedFolder")).addButton((button) => button.setButtonText(this.plugin.settings.selectedFolder || t("Choose folder")).onClick(() => {
        new FolderSuggestModal(this.plugin, async (folder) => {
          await updateSetting("selectedFolder", folder.path);
          this.display();
        }).open();
      }));
    }
    createSetting(t("Default sort method"), t("Choose the default sorting method for cards"), t("sortCriterion")).addDropdown((dropdown) => {
      dropdown.addOption(t("fileName_asc"), t("File name (A to Z)")).addOption(t("fileName_desc"), t("File name (Z to A)")).addOption(t("lastModified_desc"), t("Last modified (newest first)")).addOption(t("lastModified_asc"), t("Last modified (oldest first)")).addOption(t("created_desc"), t("Created (newest first)")).addOption(t("created_asc"), t("Created (oldest first)")).setValue(`${this.plugin.settings.sortCriterion}_${this.plugin.settings.sortOrder}`).onChange(async (value) => {
        const [criterion, order] = value.split("_");
        await updateSetting("sortCriterion", criterion);
        await updateSetting("sortOrder", order);
      });
    });
    createSetting(t("Fixed Card Height"), t("If enabled, all cards will have the same height. If disabled, card height will adjust to content."), t("fixedCardHeight")).addToggle((toggle) => toggle.setValue(this.plugin.settings.fixedCardHeight).onChange(async (value) => {
      await updateSetting("fixedCardHeight", value);
    }));
    createSetting(t("Render Content as HTML"), t("If enabled, card content will be rendered as HTML"), t("renderContentAsHtml")).addToggle((toggle) => toggle.setValue(this.plugin.settings.renderContentAsHtml).onChange(async (value) => {
      await updateSetting("renderContentAsHtml", value);
    }));
    createSetting(t("Center Active Card on Open"), t("Automatically center the active card when opening the Card Navigator"), t("centerActiveCardOnOpen")).addToggle((toggle) => toggle.setValue(this.plugin.settings.centerActiveCardOnOpen).onChange(async (value) => {
      this.plugin.settings.centerActiveCardOnOpen = value;
      await this.plugin.saveSettings();
    }));
    createSetting(t("Drag and Drop Content"), t("When enabled, dragging a card will insert the note content instead of a link."), t("dragDropContent")).addToggle((toggle) => toggle.setValue(this.plugin.settings.dragDropContent).onChange(async (value) => {
      await updateSetting("dragDropContent", value);
    }));
    containerEl.createEl("h3", { text: t("Display items Settings") });
    const displaySettings = [
      { name: t("Show File Name"), key: "showFileName" },
      { name: t("Show First Header"), key: "showFirstHeader" },
      { name: t("Show Content"), key: "showContent" }
    ];
    displaySettings.forEach(({ name, key }) => {
      createSetting(name, t(`Toggle to display or hide the ${name.toLowerCase()} on cards`), key).addToggle((toggle) => toggle.setValue(this.plugin.settings[key]).onChange(async (value) => {
        await updateSetting(key, value);
      }));
    });
    const fontSizeSettings = [
      { name: t("File Name Size"), key: "fileNameSize", min: 15, max: 25 },
      { name: t("First Header Size"), key: "firstHeaderSize", min: 15, max: 25 },
      { name: t("Content Size"), key: "contentSize", min: 10, max: 20 }
    ];
    fontSizeSettings.forEach(({ name, key, min, max }) => {
      createSetting(name, t(`Set the font size for the ${name.toLowerCase()}`), key).addSlider((slider) => slider.setLimits(min, max, 1).setValue(this.plugin.settings[key]).setDynamicTooltip().onChange(async (value) => {
        await updateSetting(key, value);
      }));
    });
    createSetting(t("Content Length"), t("Maximum content length displayed on each card"), t("contentLength")).addSlider((slider) => slider.setLimits(1, 10, 1).setValue(this.plugin.settings.contentLength).setDynamicTooltip().onChange(async (value) => {
      await updateSetting("contentLength", value);
    }));
    containerEl.createEl("h3", { text: t("Keyboard Shortcuts") });
    const shortcutDesc = containerEl.createEl("p");
    shortcutDesc.setText(t("Card Navigator provides the following default shortcuts. You can customize these in Obsidian's Hotkeys settings:"));
    const shortcutList = containerEl.createEl("ul");
    [
      { name: t("Scroll Up One Card"), hotkey: "Ctrl + Alt/Option + Shift + \u2191" },
      { name: t("Scroll Down One Card"), hotkey: "Ctrl + Alt/Option + Shift + \u2193" },
      { name: t("Scroll Left One Card"), hotkey: "Ctrl + Alt/Option + Shift + \u2190" },
      { name: t("Scroll Right One Card"), hotkey: "Ctrl + Alt/Option + Shift + \u2192" },
      { name: t("Scroll Up One Page"), hotkey: "Ctrl + Alt/Option + Shift + Page Up" },
      { name: t("Scroll Down One Page"), hotkey: "Ctrl + Alt/Option + Shift + Page Down" },
      { name: t("Center Active Card"), hotkey: "Ctrl + Alt/Option + Shift + Home" }
    ].forEach(({ name, hotkey }) => {
      const item = shortcutList.createEl("li");
      item.setText(`${name}: ${hotkey}`);
    });
    const customizeNote = containerEl.createEl("p");
    customizeNote.setText(t('To customize these shortcuts, go to Settings \u2192 Hotkeys and search for "Card Navigator".'));
  }
};

// src/common/settings.ts
var DEFAULT_SETTINGS = {
  cardsPerView: 6,
  useSelectedFolder: false,
  selectedFolder: null,
  sortCriterion: "fileName",
  sortOrder: "asc",
  fixedCardHeight: true,
  renderContentAsHtml: false,
  centerActiveCardOnOpen: true,
  centerCardMethod: "scroll",
  animationDuration: 300,
  centerActiveCardHotkey: { modifiers: ["Ctrl", "Mod"], key: "Home" },
  activeCardBorderColor: "var(--active-border-color)",
  activeCardBackgroundColor: "var(--active-background-color)",
  dragDropContent: false,
  showFileName: true,
  fileNameSize: 20,
  showFirstHeader: true,
  firstHeaderSize: 18,
  showContent: true,
  contentSize: 15,
  contentLength: 5
};

// src/locales/en.json
var en_default = {
  "Cards per view": "Cards per view",
  "Number of cards to display at once": "Number of cards to display at once",
  "Folder Selection": "Folder Selection",
  "Choose whether to use the active file's folder or a selected folder": "Choose whether to use the active file's folder or a selected folder",
  "Active File's Folder": "Active File's Folder",
  "Selected Folder": "Selected Folder",
  "Select Folder": "Select Folder",
  "Choose a folder for Card Navigator": "Choose a folder for Card Navigator",
  "Choose folder": "Choose folder",
  "Default sort method": "Default sort method",
  "Choose the default sorting method for cards": "Choose the default sorting method for cards",
  "File name (A to Z)": "File name (A to Z)",
  "File name (Z to A)": "File name (Z to A)",
  "Last modified (newest first)": "Last modified (newest first)",
  "Last modified (oldest first)": "Last modified (oldest first)",
  "Created (newest first)": "Created (newest first)",
  "Created (oldest first)": "Created (oldest first)",
  "Fixed Card Height": "Fixed Card Height",
  "If enabled, all cards will have the same height. If disabled, card height will adjust to content.": "If enabled, all cards will have the same height. If disabled, card height will adjust to content.",
  "Render Content as HTML": "Render Content as HTML",
  "If enabled, card content will be rendered as HTML": "If enabled, card content will be rendered as HTML",
  "Center Active Card on Open": "Center Active Card on Open",
  "Automatically center the active card when opening the Card Navigator": "Automatically center the active card when opening the Card Navigator",
  "Drag and Drop Content": "Drag and Drop Content",
  "When enabled, dragging a card will insert the note content instead of a link.": "When enabled, dragging a card will insert the note content instead of a link.",
  "Display items Settings": "Display items Settings",
  "Show File Name": "Show File Name",
  "Show First Header": "Show First Header",
  "Show Content": "Show Content",
  "Toggle to display or hide the file name on cards": "Toggle to display or hide the file name on cards",
  "Toggle to display or hide the first header on cards": "Toggle to display or hide the first header on cards",
  "Toggle to display or hide the content on cards": "Toggle to display or hide the content on cards",
  "File Name Size": "File Name Size",
  "First Header Size": "First Header Size",
  "Content Size": "Content Size",
  "Set the font size for the file name": "Set the font size for the file name",
  "Set the font size for the first header": "Set the font size for the first header",
  "Set the font size for the content": "Set the font size for the content",
  "Content Length": "Content Length",
  "Maximum content length displayed on each card": "Maximum content length displayed on each card",
  "Keyboard Shortcuts": "Keyboard Shortcuts",
  "Card Navigator provides the following default shortcuts. You can customize these in Obsidian's Hotkeys settings:": "Card Navigator provides the following default shortcuts. You can customize these in Obsidian's Hotkeys settings:",
  "Scroll Up One Card": "Scroll Up One Card",
  "Scroll Down One Card": "Scroll Down One Card",
  "Scroll Left One Card": "Scroll Left One Card",
  "Scroll Right One Card": "Scroll Right One Card",
  "Scroll Up One Page": "Scroll Up One Page",
  "Scroll Down One Page": "Scroll Down One Page",
  "Center Active Card": "Center Active Card",
  'To customize these shortcuts, go to Settings \u2192 Hotkeys and search for "Card Navigator".': 'To customize these shortcuts, go to Settings \u2192 Hotkeys and search for "Card Navigator".'
};

// src/locales/ko.json
var ko_default = {
  "Cards per view": "\uD654\uBA74\uB2F9 \uCE74\uB4DC \uC218",
  "Number of cards to display at once": "\uD55C \uBC88\uC5D0 \uD45C\uC2DC\uD560 \uCE74\uB4DC \uC218",
  "Folder Selection": "\uD3F4\uB354 \uC120\uD0DD",
  "Choose whether to use the active file's folder or a selected folder": "\uD65C\uC131 \uD30C\uC77C\uC758 \uD3F4\uB354 \uB610\uB294 \uC120\uD0DD\uD55C \uD3F4\uB354 \uC911 \uC0AC\uC6A9\uD560 \uD3F4\uB354 \uC120\uD0DD",
  "Active File's Folder": "\uD65C\uC131 \uD30C\uC77C\uC758 \uD3F4\uB354",
  "Selected Folder": "\uC120\uD0DD\uD55C \uD3F4\uB354",
  "Select Folder": "\uD3F4\uB354 \uC120\uD0DD",
  "Choose a folder for Card Navigator": "Card Navigator\uC6A9 \uD3F4\uB354 \uC120\uD0DD",
  "Choose folder": "\uD3F4\uB354 \uC120\uD0DD",
  "Default sort method": "\uAE30\uBCF8 \uC815\uB82C \uBC29\uC2DD",
  "Choose the default sorting method for cards": "\uCE74\uB4DC\uC758 \uAE30\uBCF8 \uC815\uB82C \uBC29\uC2DD \uC120\uD0DD",
  "File name (A to Z)": "\uD30C\uC77C\uBA85 (\uAC00\uB098\uB2E4\uC21C)",
  "File name (Z to A)": "\uD30C\uC77C\uBA85 (\uC5ED\uAC00\uB098\uB2E4\uC21C)",
  "Last modified (newest first)": "\uCD5C\uC885 \uC218\uC815\uC77C (\uCD5C\uC2E0\uC21C)",
  "Last modified (oldest first)": "\uCD5C\uC885 \uC218\uC815\uC77C (\uC624\uB798\uB41C \uC21C)",
  "Created (newest first)": "\uC0DD\uC131\uC77C (\uCD5C\uC2E0\uC21C)",
  "Created (oldest first)": "\uC0DD\uC131\uC77C (\uC624\uB798\uB41C \uC21C)",
  "Fixed Card Height": "\uACE0\uC815 \uCE74\uB4DC \uB192\uC774",
  "If enabled, all cards will have the same height. If disabled, card height will adjust to content.": "\uD65C\uC131\uD654\uD558\uBA74 \uBAA8\uB4E0 \uCE74\uB4DC\uC758 \uB192\uC774\uAC00 \uB3D9\uC77C\uD569\uB2C8\uB2E4. \uBE44\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC \uB192\uC774\uAC00 \uB0B4\uC6A9\uC5D0 \uB9DE\uAC8C \uC870\uC815\uB429\uB2C8\uB2E4.",
  "Render Content as HTML": "\uB0B4\uC6A9\uC744 HTML\uB85C \uB80C\uB354\uB9C1",
  "If enabled, card content will be rendered as HTML": "\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC \uB0B4\uC6A9\uC774 HTML\uB85C \uB80C\uB354\uB9C1\uB429\uB2C8\uB2E4",
  "Center Active Card on Open": "\uC5F4 \uB54C \uD65C\uC131 \uCE74\uB4DC \uC911\uC559 \uC815\uB82C",
  "Automatically center the active card when opening the Card Navigator": "Card Navigator\uB97C \uC5F4 \uB54C \uD65C\uC131 \uCE74\uB4DC\uB97C \uC790\uB3D9\uC73C\uB85C \uC911\uC559\uC5D0 \uC704\uCE58\uC2DC\uD0B5\uB2C8\uB2E4",
  "Drag and Drop Content": "\uB0B4\uC6A9 \uB4DC\uB798\uADF8 \uC564 \uB4DC\uB86D",
  "When enabled, dragging a card will insert the note content instead of a link.": "\uD65C\uC131\uD654\uD558\uBA74 \uCE74\uB4DC\uB97C \uB4DC\uB798\uADF8\uD560 \uB54C \uB9C1\uD06C \uB300\uC2E0 \uB178\uD2B8 \uB0B4\uC6A9\uC774 \uC0BD\uC785\uB429\uB2C8\uB2E4.",
  "Display items Settings": "\uD45C\uC2DC \uD56D\uBAA9 \uC124\uC815",
  "Show File Name": "\uD30C\uC77C\uBA85 \uD45C\uC2DC",
  "Show First Header": "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uD45C\uC2DC",
  "Show Content": "\uB0B4\uC6A9 \uD45C\uC2DC",
  "Toggle to display or hide the file name on cards": "\uCE74\uB4DC\uC5D0 \uD30C\uC77C\uBA85\uC744 \uD45C\uC2DC\uD558\uAC70\uB098 \uC228\uAE30\uB294 \uD1A0\uAE00",
  "Toggle to display or hide the first header on cards": "\uCE74\uB4DC\uC5D0 \uCCAB \uBC88\uC9F8 \uD5E4\uB354\uB97C \uD45C\uC2DC\uD558\uAC70\uB098 \uC228\uAE30\uB294 \uD1A0\uAE00",
  "Toggle to display or hide the content on cards": "\uCE74\uB4DC\uC5D0 \uB0B4\uC6A9\uC744 \uD45C\uC2DC\uD558\uAC70\uB098 \uC228\uAE30\uB294 \uD1A0\uAE00",
  "File Name Size": "\uD30C\uC77C\uBA85 \uD06C\uAE30",
  "First Header Size": "\uCCAB \uBC88\uC9F8 \uD5E4\uB354 \uD06C\uAE30",
  "Content Size": "\uB0B4\uC6A9 \uD06C\uAE30",
  "Set the font size for the file name": "\uD30C\uC77C\uBA85\uC758 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
  "Set the font size for the first header": "\uCCAB \uBC88\uC9F8 \uD5E4\uB354\uC758 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
  "Set the font size for the content": "\uB0B4\uC6A9\uC758 \uAE00\uAF34 \uD06C\uAE30 \uC124\uC815",
  "Content Length": "\uB0B4\uC6A9 \uAE38\uC774",
  "Maximum content length displayed on each card": "\uAC01 \uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB418\uB294 \uCD5C\uB300 \uB0B4\uC6A9 \uAE38\uC774",
  "Keyboard Shortcuts": "\uD0A4\uBCF4\uB4DC \uB2E8\uCD95\uD0A4",
  "Card Navigator provides the following default shortcuts. You can customize these in Obsidian's Hotkeys settings:": "Card Navigator\uB294 \uB2E4\uC74C\uACFC \uAC19\uC740 \uAE30\uBCF8 \uB2E8\uCD95\uD0A4\uB97C \uC81C\uACF5\uD569\uB2C8\uB2E4. Obsidian\uC758 \uB2E8\uCD95\uD0A4 \uC124\uC815\uC5D0\uC11C \uC774\uB97C \uC0AC\uC6A9\uC790 \uC9C0\uC815\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4:",
  "Scroll Up One Card": "\uCE74\uB4DC \uD55C \uAC1C \uC704\uB85C \uC2A4\uD06C\uB864",
  "Scroll Down One Card": "\uCE74\uB4DC \uD55C \uAC1C \uC544\uB798\uB85C \uC2A4\uD06C\uB864",
  "Scroll Left One Card": "\uCE74\uB4DC \uD55C \uAC1C \uC67C\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
  "Scroll Right One Card": "\uCE74\uB4DC \uD55C \uAC1C \uC624\uB978\uCABD\uC73C\uB85C \uC2A4\uD06C\uB864",
  "Scroll Up One Page": "\uD398\uC774\uC9C0 \uD55C \uAC1C \uC704\uB85C \uC2A4\uD06C\uB864",
  "Scroll Down One Page": "\uD398\uC774\uC9C0 \uD55C \uAC1C \uC544\uB798\uB85C \uC2A4\uD06C\uB864",
  "Center Active Card": "\uD65C\uC131 \uCE74\uB4DC \uC911\uC559 \uC815\uB82C",
  'To customize these shortcuts, go to Settings \u2192 Hotkeys and search for "Card Navigator".': '\uC774 \uB2E8\uCD95\uD0A4\uB97C \uC0AC\uC6A9\uC790 \uC9C0\uC815\uD558\uB824\uBA74 \uC124\uC815 \u2192 \uB2E8\uCD95\uD0A4\uB85C \uC774\uB3D9\uD558\uC5EC "Card Navigator"\uB97C \uAC80\uC0C9\uD558\uC138\uC694.'
};

// src/main.ts
var languageResources = {
  en: { translation: en_default },
  ko: { translation: ko_default }
};
var translationLanguage = Object.keys(languageResources).find((i) => i == import_obsidian7.moment.locale()) ? import_obsidian7.moment.locale() : "en";
var CardNavigatorPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.settings = DEFAULT_SETTINGS;
    this.selectedFolder = null;
    this.refreshDebounced = () => {
    };
  }
  async onload() {
    await this.loadSettings();
    instance.init({
      lng: translationLanguage,
      fallbackLng: "en",
      resources: languageResources
    });
    this.addSettingTab(new SettingTab(this.app, this));
    this.registerView(
      VIEW_TYPE_CARD_NAVIGATOR,
      (leaf) => new CardNavigator(leaf, this)
    );
    this.addRibbonIcon("layers-3", "Activate Card Navigator", () => {
      this.activateView();
    });
    this.addCommand({
      id: "scroll-up-one-card",
      name: t("Scroll Up One Card"),
      callback: () => this.scrollCards("up", 1)
    });
    this.addCommand({
      id: "scroll-down-one-card",
      name: t("Scroll Down One Card"),
      callback: () => this.scrollCards("down", 1)
    });
    this.addCommand({
      id: "scroll-left-one-card",
      name: t("Scroll Left One Card"),
      callback: () => this.scrollCards("left", 1)
    });
    this.addCommand({
      id: "scroll-right-one-card",
      name: t("Scroll Right One Card"),
      callback: () => this.scrollCards("right", 1)
    });
    this.addCommand({
      id: "scroll-up-page",
      name: t("Scroll Up One Page"),
      callback: () => this.scrollCards("up", this.settings.cardsPerView)
    });
    this.addCommand({
      id: "scroll-down-page",
      name: t("Scroll Down One Page"),
      callback: () => this.scrollCards("down", this.settings.cardsPerView)
    });
    this.addCommand({
      id: "center-active-card",
      name: t("Center Active Card"),
      callback: () => {
        const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
        for (const leaf of leaves) {
          if (leaf.view instanceof CardNavigator) {
            leaf.view.cardContainer.centerActiveCard();
          }
        }
      }
    });
    this.app.workspace.onLayoutReady(() => {
      this.activateView();
    });
    this.refreshDebounced = (0, import_obsidian7.debounce)(this.refreshViews.bind(this), 100, true);
  }
  async onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.updateHotkey();
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.refreshDebounced();
    this.updateHotkey();
  }
  updateHotkey() {
    const command = this.app.commands.commands["card-navigator-plugin:center-active-card"];
    if (command) {
      command.hotkeys = this.settings.centerActiveCardHotkey ? [this.settings.centerActiveCardHotkey] : [];
    }
  }
  scrollCards(direction, count) {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    for (const leaf of leaves) {
      if (leaf.view instanceof CardNavigator) {
        const { cardContainer } = leaf.view;
        const isVertical = cardContainer.isVertical;
        switch (direction) {
          case "up":
            isVertical ? cardContainer.scrollUp(count) : cardContainer.scrollLeft(count);
            break;
          case "down":
            isVertical ? cardContainer.scrollDown(count) : cardContainer.scrollRight(count);
            break;
          case "left":
            cardContainer.scrollLeft(count);
            break;
          case "right":
            cardContainer.scrollRight(count);
            break;
        }
      }
    }
  }
  refreshViews() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR);
    leaves.forEach((leaf) => {
      if (leaf.view instanceof CardNavigator) {
        leaf.view.updateLayoutAndRefresh();
      }
    });
  }
  displayFilteredCards(filteredFiles) {
    var _a;
    const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0]) == null ? void 0 : _a.view;
    if (view) {
      view.cardContainer.displayCards(filteredFiles);
    }
  }
  sortCards(criterion, order) {
    var _a;
    const view = (_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0]) == null ? void 0 : _a.view;
    if (view) {
      view.cardContainer.sortCards(criterion, order);
    }
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (rightLeaf) {
        await rightLeaf.setViewState({ type: VIEW_TYPE_CARD_NAVIGATOR, active: true });
        leaf = workspace.getLeavesOfType(VIEW_TYPE_CARD_NAVIGATOR)[0];
      }
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  triggerRefresh() {
    this.refreshDebounced();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3VpL2NhcmROYXZpZ2F0b3IudHMiLCAic3JjL3VpL3Rvb2xiYXIvdG9vbGJhci50cyIsICJzcmMvdWkvdG9vbGJhci90b29sYmFyQWN0aW9ucy50cyIsICJub2RlX21vZHVsZXMvaTE4bmV4dC9kaXN0L2VzbS9pMThuZXh0LmpzIiwgInNyYy91aS9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXIudHMiLCAic3JjL3VpL2NhcmRDb250YWluZXIvY2FyZE1ha2VyLnRzIiwgInNyYy9jb21tb24vdXRpbHMudHMiLCAic3JjL3VpL3NldHRpbmdzVGFiLnRzIiwgInNyYy9jb21tb24vc2V0dGluZ3MudHMiLCAic3JjL2xvY2FsZXMvZW4uanNvbiIsICJzcmMvbG9jYWxlcy9rby5qc29uIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBzcmMvbWFpbi50c1xuXG5pbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBkZWJvdW5jZSwgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvciwgVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SIH0gZnJvbSAnLi91aS9jYXJkTmF2aWdhdG9yJztcbmltcG9ydCB7IFNldHRpbmdUYWIgfSBmcm9tICcuL3VpL3NldHRpbmdzVGFiJztcbmltcG9ydCB7IENhcmROYXZpZ2F0b3JTZXR0aW5ncywgU29ydENyaXRlcmlvbiB9IGZyb20gJy4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL2NvbW1vbi9zZXR0aW5ncyc7XG5pbXBvcnQgaTE4bmV4dCBmcm9tICdpMThuZXh0JztcblxuaW1wb3J0IGVuIGZyb20gJy4vbG9jYWxlcy9lbi5qc29uJ1xuaW1wb3J0IGtvIGZyb20gJy4vbG9jYWxlcy9rby5qc29uJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxuZXhwb3J0IGNvbnN0IGxhbmd1YWdlUmVzb3VyY2VzID0ge1xuXHRlbjogeyB0cmFuc2xhdGlvbjogZW4gfSxcblx0a286IHsgdHJhbnNsYXRpb246IGtvIH0sXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgdHJhbnNsYXRpb25MYW5ndWFnZSA9IE9iamVjdC5rZXlzKGxhbmd1YWdlUmVzb3VyY2VzKS5maW5kKGkgPT4gaT09bW9tZW50LmxvY2FsZSgpKSA/IG1vbWVudC5sb2NhbGUoKSA6IFwiZW5cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZE5hdmlnYXRvclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IENhcmROYXZpZ2F0b3JTZXR0aW5ncyA9IERFRkFVTFRfU0VUVElOR1M7XG4gICAgc2VsZWN0ZWRGb2xkZXI6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHB1YmxpYyBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gICAgcHJpdmF0ZSByZWZyZXNoRGVib3VuY2VkOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHRpMThuZXh0LmluaXQoe1xuXHRcdFx0bG5nOiB0cmFuc2xhdGlvbkxhbmd1YWdlLFxuXHRcdFx0ZmFsbGJhY2tMbmc6IFwiZW5cIixcblx0XHRcdHJlc291cmNlczogbGFuZ3VhZ2VSZXNvdXJjZXMsXG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgICAgIFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUixcbiAgICAgICAgICAgIChsZWFmKSA9PiBuZXcgQ2FyZE5hdmlnYXRvcihsZWFmLCB0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5ZXJzLTMnLCAnQWN0aXZhdGUgQ2FyZCBOYXZpZ2F0b3InLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC11cC1vbmUtY2FyZCcsXG5cdFx0XHRuYW1lOiB0KCdTY3JvbGwgVXAgT25lIENhcmQnKSxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNjcm9sbENhcmRzKCd1cCcsIDEpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC1kb3duLW9uZS1jYXJkJyxcblx0XHRcdG5hbWU6IHQoJ1Njcm9sbCBEb3duIE9uZSBDYXJkJyksXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5zY3JvbGxDYXJkcygnZG93bicsIDEpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC1sZWZ0LW9uZS1jYXJkJyxcblx0XHRcdG5hbWU6IHQoJ1Njcm9sbCBMZWZ0IE9uZSBDYXJkJyksXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5zY3JvbGxDYXJkcygnbGVmdCcsIDEpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC1yaWdodC1vbmUtY2FyZCcsXG5cdFx0XHRuYW1lOiB0KCdTY3JvbGwgUmlnaHQgT25lIENhcmQnKSxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNjcm9sbENhcmRzKCdyaWdodCcsIDEpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC11cC1wYWdlJyxcblx0XHRcdG5hbWU6IHQoJ1Njcm9sbCBVcCBPbmUgUGFnZScpLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuc2Nyb2xsQ2FyZHMoJ3VwJywgdGhpcy5zZXR0aW5ncy5jYXJkc1BlclZpZXcpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Njcm9sbC1kb3duLXBhZ2UnLFxuXHRcdFx0bmFtZTogdCgnU2Nyb2xsIERvd24gT25lIFBhZ2UnKSxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNjcm9sbENhcmRzKCdkb3duJywgdGhpcy5zZXR0aW5ncy5jYXJkc1BlclZpZXcpXG5cdFx0fSk7XG5cdFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NlbnRlci1hY3RpdmUtY2FyZCcsXG5cdFx0XHRuYW1lOiB0KCdDZW50ZXIgQWN0aXZlIENhcmQnKSxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SKTtcblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuXHRcdFx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYXJkTmF2aWdhdG9yKSB7XG5cdFx0XHRcdFx0XHRsZWFmLnZpZXcuY2FyZENvbnRhaW5lci5jZW50ZXJBY3RpdmVDYXJkKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBkZWJvdW5jZWQgcmVmcmVzaCBmdW5jdGlvblxuICAgICAgICB0aGlzLnJlZnJlc2hEZWJvdW5jZWQgPSBkZWJvdW5jZSh0aGlzLnJlZnJlc2hWaWV3cy5iaW5kKHRoaXMpLCAxMDAsIHRydWUpO1xuICAgIH1cblxuICAgIGFzeW5jIG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdFx0dGhpcy51cGRhdGVIb3RrZXkoKTtcblx0fVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnJlZnJlc2hEZWJvdW5jZWQoKTtcblx0XHR0aGlzLnVwZGF0ZUhvdGtleSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlSG90a2V5KCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLmFwcC5jb21tYW5kcy5jb21tYW5kc1snY2FyZC1uYXZpZ2F0b3ItcGx1Z2luOmNlbnRlci1hY3RpdmUtY2FyZCddO1xuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgY29tbWFuZC5ob3RrZXlzID0gdGhpcy5zZXR0aW5ncy5jZW50ZXJBY3RpdmVDYXJkSG90a2V5ID8gW3RoaXMuc2V0dGluZ3MuY2VudGVyQWN0aXZlQ2FyZEhvdGtleV0gOiBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuXHRwcml2YXRlIHNjcm9sbENhcmRzKGRpcmVjdGlvbjogJ3VwJyB8ICdkb3duJyB8ICdsZWZ0JyB8ICdyaWdodCcsIGNvdW50OiBudW1iZXIpIHtcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUik7XG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuXHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhcmROYXZpZ2F0b3IpIHtcblx0XHRcdFx0Y29uc3QgeyBjYXJkQ29udGFpbmVyIH0gPSBsZWFmLnZpZXc7XG5cdFx0XHRcdGNvbnN0IGlzVmVydGljYWwgPSBjYXJkQ29udGFpbmVyLmlzVmVydGljYWw7XG5cdFxuXHRcdFx0XHRzd2l0Y2ggKGRpcmVjdGlvbikge1xuXHRcdFx0XHRcdGNhc2UgJ3VwJzpcblx0XHRcdFx0XHRcdGlzVmVydGljYWwgPyBjYXJkQ29udGFpbmVyLnNjcm9sbFVwKGNvdW50KSA6IGNhcmRDb250YWluZXIuc2Nyb2xsTGVmdChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdkb3duJzpcblx0XHRcdFx0XHRcdGlzVmVydGljYWwgPyBjYXJkQ29udGFpbmVyLnNjcm9sbERvd24oY291bnQpIDogY2FyZENvbnRhaW5lci5zY3JvbGxSaWdodChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdsZWZ0Jzpcblx0XHRcdFx0XHRcdGNhcmRDb250YWluZXIuc2Nyb2xsTGVmdChjb3VudCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdyaWdodCc6XG5cdFx0XHRcdFx0XHRjYXJkQ29udGFpbmVyLnNjcm9sbFJpZ2h0KGNvdW50KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbiAgICByZWZyZXNoVmlld3MoKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SKTtcbiAgICAgICAgbGVhdmVzLmZvckVhY2goKGxlYWYpID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYXJkTmF2aWdhdG9yKSB7XG4gICAgICAgICAgICAgICAgbGVhZi52aWV3LnVwZGF0ZUxheW91dEFuZFJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGlzcGxheUZpbHRlcmVkQ2FyZHMoZmlsdGVyZWRGaWxlczogVEZpbGVbXSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0FSRF9OQVZJR0FUT1IpWzBdPy52aWV3IGFzIENhcmROYXZpZ2F0b3I7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICB2aWV3LmNhcmRDb250YWluZXIuZGlzcGxheUNhcmRzKGZpbHRlcmVkRmlsZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc29ydENhcmRzKGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgb3JkZXI6ICdhc2MnIHwgJ2Rlc2MnKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUilbMF0/LnZpZXcgYXMgQ2FyZE5hdmlnYXRvcjtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHZpZXcuY2FyZENvbnRhaW5lci5zb3J0Q2FyZHMoY3JpdGVyaW9uLCBvcmRlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICAgICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUilbMF07XG5cbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgICBjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SLCBhY3RpdmU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NBUkRfTkFWSUdBVE9SKVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsZWFmKSB7XG4gICAgICAgICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgfVxuICAgIH1cblx0XG4gICAgdHJpZ2dlclJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaERlYm91bmNlZCgpO1xuICAgIH1cbn1cbiIsICIvLyBzcmMvdWkvY2FyZE5hdmlnYXRvci50c1xuXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBUb29sYmFyIH0gZnJvbSAnLi90b29sYmFyL3Rvb2xiYXInO1xuaW1wb3J0IHsgQ2FyZENvbnRhaW5lciB9IGZyb20gJy4vY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUiA9IFwiY2FyZC1uYXZpZ2F0b3Itdmlld1wiO1xuXG5leHBvcnQgY2xhc3MgQ2FyZE5hdmlnYXRvciBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbjtcbiAgICBwdWJsaWMgdG9vbGJhcjogVG9vbGJhcjtcbiAgICBwdWJsaWMgY2FyZENvbnRhaW5lcjogQ2FyZENvbnRhaW5lcjtcbiAgICBwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlcjtcbiAgICBwcml2YXRlIGlzVmVydGljYWw6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcih0aGlzLnBsdWdpbik7XG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lciA9IG5ldyBDYXJkQ29udGFpbmVyKHRoaXMucGx1Z2luLCB0aGlzLmxlYWYpO1xuICAgICAgICB0aGlzLmlzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcih0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DQVJEX05BVklHQVRPUjtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2FyZCBOYXZpZ2F0b3JcIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcImxheWVycy0zXCI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVJc1ZlcnRpY2FsKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMubGVhZi52aWV3LmNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBpc1ZlcnRpY2FsID0gaGVpZ2h0ID4gd2lkdGg7XG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zZXRPcmllbnRhdGlvbihpc1ZlcnRpY2FsKTtcbiAgICAgICAgcmV0dXJuIGlzVmVydGljYWw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVSZXNpemUoKSB7XG4gICAgICAgIGNvbnN0IG5ld0lzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcbiAgICAgICAgaWYgKG5ld0lzVmVydGljYWwgIT09IHRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gbmV3SXNWZXJ0aWNhbDtcbiAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zZXRPcmllbnRhdGlvbih0aGlzLmlzVmVydGljYWwpO1xuICAgICAgICB9XG4gICAgfVxuXG5cdHB1YmxpYyB1cGRhdGVMYXlvdXRBbmRSZWZyZXNoKCkge1xuICAgICAgICB0aGlzLmlzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNldE9yaWVudGF0aW9uKHRoaXMuaXNWZXJ0aWNhbCk7XG4gICAgICAgIHRoaXMudG9vbGJhci5zZXRPcmllbnRhdGlvbih0aGlzLmlzVmVydGljYWwpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNjcm9sbFVwKCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zY3JvbGxEb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zY3JvbGxMZWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRDb250YWluZXIuc2Nyb2xsUmlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUGFnZVVwJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNjcm9sbFVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRDb250YWluZXIuc2Nyb2xsTGVmdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1BhZ2VEb3duJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNjcm9sbERvd24oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zY3JvbGxSaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hvbWUnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcmRDb250YWluZXIuc2Nyb2xsVG9DZW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtbmF2aWdhdG9yLXRvb2xiYXInKTtcbiAgICAgICAgY29uc3QgY2FyZENvbnRhaW5lckVsID0gY29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1uYXZpZ2F0b3ItY29udGFpbmVyJyk7XG5cbiAgICAgICAgdGhpcy50b29sYmFyLmluaXRpYWxpemUodG9vbGJhckVsKTtcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLmluaXRpYWxpemUoY2FyZENvbnRhaW5lckVsKTtcblxuICAgICAgICB0aGlzLmlzVmVydGljYWwgPSB0aGlzLmNhbGN1bGF0ZUlzVmVydGljYWwoKTtcbiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXRBbmRSZWZyZXNoKCk7XG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmxlYWYudmlldy5jb250YWluZXJFbCk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHRoaXMuY29udGFpbmVyRWwsICdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXG5cdFx0dGhpcy5jZW50ZXJBY3RpdmVDYXJkT25PcGVuKCk7XG4gICAgfVxuXG5cdHByaXZhdGUgY2VudGVyQWN0aXZlQ2FyZE9uT3BlbigpIHtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2VudGVyQWN0aXZlQ2FyZE9uT3Blbikge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2FyZENvbnRhaW5lci5jZW50ZXJBY3RpdmVDYXJkKCk7XG5cdFx0XHR9LCAzMDApO1xuXHRcdH1cblx0fVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMudG9vbGJhci5vbkNsb3NlKCk7XG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5vbkNsb3NlKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMudG9vbGJhci5yZWZyZXNoKCk7XG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5yZWZyZXNoKCk7XG4gICAgfVxufVxuIiwgIi8vIHNyYy91aS90b29sYmFyL3Rvb2xiYXIudHNcblxuaW1wb3J0IHsgc2V0SWNvbiwgVEZvbGRlciwgZGVib3VuY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IENhcmROYXZpZ2F0b3IgfSBmcm9tICcuLi9jYXJkTmF2aWdhdG9yJztcbmltcG9ydCB7IEZvbGRlclN1Z2dlc3RNb2RhbCB9IGZyb20gJy4vdG9vbGJhckFjdGlvbnMnO1xuaW1wb3J0IHsgdG9nZ2xlU29ydCwgdG9nZ2xlU2V0dGluZ3MgfSBmcm9tICcuL3Rvb2xiYXJBY3Rpb25zJztcblxuZXhwb3J0IGNsYXNzIFRvb2xiYXIge1xuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgaXNWZXJ0aWNhbDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG4gICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICAgICAgdGhpcy5jcmVhdGVUb29sYmFyKCk7XG4gICAgfVxuXG5cdHNldE9yaWVudGF0aW9uKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCAhPT0gaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVG9vbGJhclN0eWxlKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXHRwcml2YXRlIHVwZGF0ZVRvb2xiYXJTdHlsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmVydGljYWwnLCB0aGlzLmlzVmVydGljYWwpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdob3Jpem9udGFsJywgIXRoaXMuaXNWZXJ0aWNhbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRvb2xiYXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9vbGJhckNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInO1xuXG4gICAgICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IHRoaXMuY3JlYXRlU2VhcmNoQ29udGFpbmVyKCk7XG4gICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoaXMuY3JlYXRlU2VwYXJhdG9yKCk7XG4gICAgICAgIGNvbnN0IGFjdGlvbkljb25zQ29udGFpbmVyID0gdGhpcy5jcmVhdGVBY3Rpb25JY29uc0NvbnRhaW5lcigpO1xuXG4gICAgICAgIHRvb2xiYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VhcmNoQ29udGFpbmVyKTtcbiAgICAgICAgdG9vbGJhckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuICAgICAgICB0b29sYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGFjdGlvbkljb25zQ29udGFpbmVyKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKHRvb2xiYXJDb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU2VhcmNoQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3Itc2VhcmNoLWNvbnRhaW5lcic7XG5cbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9ICdTZWFyY2guLi4nO1xuICAgICAgICBpbnB1dC5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3Itc2VhcmNoLWlucHV0JztcblxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGRlYm91bmNlKGFzeW5jIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FyZC1uYXZpZ2F0b3ItdmlldycpWzBdLnZpZXcgYXMgQ2FyZE5hdmlnYXRvcjtcbiAgICAgICAgICAgIGF3YWl0IHZpZXcuY2FyZENvbnRhaW5lci5zZWFyY2hDYXJkcyhzZWFyY2hUZXJtKTtcbiAgICAgICAgfSwgMzAwKSk7XG5cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUFjdGlvbkljb25zQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItYWN0aW9uLWljb25zLWNvbnRhaW5lcic7XG5cbiAgICAgICAgY29uc3QgaWNvbnMgPSBbXG4gICAgICAgICAgICB7IG5hbWU6ICdmb2xkZXInLCBsYWJlbDogJ1NlbGVjdCBmb2xkZXInLCBhY3Rpb246ICgpID0+IHRoaXMub3BlbkZvbGRlclNlbGVjdG9yKCkgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2Fycm93LXVwLW5hcnJvdy13aWRlJywgbGFiZWw6ICdTb3J0IGNhcmRzJywgYWN0aW9uOiAoKSA9PiB0b2dnbGVTb3J0KHRoaXMucGx1Z2luKSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnc2V0dGluZ3MnLCBsYWJlbDogJ1NldHRpbmdzJywgYWN0aW9uOiAoKSA9PiB0b2dnbGVTZXR0aW5ncyh0aGlzLnBsdWdpbikgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBpY29ucy5mb3JFYWNoKGljb24gPT4ge1xuICAgICAgICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSB0aGlzLmNyZWF0ZVRvb2xiYXJJY29uKGljb24ubmFtZSwgaWNvbi5sYWJlbCwgaWNvbi5hY3Rpb24pO1xuICAgICAgICAgICAgaWYgKGljb24ubmFtZSA9PT0gJ2Fycm93LXVwLW5hcnJvdy13aWRlJykge1xuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0Q3JpdGVyaW9uICE9PSAnZmlsZU5hbWUnIHx8IFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0T3JkZXIgIT09ICdhc2MnXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uRWxlbWVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUb29sYmFySWNvbihpY29uTmFtZTogc3RyaW5nLCBhcmlhTGFiZWw6IHN0cmluZywgYWN0aW9uOiAoZTogTW91c2VFdmVudCkgPT4gdm9pZCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdjbGlja2FibGUtaWNvbic7XG4gICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYXJpYUxhYmVsKTtcblxuICAgICAgICBzZXRJY29uKGljb24sIGljb25OYW1lKTtcbiAgICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXHRcblx0cHJpdmF0ZSBjcmVhdGVTZXBhcmF0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc2VwYXJhdG9yLmNsYXNzTmFtZSA9ICd0b29sYmFyLXNlcGFyYXRvcic7XG4gICAgICAgIHJldHVybiBzZXBhcmF0b3I7XG4gICAgfVxuXG5cdHB1YmxpYyBvcGVuRm9sZGVyU2VsZWN0b3IoKSB7XG5cdFx0bmV3IEZvbGRlclN1Z2dlc3RNb2RhbCh0aGlzLnBsdWdpbiwgKGZvbGRlcjogVEZvbGRlcikgPT4ge1xuXHRcdFx0Y29uc3QgdmlldyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShDYXJkTmF2aWdhdG9yKTtcblx0XHRcdGlmICh2aWV3KSB7XG5cdFx0XHRcdHZpZXcuY2FyZENvbnRhaW5lci5kaXNwbGF5Q2FyZHNGb3JGb2xkZXIoZm9sZGVyKTtcblx0XHRcdH1cblx0XHR9KS5vcGVuKCk7XG5cdH1cblxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIC8vIEltcGxlbWVudCByZWZyZXNoIGxvZ2ljIGlmIG5lY2Vzc2FyeVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIC8vIENsZWFudXAgdG9vbGJhci1yZWxhdGVkIHJlc291cmNlc1xuICAgIH1cbn1cbiIsICIvLyBzcmMvdWkvdG9vbGJhci90b29sYmFyQWN0aW9ucy50c1xuXG5pbXBvcnQgeyBURm9sZGVyLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuaW1wb3J0IHsgU29ydENyaXRlcmlvbiwgQ2FyZE5hdmlnYXRvclNldHRpbmdzIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcbmltcG9ydCB7IHQgfSBmcm9tICdpMThuZXh0JztcblxubGV0IGN1cnJlbnRQb3B1cDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3RNb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGb2xkZXI+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbiwgcHJpdmF0ZSBvblNlbGVjdDogKGZvbGRlcjogVEZvbGRlcikgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB9XG5cbiAgICBnZXRJdGVtcygpOiBURm9sZGVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGb2xkZXIgPT4gZmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpO1xuICAgIH1cblxuICAgIGdldEl0ZW1UZXh0KGZvbGRlcjogVEZvbGRlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBmb2xkZXIucGF0aDtcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oZm9sZGVyOiBURm9sZGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMub25TZWxlY3QoZm9sZGVyKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVTb3J0KHBsdWdpbjogQ2FyZE5hdmlnYXRvclBsdWdpbikge1xuICAgIGNsb3NlQ3VycmVudFBvcHVwKCk7XG4gICAgXG4gICAgbGV0IHNvcnRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci1zb3J0LXBvcHVwJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAoIXNvcnRQb3B1cCkge1xuICAgICAgICBzb3J0UG9wdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc29ydFBvcHVwLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1zb3J0LXBvcHVwJztcblxuICAgICAgICBjb25zdCBjdXJyZW50U29ydCA9IGAke3BsdWdpbi5zZXR0aW5ncy5zb3J0Q3JpdGVyaW9ufV8ke3BsdWdpbi5zZXR0aW5ncy5zb3J0T3JkZXJ9YDtcblxuICAgICAgICBjb25zdCBhZGRTb3J0T3B0aW9uID0gKHZhbHVlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnc29ydC1vcHRpb24nKTtcbiAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBjdXJyZW50U29ydCA9PT0gdmFsdWUpO1xuICAgICAgICAgICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtjcml0ZXJpb24sIG9yZGVyXSA9IHZhbHVlLnNwbGl0KCdfJykgYXMgW1NvcnRDcml0ZXJpb24sICdhc2MnIHwgJ2Rlc2MnXTtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3Muc29ydENyaXRlcmlvbiA9IGNyaXRlcmlvbjtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyID0gb3JkZXI7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIHBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIGNsb3NlQ3VycmVudFBvcHVwKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvcnRQb3B1cC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGFkZFNvcnRPcHRpb24oJ2ZpbGVOYW1lX2FzYycsIHQoJ0ZpbGUgbmFtZSAoQSB0byBaKScpKTtcbiAgICAgICAgYWRkU29ydE9wdGlvbignZmlsZU5hbWVfZGVzYycsIHQoJ0ZpbGUgbmFtZSAoWiB0byBBKScpKTtcbiAgICAgICAgYWRkU29ydE9wdGlvbignbGFzdE1vZGlmaWVkX2Rlc2MnLCB0KCdMYXN0IG1vZGlmaWVkIChuZXdlc3QgZmlyc3QpJykpO1xuICAgICAgICBhZGRTb3J0T3B0aW9uKCdsYXN0TW9kaWZpZWRfYXNjJywgdCgnTGFzdCBtb2RpZmllZCAob2xkZXN0IGZpcnN0KScpKTtcbiAgICAgICAgYWRkU29ydE9wdGlvbignY3JlYXRlZF9kZXNjJywgdCgnQ3JlYXRlZCAobmV3ZXN0IGZpcnN0KScpKTtcbiAgICAgICAgYWRkU29ydE9wdGlvbignY3JlYXRlZF9hc2MnLCB0KCdDcmVhdGVkIChvbGRlc3QgZmlyc3QpJykpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci10b29sYmFyLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAodG9vbGJhckVsKSB7XG4gICAgICAgICAgICB0b29sYmFyRWwuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNvcnRQb3B1cCk7XG4gICAgICAgICAgICBjdXJyZW50UG9wdXAgPSBzb3J0UG9wdXA7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja091dHNpZGUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2xvc2VDdXJyZW50UG9wdXAoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVTZXR0aW5ncyhwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4pIHtcbiAgICBjbG9zZUN1cnJlbnRQb3B1cCgpO1xuICAgIFxuICAgIGxldCBzZXR0aW5nc1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmF2aWdhdG9yLXNldHRpbmdzLXBvcHVwJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAoIXNldHRpbmdzUG9wdXApIHtcbiAgICAgICAgc2V0dGluZ3NQb3B1cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzZXR0aW5nc1BvcHVwLmNsYXNzTmFtZSA9ICdjYXJkLW5hdmlnYXRvci1zZXR0aW5ncy1wb3B1cCc7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlU2V0dGluZyA9IGFzeW5jIDxLIGV4dGVuZHMga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzPihcbiAgICAgICAgICAgIHNldHRpbmdLZXk6IEssXG4gICAgICAgICAgICB2YWx1ZTogQ2FyZE5hdmlnYXRvclNldHRpbmdzW0tdXG4gICAgICAgICkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBwbHVnaW4udHJpZ2dlclJlZnJlc2goKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdUNFNzRcdUI0REMgXHVDMjE4IFx1QzEyNFx1QzgxNVxuICAgICAgICBjb25zdCBjYXJkc1BlclZpZXdDb250YWluZXIgPSBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKCdDYXJkcyBwZXIgdmlldzonKTtcbiAgICAgICAgY29uc3QgY2FyZHNQZXJWaWV3U2V0dGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcudHlwZSA9ICdyYW5nZSc7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcubWluID0gJzEnO1xuICAgICAgICBjYXJkc1BlclZpZXdTZXR0aW5nLm1heCA9ICcxMCc7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcudmFsdWUgPSBwbHVnaW4uc2V0dGluZ3MuY2FyZHNQZXJWaWV3LnRvU3RyaW5nKCk7XG4gICAgICAgIGNhcmRzUGVyVmlld1NldHRpbmcuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUsIDEwKTtcbiAgICAgICAgICAgIHVwZGF0ZVNldHRpbmcoJ2NhcmRzUGVyVmlldycsIHZhbHVlKTtcbiAgICAgICAgICAgIGNhcmRzUGVyVmlld1ZhbHVlLnRleHRDb250ZW50ID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNhcmRzUGVyVmlld1ZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjYXJkc1BlclZpZXdWYWx1ZS50ZXh0Q29udGVudCA9IHBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXcudG9TdHJpbmcoKTtcbiAgICAgICAgY2FyZHNQZXJWaWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGNhcmRzUGVyVmlld1NldHRpbmcpO1xuICAgICAgICBjYXJkc1BlclZpZXdDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZHNQZXJWaWV3VmFsdWUpO1xuICAgICAgICBzZXR0aW5nc1BvcHVwLmFwcGVuZENoaWxkKGNhcmRzUGVyVmlld0NvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gXHVBRTAwXHVDNzkwIFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcbiAgICAgICAgY29uc3QgZm9udFNpemVDb250YWluZXIgPSBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKCdDb250ZW50IFNpemU6Jyk7XG4gICAgICAgIGNvbnN0IGZvbnRTaXplU2V0dGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGZvbnRTaXplU2V0dGluZy50eXBlID0gJ3JhbmdlJztcbiAgICAgICAgZm9udFNpemVTZXR0aW5nLm1pbiA9ICcxMCc7XG4gICAgICAgIGZvbnRTaXplU2V0dGluZy5tYXggPSAnMzAnO1xuICAgICAgICBmb250U2l6ZVNldHRpbmcudmFsdWUgPSBwbHVnaW4uc2V0dGluZ3MuY29udGVudFNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgZm9udFNpemVTZXR0aW5nLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLCAxMCk7XG4gICAgICAgICAgICB1cGRhdGVTZXR0aW5nKCdjb250ZW50U2l6ZScsIHZhbHVlKTtcbiAgICAgICAgICAgIGZvbnRTaXplVmFsdWUudGV4dENvbnRlbnQgPSB2YWx1ZS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZvbnRTaXplVmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGZvbnRTaXplVmFsdWUudGV4dENvbnRlbnQgPSBwbHVnaW4uc2V0dGluZ3MuY29udGVudFNpemUudG9TdHJpbmcoKSArICdweCc7XG4gICAgICAgIGZvbnRTaXplQ29udGFpbmVyLmFwcGVuZENoaWxkKGZvbnRTaXplU2V0dGluZyk7XG4gICAgICAgIGZvbnRTaXplQ29udGFpbmVyLmFwcGVuZENoaWxkKGZvbnRTaXplVmFsdWUpO1xuICAgICAgICBzZXR0aW5nc1BvcHVwLmFwcGVuZENoaWxkKGZvbnRTaXplQ29udGFpbmVyKTtcblxuICAgICAgICAvLyBcdUQxQTBcdUFFMDAgXHVCQzg0XHVEMkJDXHVCNEU0XG4gICAgICAgIGNvbnN0IGNyZWF0ZVRvZ2dsZSA9IChsYWJlbFRleHQ6IHN0cmluZywgc2V0dGluZ0tleToga2V5b2YgQ2FyZE5hdmlnYXRvclNldHRpbmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKGxhYmVsVGV4dCk7XG4gICAgICAgICAgICBjb25zdCB0b2dnbGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0b2dnbGVXcmFwcGVyLmNsYXNzTmFtZSA9ICd0b2dnbGUtd3JhcHBlcic7XG4gICAgICAgICAgICBjb25zdCB0b2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRvZ2dsZS5jbGFzc05hbWUgPSAndG9nZ2xlLWJ1dHRvbic7XG4gICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgcGx1Z2luLnNldHRpbmdzW3NldHRpbmdLZXldIGFzIGJvb2xlYW4pO1xuICAgICAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gIXBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XTtcbiAgICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNldHRpbmcoc2V0dGluZ0tleSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0b2dnbGVXcmFwcGVyLmFwcGVuZENoaWxkKHRvZ2dsZSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9nZ2xlV3JhcHBlcik7XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoY3JlYXRlVG9nZ2xlKHQoJ1Nob3cgRmlsZSBOYW1lJyksICdzaG93RmlsZU5hbWUnKSk7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoY3JlYXRlVG9nZ2xlKHQoJ1Nob3cgRmlyc3QgSGVhZGVyJyksICdzaG93Rmlyc3RIZWFkZXInKSk7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoY3JlYXRlVG9nZ2xlKHQoJ1Nob3cgQ29udGVudCcpLCAnc2hvd0NvbnRlbnQnKSk7XG4gICAgICAgIHNldHRpbmdzUG9wdXAuYXBwZW5kQ2hpbGQoY3JlYXRlVG9nZ2xlKHQoJ0RyYWcgYW5kIERyb3AgQ29udGVudCcpLCAnZHJhZ0Ryb3BDb250ZW50JykpO1xuXG4gICAgICAgIGNvbnN0IHRvb2xiYXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW5hdmlnYXRvci10b29sYmFyLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAodG9vbGJhckVsKSB7XG4gICAgICAgICAgICB0b29sYmFyRWwuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNldHRpbmdzUG9wdXApO1xuICAgICAgICAgICAgY3VycmVudFBvcHVwID0gc2V0dGluZ3NQb3B1cDtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT3V0c2lkZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjbG9zZUN1cnJlbnRQb3B1cCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VDdXJyZW50UG9wdXAoKSB7XG4gICAgaWYgKGN1cnJlbnRQb3B1cCkge1xuICAgICAgICBjdXJyZW50UG9wdXAucmVtb3ZlKCk7XG4gICAgICAgIGN1cnJlbnRQb3B1cCA9IG51bGw7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja091dHNpZGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gb25DbGlja091dHNpZGUoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCB0b29sYmFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItdG9vbGJhci1jb250YWluZXInKTtcbiAgICBpZiAoY3VycmVudFBvcHVwICYmICFjdXJyZW50UG9wdXAuY29udGFpbnMoZXZlbnQudGFyZ2V0IGFzIE5vZGUpICYmICF0b29sYmFyRWw/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgICBjbG9zZUN1cnJlbnRQb3B1cCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU2V0dGluZ0NvbnRhaW5lcihsYWJlbFRleHQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ3NldHRpbmctY29udGFpbmVyJztcbiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgbGFiZWwudGV4dENvbnRlbnQgPSBsYWJlbFRleHQ7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICByZXR1cm4gY29udGFpbmVyO1xufVxuIiwgImNvbnN0IGNvbnNvbGVMb2dnZXIgPSB7XG4gIHR5cGU6ICdsb2dnZXInLFxuICBsb2coYXJncykge1xuICAgIHRoaXMub3V0cHV0KCdsb2cnLCBhcmdzKTtcbiAgfSxcbiAgd2FybihhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ3dhcm4nLCBhcmdzKTtcbiAgfSxcbiAgZXJyb3IoYXJncykge1xuICAgIHRoaXMub3V0cHV0KCdlcnJvcicsIGFyZ3MpO1xuICB9LFxuICBvdXRwdXQodHlwZSwgYXJncykge1xuICAgIGlmIChjb25zb2xlICYmIGNvbnNvbGVbdHlwZV0pIGNvbnNvbGVbdHlwZV0uYXBwbHkoY29uc29sZSwgYXJncyk7XG4gIH1cbn07XG5jbGFzcyBMb2dnZXIge1xuICBjb25zdHJ1Y3Rvcihjb25jcmV0ZUxvZ2dlcikge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICB0aGlzLmluaXQoY29uY3JldGVMb2dnZXIsIG9wdGlvbnMpO1xuICB9XG4gIGluaXQoY29uY3JldGVMb2dnZXIpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5wcmVmaXggPSBvcHRpb25zLnByZWZpeCB8fCAnaTE4bmV4dDonO1xuICAgIHRoaXMubG9nZ2VyID0gY29uY3JldGVMb2dnZXIgfHwgY29uc29sZUxvZ2dlcjtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZGVidWcgPSBvcHRpb25zLmRlYnVnO1xuICB9XG4gIGxvZygpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2xvZycsICcnLCB0cnVlKTtcbiAgfVxuICB3YXJuKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICd3YXJuJywgJycsIHRydWUpO1xuICB9XG4gIGVycm9yKCkge1xuICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICdlcnJvcicsICcnKTtcbiAgfVxuICBkZXByZWNhdGUoKSB7XG4gICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW40KSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ3dhcm4nLCAnV0FSTklORyBERVBSRUNBVEVEOiAnLCB0cnVlKTtcbiAgfVxuICBmb3J3YXJkKGFyZ3MsIGx2bCwgcHJlZml4LCBkZWJ1Z09ubHkpIHtcbiAgICBpZiAoZGVidWdPbmx5ICYmICF0aGlzLmRlYnVnKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSBhcmdzWzBdID0gYCR7cHJlZml4fSR7dGhpcy5wcmVmaXh9ICR7YXJnc1swXX1gO1xuICAgIHJldHVybiB0aGlzLmxvZ2dlcltsdmxdKGFyZ3MpO1xuICB9XG4gIGNyZWF0ZShtb2R1bGVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIHtcbiAgICAgIC4uLntcbiAgICAgICAgcHJlZml4OiBgJHt0aGlzLnByZWZpeH06JHttb2R1bGVOYW1lfTpgXG4gICAgICB9LFxuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfSk7XG4gIH1cbiAgY2xvbmUob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9ucztcbiAgICBvcHRpb25zLnByZWZpeCA9IG9wdGlvbnMucHJlZml4IHx8IHRoaXMucHJlZml4O1xuICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCBvcHRpb25zKTtcbiAgfVxufVxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbmNsYXNzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XG4gIH1cbiAgb24oZXZlbnRzLCBsaXN0ZW5lcikge1xuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XSA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IG51bUxpc3RlbmVycyA9IHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5nZXQobGlzdGVuZXIpIHx8IDA7XG4gICAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uc2V0KGxpc3RlbmVyLCBudW1MaXN0ZW5lcnMgKyAxKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0aGlzLm9ic2VydmVyc1tldmVudF0pIHJldHVybjtcbiAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9ic2VydmVyc1tldmVudF0uZGVsZXRlKGxpc3RlbmVyKTtcbiAgfVxuICBlbWl0KGV2ZW50KSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuICAgIGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbZXZlbnRdLmVudHJpZXMoKSk7XG4gICAgICBjbG9uZWQuZm9yRWFjaChfcmVmID0+IHtcbiAgICAgICAgbGV0IFtvYnNlcnZlciwgbnVtVGltZXNBZGRlZF0gPSBfcmVmO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcbiAgICAgIGNvbnN0IGNsb25lZCA9IEFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbJyonXS5lbnRyaWVzKCkpO1xuICAgICAgY2xvbmVkLmZvckVhY2goX3JlZjIgPT4ge1xuICAgICAgICBsZXQgW29ic2VydmVyLCBudW1UaW1lc0FkZGVkXSA9IF9yZWYyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRpbWVzQWRkZWQ7IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyLmFwcGx5KG9ic2VydmVyLCBbZXZlbnQsIC4uLmFyZ3NdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGRlZmVyID0gKCkgPT4ge1xuICBsZXQgcmVzO1xuICBsZXQgcmVqO1xuICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHJlcyA9IHJlc29sdmU7XG4gICAgcmVqID0gcmVqZWN0O1xuICB9KTtcbiAgcHJvbWlzZS5yZXNvbHZlID0gcmVzO1xuICBwcm9taXNlLnJlamVjdCA9IHJlajtcbiAgcmV0dXJuIHByb21pc2U7XG59O1xuY29uc3QgbWFrZVN0cmluZyA9IG9iamVjdCA9PiB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICcnO1xuICByZXR1cm4gJycgKyBvYmplY3Q7XG59O1xuY29uc3QgY29weSA9IChhLCBzLCB0KSA9PiB7XG4gIGEuZm9yRWFjaChtID0+IHtcbiAgICBpZiAoc1ttXSkgdFttXSA9IHNbbV07XG4gIH0pO1xufTtcbmNvbnN0IGxhc3RPZlBhdGhTZXBhcmF0b3JSZWdFeHAgPSAvIyMjL2c7XG5jb25zdCBjbGVhbktleSA9IGtleSA9PiBrZXkgJiYga2V5LmluZGV4T2YoJyMjIycpID4gLTEgPyBrZXkucmVwbGFjZShsYXN0T2ZQYXRoU2VwYXJhdG9yUmVnRXhwLCAnLicpIDoga2V5O1xuY29uc3QgY2FuTm90VHJhdmVyc2VEZWVwZXIgPSBvYmplY3QgPT4gIW9iamVjdCB8fCB0eXBlb2Ygb2JqZWN0ID09PSAnc3RyaW5nJztcbmNvbnN0IGdldExhc3RPZlBhdGggPSAob2JqZWN0LCBwYXRoLCBFbXB0eSkgPT4ge1xuICBjb25zdCBzdGFjayA9IHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJyA/IHBhdGggOiBwYXRoLnNwbGl0KCcuJyk7XG4gIGxldCBzdGFja0luZGV4ID0gMDtcbiAgd2hpbGUgKHN0YWNrSW5kZXggPCBzdGFjay5sZW5ndGggLSAxKSB7XG4gICAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgICBjb25zdCBrZXkgPSBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSk7XG4gICAgaWYgKCFvYmplY3Rba2V5XSAmJiBFbXB0eSkgb2JqZWN0W2tleV0gPSBuZXcgRW1wdHkoKTtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iamVjdCA9IHt9O1xuICAgIH1cbiAgICArK3N0YWNrSW5kZXg7XG4gIH1cbiAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKG9iamVjdCkpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBvYmo6IG9iamVjdCxcbiAgICBrOiBjbGVhbktleShzdGFja1tzdGFja0luZGV4XSlcbiAgfTtcbn07XG5jb25zdCBzZXRQYXRoID0gKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkIHx8IHBhdGgubGVuZ3RoID09PSAxKSB7XG4gICAgb2JqW2tdID0gbmV3VmFsdWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBlID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICBsZXQgcCA9IHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgbGV0IGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgd2hpbGUgKGxhc3Qub2JqID09PSB1bmRlZmluZWQgJiYgcC5sZW5ndGgpIHtcbiAgICBlID0gYCR7cFtwLmxlbmd0aCAtIDFdfS4ke2V9YDtcbiAgICBwID0gcC5zbGljZSgwLCBwLmxlbmd0aCAtIDEpO1xuICAgIGxhc3QgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcCwgT2JqZWN0KTtcbiAgICBpZiAobGFzdCAmJiBsYXN0Lm9iaiAmJiB0eXBlb2YgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYXN0Lm9iaiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgbGFzdC5vYmpbYCR7bGFzdC5rfS4ke2V9YF0gPSBuZXdWYWx1ZTtcbn07XG5jb25zdCBwdXNoUGF0aCA9IChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlLCBjb25jYXQpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KTtcbiAgb2JqW2tdID0gb2JqW2tdIHx8IFtdO1xuICBvYmpba10ucHVzaChuZXdWYWx1ZSk7XG59O1xuY29uc3QgZ2V0UGF0aCA9IChvYmplY3QsIHBhdGgpID0+IHtcbiAgY29uc3Qge1xuICAgIG9iaixcbiAgICBrXG4gIH0gPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCk7XG4gIGlmICghb2JqKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gb2JqW2tdO1xufTtcbmNvbnN0IGdldFBhdGhXaXRoRGVmYXVsdHMgPSAoZGF0YSwgZGVmYXVsdERhdGEsIGtleSkgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGdldFBhdGgoZGF0YSwga2V5KTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGdldFBhdGgoZGVmYXVsdERhdGEsIGtleSk7XG59O1xuY29uc3QgZGVlcEV4dGVuZCA9ICh0YXJnZXQsIHNvdXJjZSwgb3ZlcndyaXRlKSA9PiB7XG4gIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCAhPT0gJ19fcHJvdG9fXycgJiYgcHJvcCAhPT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgaWYgKHByb3AgaW4gdGFyZ2V0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0W3Byb3BdID09PSAnc3RyaW5nJyB8fCB0YXJnZXRbcHJvcF0gaW5zdGFuY2VvZiBTdHJpbmcgfHwgdHlwZW9mIHNvdXJjZVtwcm9wXSA9PT0gJ3N0cmluZycgfHwgc291cmNlW3Byb3BdIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgaWYgKG92ZXJ3cml0ZSkgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0sIG92ZXJ3cml0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5jb25zdCByZWdleEVzY2FwZSA9IHN0ciA9PiBzdHIucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csICdcXFxcJCYnKTtcbnZhciBfZW50aXR5TWFwID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnLyc6ICcmI3gyRjsnXG59O1xuY29uc3QgZXNjYXBlID0gZGF0YSA9PiB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKC9bJjw+XCInXFwvXS9nLCBzID0+IF9lbnRpdHlNYXBbc10pO1xuICB9XG4gIHJldHVybiBkYXRhO1xufTtcbmNsYXNzIFJlZ0V4cENhY2hlIHtcbiAgY29uc3RydWN0b3IoY2FwYWNpdHkpIHtcbiAgICB0aGlzLmNhcGFjaXR5ID0gY2FwYWNpdHk7XG4gICAgdGhpcy5yZWdFeHBNYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZWdFeHBRdWV1ZSA9IFtdO1xuICB9XG4gIGdldFJlZ0V4cChwYXR0ZXJuKSB7XG4gICAgY29uc3QgcmVnRXhwRnJvbUNhY2hlID0gdGhpcy5yZWdFeHBNYXAuZ2V0KHBhdHRlcm4pO1xuICAgIGlmIChyZWdFeHBGcm9tQ2FjaGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHJlZ0V4cEZyb21DYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcmVnRXhwTmV3ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICBpZiAodGhpcy5yZWdFeHBRdWV1ZS5sZW5ndGggPT09IHRoaXMuY2FwYWNpdHkpIHtcbiAgICAgIHRoaXMucmVnRXhwTWFwLmRlbGV0ZSh0aGlzLnJlZ0V4cFF1ZXVlLnNoaWZ0KCkpO1xuICAgIH1cbiAgICB0aGlzLnJlZ0V4cE1hcC5zZXQocGF0dGVybiwgcmVnRXhwTmV3KTtcbiAgICB0aGlzLnJlZ0V4cFF1ZXVlLnB1c2gocGF0dGVybik7XG4gICAgcmV0dXJuIHJlZ0V4cE5ldztcbiAgfVxufVxuY29uc3QgY2hhcnMgPSBbJyAnLCAnLCcsICc/JywgJyEnLCAnOyddO1xuY29uc3QgbG9va3NMaWtlT2JqZWN0UGF0aFJlZ0V4cENhY2hlID0gbmV3IFJlZ0V4cENhY2hlKDIwKTtcbmNvbnN0IGxvb2tzTGlrZU9iamVjdFBhdGggPSAoa2V5LCBuc1NlcGFyYXRvciwga2V5U2VwYXJhdG9yKSA9PiB7XG4gIG5zU2VwYXJhdG9yID0gbnNTZXBhcmF0b3IgfHwgJyc7XG4gIGtleVNlcGFyYXRvciA9IGtleVNlcGFyYXRvciB8fCAnJztcbiAgY29uc3QgcG9zc2libGVDaGFycyA9IGNoYXJzLmZpbHRlcihjID0+IG5zU2VwYXJhdG9yLmluZGV4T2YoYykgPCAwICYmIGtleVNlcGFyYXRvci5pbmRleE9mKGMpIDwgMCk7XG4gIGlmIChwb3NzaWJsZUNoYXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHIgPSBsb29rc0xpa2VPYmplY3RQYXRoUmVnRXhwQ2FjaGUuZ2V0UmVnRXhwKGAoJHtwb3NzaWJsZUNoYXJzLm1hcChjID0+IGMgPT09ICc/JyA/ICdcXFxcPycgOiBjKS5qb2luKCd8Jyl9KWApO1xuICBsZXQgbWF0Y2hlZCA9ICFyLnRlc3Qoa2V5KTtcbiAgaWYgKCFtYXRjaGVkKSB7XG4gICAgY29uc3Qga2kgPSBrZXkuaW5kZXhPZihrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChraSA+IDAgJiYgIXIudGVzdChrZXkuc3Vic3RyaW5nKDAsIGtpKSkpIHtcbiAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5jb25zdCBkZWVwRmluZCA9IGZ1bmN0aW9uIChvYmosIHBhdGgpIHtcbiAgbGV0IGtleVNlcGFyYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJy4nO1xuICBpZiAoIW9iaikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKG9ialtwYXRoXSkgcmV0dXJuIG9ialtwYXRoXTtcbiAgY29uc3QgdG9rZW5zID0gcGF0aC5zcGxpdChrZXlTZXBhcmF0b3IpO1xuICBsZXQgY3VycmVudCA9IG9iajtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOykge1xuICAgIGlmICghY3VycmVudCB8fCB0eXBlb2YgY3VycmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGxldCBuZXh0O1xuICAgIGxldCBuZXh0UGF0aCA9ICcnO1xuICAgIGZvciAobGV0IGogPSBpOyBqIDwgdG9rZW5zLmxlbmd0aDsgKytqKSB7XG4gICAgICBpZiAoaiAhPT0gaSkge1xuICAgICAgICBuZXh0UGF0aCArPSBrZXlTZXBhcmF0b3I7XG4gICAgICB9XG4gICAgICBuZXh0UGF0aCArPSB0b2tlbnNbal07XG4gICAgICBuZXh0ID0gY3VycmVudFtuZXh0UGF0aF07XG4gICAgICBpZiAobmV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddLmluZGV4T2YodHlwZW9mIG5leHQpID4gLTEgJiYgaiA8IHRva2Vucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaSArPSBqIC0gaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjdXJyZW50ID0gbmV4dDtcbiAgfVxuICByZXR1cm4gY3VycmVudDtcbn07XG5jb25zdCBnZXRDbGVhbmVkQ29kZSA9IGNvZGUgPT4ge1xuICBpZiAoY29kZSAmJiBjb2RlLmluZGV4T2YoJ18nKSA+IDApIHJldHVybiBjb2RlLnJlcGxhY2UoJ18nLCAnLScpO1xuICByZXR1cm4gY29kZTtcbn07XG5cbmNsYXNzIFJlc291cmNlU3RvcmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gICAgICBkZWZhdWx0TlM6ICd0cmFuc2xhdGlvbidcbiAgICB9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5kYXRhID0gZGF0YSB8fCB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPSAnLic7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIGFkZE5hbWVzcGFjZXMobnMpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpIDwgMCkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnB1c2gobnMpO1xuICAgIH1cbiAgfVxuICByZW1vdmVOYW1lc3BhY2VzKG5zKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihucyk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuICBnZXRSZXNvdXJjZShsbmcsIG5zLCBrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCBpZ25vcmVKU09OU3RydWN0dXJlID0gb3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUgOiB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZTtcbiAgICBsZXQgcGF0aDtcbiAgICBpZiAobG5nLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICBwYXRoID0gbG5nLnNwbGl0KCcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGggPSBbbG5nLCBuc107XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgICBwYXRoLnB1c2goLi4ua2V5LnNwbGl0KGtleVNlcGFyYXRvcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKTtcbiAgICBpZiAoIXJlc3VsdCAmJiAhbnMgJiYgIWtleSAmJiBsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIGxuZyA9IHBhdGhbMF07XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgICBrZXkgPSBwYXRoLnNsaWNlKDIpLmpvaW4oJy4nKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCB8fCAhaWdub3JlSlNPTlN0cnVjdHVyZSB8fCB0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gZGVlcEZpbmQodGhpcy5kYXRhICYmIHRoaXMuZGF0YVtsbmddICYmIHRoaXMuZGF0YVtsbmddW25zXSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIGFkZFJlc291cmNlKGxuZywgbnMsIGtleSwgdmFsdWUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDoge1xuICAgICAgc2lsZW50OiBmYWxzZVxuICAgIH07XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBsZXQgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5KSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIHZhbHVlID0gbnM7XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgfVxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHZhbHVlKTtcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywga2V5LCB2YWx1ZSk7XG4gIH1cbiAgYWRkUmVzb3VyY2VzKGxuZywgbnMsIHJlc291cmNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IG0gaW4gcmVzb3VyY2VzKSB7XG4gICAgICBpZiAodHlwZW9mIHJlc291cmNlc1ttXSA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShyZXNvdXJjZXNbbV0pKSB0aGlzLmFkZFJlc291cmNlKGxuZywgbnMsIG0sIHJlc291cmNlc1ttXSwge1xuICAgICAgICBzaWxlbnQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfVxuICBhZGRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zLCByZXNvdXJjZXMsIGRlZXAsIG92ZXJ3cml0ZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiB7XG4gICAgICBzaWxlbnQ6IGZhbHNlLFxuICAgICAgc2tpcENvcHk6IGZhbHNlXG4gICAgfTtcbiAgICBsZXQgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAobG5nLmluZGV4T2YoJy4nKSA+IC0xKSB7XG4gICAgICBwYXRoID0gbG5nLnNwbGl0KCcuJyk7XG4gICAgICBkZWVwID0gcmVzb3VyY2VzO1xuICAgICAgcmVzb3VyY2VzID0gbnM7XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgfVxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG4gICAgbGV0IHBhY2sgPSBnZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCkgfHwge307XG4gICAgaWYgKCFvcHRpb25zLnNraXBDb3B5KSByZXNvdXJjZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc291cmNlcykpO1xuICAgIGlmIChkZWVwKSB7XG4gICAgICBkZWVwRXh0ZW5kKHBhY2ssIHJlc291cmNlcywgb3ZlcndyaXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFjayA9IHtcbiAgICAgICAgLi4ucGFjayxcbiAgICAgICAgLi4ucmVzb3VyY2VzXG4gICAgICB9O1xuICAgIH1cbiAgICBzZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCwgcGFjayk7XG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCkgdGhpcy5lbWl0KCdhZGRlZCcsIGxuZywgbnMsIHJlc291cmNlcyk7XG4gIH1cbiAgcmVtb3ZlUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICBkZWxldGUgdGhpcy5kYXRhW2xuZ11bbnNdO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZU5hbWVzcGFjZXMobnMpO1xuICAgIHRoaXMuZW1pdCgncmVtb3ZlZCcsIGxuZywgbnMpO1xuICB9XG4gIGhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSZXNvdXJjZShsbmcsIG5zKSAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIGdldFJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5kZWZhdWx0TlM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJID09PSAndjEnKSByZXR1cm4ge1xuICAgICAgLi4ue30sXG4gICAgICAuLi50aGlzLmdldFJlc291cmNlKGxuZywgbnMpXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5nZXRSZXNvdXJjZShsbmcsIG5zKTtcbiAgfVxuICBnZXREYXRhQnlMYW5ndWFnZShsbmcpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhW2xuZ107XG4gIH1cbiAgaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zKGxuZykge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGFCeUxhbmd1YWdlKGxuZyk7XG4gICAgY29uc3QgbiA9IGRhdGEgJiYgT2JqZWN0LmtleXMoZGF0YSkgfHwgW107XG4gICAgcmV0dXJuICEhbi5maW5kKHYgPT4gZGF0YVt2XSAmJiBPYmplY3Qua2V5cyhkYXRhW3ZdKS5sZW5ndGggPiAwKTtcbiAgfVxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxufVxuXG52YXIgcG9zdFByb2Nlc3NvciA9IHtcbiAgcHJvY2Vzc29yczoge30sXG4gIGFkZFBvc3RQcm9jZXNzb3IobW9kdWxlKSB7XG4gICAgdGhpcy5wcm9jZXNzb3JzW21vZHVsZS5uYW1lXSA9IG1vZHVsZTtcbiAgfSxcbiAgaGFuZGxlKHByb2Nlc3NvcnMsIHZhbHVlLCBrZXksIG9wdGlvbnMsIHRyYW5zbGF0b3IpIHtcbiAgICBwcm9jZXNzb3JzLmZvckVhY2gocHJvY2Vzc29yID0+IHtcbiAgICAgIGlmICh0aGlzLnByb2Nlc3NvcnNbcHJvY2Vzc29yXSkgdmFsdWUgPSB0aGlzLnByb2Nlc3NvcnNbcHJvY2Vzc29yXS5wcm9jZXNzKHZhbHVlLCBrZXksIG9wdGlvbnMsIHRyYW5zbGF0b3IpO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufTtcblxuY29uc3QgY2hlY2tlZExvYWRlZEZvciA9IHt9O1xuY2xhc3MgVHJhbnNsYXRvciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIHN1cGVyKCk7XG4gICAgY29weShbJ3Jlc291cmNlU3RvcmUnLCAnbGFuZ3VhZ2VVdGlscycsICdwbHVyYWxSZXNvbHZlcicsICdpbnRlcnBvbGF0b3InLCAnYmFja2VuZENvbm5lY3RvcicsICdpMThuRm9ybWF0JywgJ3V0aWxzJ10sIHNlcnZpY2VzLCB0aGlzKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgPSAnLic7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3RyYW5zbGF0b3InKTtcbiAgfVxuICBjaGFuZ2VMYW5ndWFnZShsbmcpIHtcbiAgICBpZiAobG5nKSB0aGlzLmxhbmd1YWdlID0gbG5nO1xuICB9XG4gIGV4aXN0cyhrZXkpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgaW50ZXJwb2xhdGlvbjoge31cbiAgICB9O1xuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmUoa2V5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgZXh0cmFjdEZyb21LZXkoa2V5LCBvcHRpb25zKSB7XG4gICAgbGV0IG5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc1NlcGFyYXRvciA6IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICBpZiAobnNTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkgbnNTZXBhcmF0b3IgPSAnOic7XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBsZXQgbmFtZXNwYWNlcyA9IG9wdGlvbnMubnMgfHwgdGhpcy5vcHRpb25zLmRlZmF1bHROUyB8fCBbXTtcbiAgICBjb25zdCB3b3VsZENoZWNrRm9yTnNJbktleSA9IG5zU2VwYXJhdG9yICYmIGtleS5pbmRleE9mKG5zU2VwYXJhdG9yKSA+IC0xO1xuICAgIGNvbnN0IHNlZW1zTmF0dXJhbExhbmd1YWdlID0gIXRoaXMub3B0aW9ucy51c2VyRGVmaW5lZEtleVNlcGFyYXRvciAmJiAhb3B0aW9ucy5rZXlTZXBhcmF0b3IgJiYgIXRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yICYmICFvcHRpb25zLm5zU2VwYXJhdG9yICYmICFsb29rc0xpa2VPYmplY3RQYXRoKGtleSwgbnNTZXBhcmF0b3IsIGtleVNlcGFyYXRvcik7XG4gICAgaWYgKHdvdWxkQ2hlY2tGb3JOc0luS2V5ICYmICFzZWVtc05hdHVyYWxMYW5ndWFnZSkge1xuICAgICAgY29uc3QgbSA9IGtleS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtcbiAgICAgIGlmIChtICYmIG0ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBuYW1lc3BhY2VzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdChuc1NlcGFyYXRvcik7XG4gICAgICBpZiAobnNTZXBhcmF0b3IgIT09IGtleVNlcGFyYXRvciB8fCBuc1NlcGFyYXRvciA9PT0ga2V5U2VwYXJhdG9yICYmIHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKHBhcnRzWzBdKSA+IC0xKSBuYW1lc3BhY2VzID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIGtleSA9IHBhcnRzLmpvaW4oa2V5U2VwYXJhdG9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJykgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcbiAgICByZXR1cm4ge1xuICAgICAga2V5LFxuICAgICAgbmFtZXNwYWNlc1xuICAgIH07XG4gIH1cbiAgdHJhbnNsYXRlKGtleXMsIG9wdGlvbnMsIGxhc3RLZXkpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnICYmIHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcikge1xuICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSBvcHRpb25zID0ge1xuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgaWYgKGtleXMgPT09IHVuZGVmaW5lZCB8fCBrZXlzID09PSBudWxsKSByZXR1cm4gJyc7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSBrZXlzID0gW1N0cmluZyhrZXlzKV07XG4gICAgY29uc3QgcmV0dXJuRGV0YWlscyA9IG9wdGlvbnMucmV0dXJuRGV0YWlscyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yZXR1cm5EZXRhaWxzIDogdGhpcy5vcHRpb25zLnJldHVybkRldGFpbHM7XG4gICAgY29uc3Qga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5U2VwYXJhdG9yIDogdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtcbiAgICBjb25zdCB7XG4gICAgICBrZXksXG4gICAgICBuYW1lc3BhY2VzXG4gICAgfSA9IHRoaXMuZXh0cmFjdEZyb21LZXkoa2V5c1trZXlzLmxlbmd0aCAtIDFdLCBvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBuYW1lc3BhY2VzW25hbWVzcGFjZXMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgbG5nID0gb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZTtcbiAgICBjb25zdCBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSA9IG9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgfHwgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO1xuICAgIGlmIChsbmcgJiYgbG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSB7XG4gICAgICBpZiAoYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUpIHtcbiAgICAgICAgY29uc3QgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzOiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gLFxuICAgICAgICAgICAgdXNlZEtleToga2V5LFxuICAgICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgICB1c2VkTG5nOiBsbmcsXG4gICAgICAgICAgICB1c2VkTlM6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtuYW1lc3BhY2V9JHtuc1NlcGFyYXRvcn0ke2tleX1gO1xuICAgICAgfVxuICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXM6IGtleSxcbiAgICAgICAgICB1c2VkS2V5OiBrZXksXG4gICAgICAgICAgZXhhY3RVc2VkS2V5OiBrZXksXG4gICAgICAgICAgdXNlZExuZzogbG5nLFxuICAgICAgICAgIHVzZWROUzogbmFtZXNwYWNlLFxuICAgICAgICAgIHVzZWRQYXJhbXM6IHRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHMob3B0aW9ucylcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleXMsIG9wdGlvbnMpO1xuICAgIGxldCByZXMgPSByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXM7XG4gICAgY29uc3QgcmVzVXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLnVzZWRLZXkgfHwga2V5O1xuICAgIGNvbnN0IHJlc0V4YWN0VXNlZEtleSA9IHJlc29sdmVkICYmIHJlc29sdmVkLmV4YWN0VXNlZEtleSB8fCBrZXk7XG4gICAgY29uc3QgcmVzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkocmVzKTtcbiAgICBjb25zdCBub09iamVjdCA9IFsnW29iamVjdCBOdW1iZXJdJywgJ1tvYmplY3QgRnVuY3Rpb25dJywgJ1tvYmplY3QgUmVnRXhwXSddO1xuICAgIGNvbnN0IGpvaW5BcnJheXMgPSBvcHRpb25zLmpvaW5BcnJheXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuam9pbkFycmF5cyA6IHRoaXMub3B0aW9ucy5qb2luQXJyYXlzO1xuICAgIGNvbnN0IGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ID0gIXRoaXMuaTE4bkZvcm1hdCB8fCB0aGlzLmkxOG5Gb3JtYXQuaGFuZGxlQXNPYmplY3Q7XG4gICAgY29uc3QgaGFuZGxlQXNPYmplY3QgPSB0eXBlb2YgcmVzICE9PSAnc3RyaW5nJyAmJiB0eXBlb2YgcmVzICE9PSAnYm9vbGVhbicgJiYgdHlwZW9mIHJlcyAhPT0gJ251bWJlcic7XG4gICAgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIHJlcyAmJiBoYW5kbGVBc09iamVjdCAmJiBub09iamVjdC5pbmRleE9mKHJlc1R5cGUpIDwgMCAmJiAhKHR5cGVvZiBqb2luQXJyYXlzID09PSAnc3RyaW5nJyAmJiBBcnJheS5pc0FycmF5KHJlcykpKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucmV0dXJuT2JqZWN0cyAmJiAhdGhpcy5vcHRpb25zLnJldHVybk9iamVjdHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIud2FybignYWNjZXNzaW5nIGFuIG9iamVjdCAtIGJ1dCByZXR1cm5PYmplY3RzIG9wdGlvbnMgaXMgbm90IGVuYWJsZWQhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIgPyB0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKHJlc1VzZWRLZXksIHJlcywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgfSkgOiBga2V5ICcke2tleX0gKCR7dGhpcy5sYW5ndWFnZX0pJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuYDtcbiAgICAgICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgICAgICByZXNvbHZlZC5yZXMgPSByO1xuICAgICAgICAgIHJlc29sdmVkLnVzZWRQYXJhbXMgPSB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXlTZXBhcmF0b3IpIHtcbiAgICAgICAgY29uc3QgcmVzVHlwZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHJlcyk7XG4gICAgICAgIGNvbnN0IGNvcHkgPSByZXNUeXBlSXNBcnJheSA/IFtdIDoge307XG4gICAgICAgIGNvbnN0IG5ld0tleVRvVXNlID0gcmVzVHlwZUlzQXJyYXkgPyByZXNFeGFjdFVzZWRLZXkgOiByZXNVc2VkS2V5O1xuICAgICAgICBmb3IgKGNvbnN0IG0gaW4gcmVzKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXMsIG0pKSB7XG4gICAgICAgICAgICBjb25zdCBkZWVwS2V5ID0gYCR7bmV3S2V5VG9Vc2V9JHtrZXlTZXBhcmF0b3J9JHttfWA7XG4gICAgICAgICAgICBjb3B5W21dID0gdGhpcy50cmFuc2xhdGUoZGVlcEtleSwge1xuICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgam9pbkFycmF5czogZmFsc2UsXG4gICAgICAgICAgICAgICAgbnM6IG5hbWVzcGFjZXNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29weVttXSA9PT0gZGVlcEtleSkgY29weVttXSA9IHJlc1ttXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzID0gY29weTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhhbmRsZUFzT2JqZWN0SW5JMThuRm9ybWF0ICYmIHR5cGVvZiBqb2luQXJyYXlzID09PSAnc3RyaW5nJyAmJiBBcnJheS5pc0FycmF5KHJlcykpIHtcbiAgICAgIHJlcyA9IHJlcy5qb2luKGpvaW5BcnJheXMpO1xuICAgICAgaWYgKHJlcykgcmVzID0gdGhpcy5leHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleXMsIG9wdGlvbnMsIGxhc3RLZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdXNlZERlZmF1bHQgPSBmYWxzZTtcbiAgICAgIGxldCB1c2VkS2V5ID0gZmFsc2U7XG4gICAgICBjb25zdCBuZWVkc1BsdXJhbEhhbmRsaW5nID0gb3B0aW9ucy5jb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmNvdW50ICE9PSAnc3RyaW5nJztcbiAgICAgIGNvbnN0IGhhc0RlZmF1bHRWYWx1ZSA9IFRyYW5zbGF0b3IuaGFzRGVmYXVsdFZhbHVlKG9wdGlvbnMpO1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlU3VmZml4ID0gbmVlZHNQbHVyYWxIYW5kbGluZyA/IHRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGxuZywgb3B0aW9ucy5jb3VudCwgb3B0aW9ucykgOiAnJztcbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZVN1ZmZpeE9yZGluYWxGYWxsYmFjayA9IG9wdGlvbnMub3JkaW5hbCAmJiBuZWVkc1BsdXJhbEhhbmRsaW5nID8gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgobG5nLCBvcHRpb25zLmNvdW50LCB7XG4gICAgICAgIG9yZGluYWw6IGZhbHNlXG4gICAgICB9KSA6ICcnO1xuICAgICAgY29uc3QgbmVlZHNaZXJvU3VmZml4TG9va3VwID0gbmVlZHNQbHVyYWxIYW5kbGluZyAmJiAhb3B0aW9ucy5vcmRpbmFsICYmIG9wdGlvbnMuY291bnQgPT09IDAgJiYgdGhpcy5wbHVyYWxSZXNvbHZlci5zaG91bGRVc2VJbnRsQXBpKCk7XG4gICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBuZWVkc1plcm9TdWZmaXhMb29rdXAgJiYgb3B0aW9uc1tgZGVmYXVsdFZhbHVlJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gXSB8fCBvcHRpb25zW2BkZWZhdWx0VmFsdWUke2RlZmF1bHRWYWx1ZVN1ZmZpeH1gXSB8fCBvcHRpb25zW2BkZWZhdWx0VmFsdWUke2RlZmF1bHRWYWx1ZVN1ZmZpeE9yZGluYWxGYWxsYmFja31gXSB8fCBvcHRpb25zLmRlZmF1bHRWYWx1ZTtcbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKHJlcykgJiYgaGFzRGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHVzZWREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgcmVzID0gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSkge1xuICAgICAgICB1c2VkS2V5ID0gdHJ1ZTtcbiAgICAgICAgcmVzID0ga2V5O1xuICAgICAgfVxuICAgICAgY29uc3QgbWlzc2luZ0tleU5vVmFsdWVGYWxsYmFja1RvS2V5ID0gb3B0aW9ucy5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXkgfHwgdGhpcy5vcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleTtcbiAgICAgIGNvbnN0IHJlc0Zvck1pc3NpbmcgPSBtaXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXkgJiYgdXNlZEtleSA/IHVuZGVmaW5lZCA6IHJlcztcbiAgICAgIGNvbnN0IHVwZGF0ZU1pc3NpbmcgPSBoYXNEZWZhdWx0VmFsdWUgJiYgZGVmYXVsdFZhbHVlICE9PSByZXMgJiYgdGhpcy5vcHRpb25zLnVwZGF0ZU1pc3Npbmc7XG4gICAgICBpZiAodXNlZEtleSB8fCB1c2VkRGVmYXVsdCB8fCB1cGRhdGVNaXNzaW5nKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyh1cGRhdGVNaXNzaW5nID8gJ3VwZGF0ZUtleScgOiAnbWlzc2luZ0tleScsIGxuZywgbmFtZXNwYWNlLCBrZXksIHVwZGF0ZU1pc3NpbmcgPyBkZWZhdWx0VmFsdWUgOiByZXMpO1xuICAgICAgICBpZiAoa2V5U2VwYXJhdG9yKSB7XG4gICAgICAgICAgY29uc3QgZmsgPSB0aGlzLnJlc29sdmUoa2V5LCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAga2V5U2VwYXJhdG9yOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChmayAmJiBmay5yZXMpIHRoaXMubG9nZ2VyLndhcm4oJ1NlZW1zIHRoZSBsb2FkZWQgdHJhbnNsYXRpb25zIHdlcmUgaW4gZmxhdCBKU09OIGZvcm1hdCBpbnN0ZWFkIG9mIG5lc3RlZC4gRWl0aGVyIHNldCBrZXlTZXBhcmF0b3I6IGZhbHNlIG9uIGluaXQgb3IgbWFrZSBzdXJlIHlvdXIgdHJhbnNsYXRpb25zIGFyZSBwdWJsaXNoZWQgaW4gbmVzdGVkIGZvcm1hdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbG5ncyA9IFtdO1xuICAgICAgICBjb25zdCBmYWxsYmFja0xuZ3MgPSB0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcsIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nVG8gPT09ICdmYWxsYmFjaycgJiYgZmFsbGJhY2tMbmdzICYmIGZhbGxiYWNrTG5nc1swXSkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmFsbGJhY2tMbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsbmdzLnB1c2goZmFsbGJhY2tMbmdzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nVG8gPT09ICdhbGwnKSB7XG4gICAgICAgICAgbG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG5ncy5wdXNoKG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbmQgPSAobCwgaywgc3BlY2lmaWNEZWZhdWx0VmFsdWUpID0+IHtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0Rm9yTWlzc2luZyA9IGhhc0RlZmF1bHRWYWx1ZSAmJiBzcGVjaWZpY0RlZmF1bHRWYWx1ZSAhPT0gcmVzID8gc3BlY2lmaWNEZWZhdWx0VmFsdWUgOiByZXNGb3JNaXNzaW5nO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcihsLCBuYW1lc3BhY2UsIGssIGRlZmF1bHRGb3JNaXNzaW5nLCB1cGRhdGVNaXNzaW5nLCBvcHRpb25zKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYmFja2VuZENvbm5lY3RvciAmJiB0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyhsLCBuYW1lc3BhY2UsIGssIGRlZmF1bHRGb3JNaXNzaW5nLCB1cGRhdGVNaXNzaW5nLCBvcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5lbWl0KCdtaXNzaW5nS2V5JywgbCwgbmFtZXNwYWNlLCBrLCByZXMpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1BsdXJhbHMgJiYgbmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgbG5ncy5mb3JFYWNoKGxhbmd1YWdlID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgc3VmZml4ZXMgPSB0aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeGVzKGxhbmd1YWdlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgaWYgKG5lZWRzWmVyb1N1ZmZpeExvb2t1cCAmJiBvcHRpb25zW2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdICYmIHN1ZmZpeGVzLmluZGV4T2YoYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgc3VmZml4ZXMucHVzaChgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdWZmaXhlcy5mb3JFYWNoKHN1ZmZpeCA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZChbbGFuZ3VhZ2VdLCBrZXkgKyBzdWZmaXgsIG9wdGlvbnNbYGRlZmF1bHRWYWx1ZSR7c3VmZml4fWBdIHx8IGRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbmQobG5ncywga2V5LCBkZWZhdWx0VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzID0gdGhpcy5leHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleXMsIG9wdGlvbnMsIHJlc29sdmVkLCBsYXN0S2V5KTtcbiAgICAgIGlmICh1c2VkS2V5ICYmIHJlcyA9PT0ga2V5ICYmIHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkpIHJlcyA9IGAke25hbWVzcGFjZX06JHtrZXl9YDtcbiAgICAgIGlmICgodXNlZEtleSB8fCB1c2VkRGVmYXVsdCkgJiYgdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnKSB7XG4gICAgICAgICAgcmVzID0gdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIodGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSA/IGAke25hbWVzcGFjZX06JHtrZXl9YCA6IGtleSwgdXNlZERlZmF1bHQgPyByZXMgOiB1bmRlZmluZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcyA9IHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKHJlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJldHVybkRldGFpbHMpIHtcbiAgICAgIHJlc29sdmVkLnJlcyA9IHJlcztcbiAgICAgIHJlc29sdmVkLnVzZWRQYXJhbXMgPSB0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5LCBvcHRpb25zLCByZXNvbHZlZCwgbGFzdEtleSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgaWYgKHRoaXMuaTE4bkZvcm1hdCAmJiB0aGlzLmkxOG5Gb3JtYXQucGFyc2UpIHtcbiAgICAgIHJlcyA9IHRoaXMuaTE4bkZvcm1hdC5wYXJzZShyZXMsIHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyxcbiAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgfSwgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSB8fCByZXNvbHZlZC51c2VkTG5nLCByZXNvbHZlZC51c2VkTlMsIHJlc29sdmVkLnVzZWRLZXksIHtcbiAgICAgICAgcmVzb2x2ZWRcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuc2tpcEludGVycG9sYXRpb24pIHtcbiAgICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLmluaXQoe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAuLi57XG4gICAgICAgICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24sXG4gICAgICAgICAgICAuLi5vcHRpb25zLmludGVycG9sYXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2tpcE9uVmFyaWFibGVzID0gdHlwZW9mIHJlcyA9PT0gJ3N0cmluZycgJiYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMgOiB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpO1xuICAgICAgbGV0IG5lc3RCZWY7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5iID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBuZXN0QmVmID0gbmIgJiYgbmIubGVuZ3RoO1xuICAgICAgfVxuICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgdHlwZW9mIG9wdGlvbnMucmVwbGFjZSAhPT0gJ3N0cmluZycgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIGRhdGEgPSB7XG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsXG4gICAgICAgIC4uLmRhdGFcbiAgICAgIH07XG4gICAgICByZXMgPSB0aGlzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShyZXMsIGRhdGEsIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UgfHwgcmVzb2x2ZWQudXNlZExuZywgb3B0aW9ucyk7XG4gICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IG5hID0gcmVzLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO1xuICAgICAgICBjb25zdCBuZXN0QWZ0ID0gbmEgJiYgbmEubGVuZ3RoO1xuICAgICAgICBpZiAobmVzdEJlZiA8IG5lc3RBZnQpIG9wdGlvbnMubmVzdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFvcHRpb25zLmxuZyAmJiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJyAmJiByZXNvbHZlZCAmJiByZXNvbHZlZC5yZXMpIG9wdGlvbnMubG5nID0gdGhpcy5sYW5ndWFnZSB8fCByZXNvbHZlZC51c2VkTG5nO1xuICAgICAgaWYgKG9wdGlvbnMubmVzdCAhPT0gZmFsc2UpIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLm5lc3QocmVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RLZXkgJiYgbGFzdEtleVswXSA9PT0gYXJnc1swXSAmJiAhb3B0aW9ucy5jb250ZXh0KSB7XG4gICAgICAgICAgX3RoaXMubG9nZ2VyLndhcm4oYEl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICR7YXJnc1swXX0gaW4ga2V5OiAke2tleVswXX1gKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXMudHJhbnNsYXRlKC4uLmFyZ3MsIGtleSk7XG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCk7XG4gICAgfVxuICAgIGNvbnN0IHBvc3RQcm9jZXNzID0gb3B0aW9ucy5wb3N0UHJvY2VzcyB8fCB0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3M7XG4gICAgY29uc3QgcG9zdFByb2Nlc3Nvck5hbWVzID0gdHlwZW9mIHBvc3RQcm9jZXNzID09PSAnc3RyaW5nJyA/IFtwb3N0UHJvY2Vzc10gOiBwb3N0UHJvY2VzcztcbiAgICBpZiAocmVzICE9PSB1bmRlZmluZWQgJiYgcmVzICE9PSBudWxsICYmIHBvc3RQcm9jZXNzb3JOYW1lcyAmJiBwb3N0UHJvY2Vzc29yTmFtZXMubGVuZ3RoICYmIG9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yICE9PSBmYWxzZSkge1xuICAgICAgcmVzID0gcG9zdFByb2Nlc3Nvci5oYW5kbGUocG9zdFByb2Nlc3Nvck5hbWVzLCByZXMsIGtleSwgdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5wb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZCA/IHtcbiAgICAgICAgaTE4blJlc29sdmVkOiB7XG4gICAgICAgICAgLi4ucmVzb2x2ZWQsXG4gICAgICAgICAgdXNlZFBhcmFtczogdGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhvcHRpb25zKVxuICAgICAgICB9LFxuICAgICAgICAuLi5vcHRpb25zXG4gICAgICB9IDogb3B0aW9ucywgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbiAgcmVzb2x2ZShrZXlzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGxldCBmb3VuZDtcbiAgICBsZXQgdXNlZEtleTtcbiAgICBsZXQgZXhhY3RVc2VkS2V5O1xuICAgIGxldCB1c2VkTG5nO1xuICAgIGxldCB1c2VkTlM7XG4gICAgaWYgKHR5cGVvZiBrZXlzID09PSAnc3RyaW5nJykga2V5cyA9IFtrZXlzXTtcbiAgICBrZXlzLmZvckVhY2goayA9PiB7XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgY29uc3QgZXh0cmFjdGVkID0gdGhpcy5leHRyYWN0RnJvbUtleShrLCBvcHRpb25zKTtcbiAgICAgIGNvbnN0IGtleSA9IGV4dHJhY3RlZC5rZXk7XG4gICAgICB1c2VkS2V5ID0ga2V5O1xuICAgICAgbGV0IG5hbWVzcGFjZXMgPSBleHRyYWN0ZWQubmFtZXNwYWNlcztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmFsbGJhY2tOUykgbmFtZXNwYWNlcyA9IG5hbWVzcGFjZXMuY29uY2F0KHRoaXMub3B0aW9ucy5mYWxsYmFja05TKTtcbiAgICAgIGNvbnN0IG5lZWRzUGx1cmFsSGFuZGxpbmcgPSBvcHRpb25zLmNvdW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuY291bnQgIT09ICdzdHJpbmcnO1xuICAgICAgY29uc3QgbmVlZHNaZXJvU3VmZml4TG9va3VwID0gbmVlZHNQbHVyYWxIYW5kbGluZyAmJiAhb3B0aW9ucy5vcmRpbmFsICYmIG9wdGlvbnMuY291bnQgPT09IDAgJiYgdGhpcy5wbHVyYWxSZXNvbHZlci5zaG91bGRVc2VJbnRsQXBpKCk7XG4gICAgICBjb25zdCBuZWVkc0NvbnRleHRIYW5kbGluZyA9IG9wdGlvbnMuY29udGV4dCAhPT0gdW5kZWZpbmVkICYmICh0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnbnVtYmVyJykgJiYgb3B0aW9ucy5jb250ZXh0ICE9PSAnJztcbiAgICAgIGNvbnN0IGNvZGVzID0gb3B0aW9ucy5sbmdzID8gb3B0aW9ucy5sbmdzIDogdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlLCBvcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICAgIHVzZWROUyA9IG5zO1xuICAgICAgICBpZiAoIWNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gJiYgdGhpcy51dGlscyAmJiB0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSAmJiAhdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UodXNlZE5TKSkge1xuICAgICAgICAgIGNoZWNrZWRMb2FkZWRGb3JbYCR7Y29kZXNbMF19LSR7bnN9YF0gPSB0cnVlO1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGtleSBcIiR7dXNlZEtleX1cIiBmb3IgbGFuZ3VhZ2VzIFwiJHtjb2Rlcy5qb2luKCcsICcpfVwiIHdvbid0IGdldCByZXNvbHZlZCBhcyBuYW1lc3BhY2UgXCIke3VzZWROU31cIiB3YXMgbm90IHlldCBsb2FkZWRgLCAnVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuICAgICAgICAgIHVzZWRMbmcgPSBjb2RlO1xuICAgICAgICAgIGNvbnN0IGZpbmFsS2V5cyA9IFtrZXldO1xuICAgICAgICAgIGlmICh0aGlzLmkxOG5Gb3JtYXQgJiYgdGhpcy5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMpIHtcbiAgICAgICAgICAgIHRoaXMuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKGZpbmFsS2V5cywga2V5LCBjb2RlLCBucywgb3B0aW9ucyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwbHVyYWxTdWZmaXg7XG4gICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykgcGx1cmFsU3VmZml4ID0gdGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoY29kZSwgb3B0aW9ucy5jb3VudCwgb3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCB6ZXJvU3VmZml4ID0gYCR7dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcn16ZXJvYDtcbiAgICAgICAgICAgIGNvbnN0IG9yZGluYWxQcmVmaXggPSBgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfW9yZGluYWwke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9YDtcbiAgICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHBsdXJhbFN1ZmZpeCk7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBmaW5hbEtleXMucHVzaChrZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG5lZWRzWmVyb1N1ZmZpeExvb2t1cCkge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGtleSArIHplcm9TdWZmaXgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZHNDb250ZXh0SGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGV4dEtleSA9IGAke2tleX0ke3RoaXMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yfSR7b3B0aW9ucy5jb250ZXh0fWA7XG4gICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkpO1xuICAgICAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9yZGluYWwgJiYgcGx1cmFsU3VmZml4LmluZGV4T2Yob3JkaW5hbFByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyBwbHVyYWxTdWZmaXgucmVwbGFjZShvcmRpbmFsUHJlZml4LCB0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuZWVkc1plcm9TdWZmaXhMb29rdXApIHtcbiAgICAgICAgICAgICAgICAgIGZpbmFsS2V5cy5wdXNoKGNvbnRleHRLZXkgKyB6ZXJvU3VmZml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHBvc3NpYmxlS2V5O1xuICAgICAgICAgIHdoaWxlIChwb3NzaWJsZUtleSA9IGZpbmFsS2V5cy5wb3AoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAoZm91bmQpKSB7XG4gICAgICAgICAgICAgIGV4YWN0VXNlZEtleSA9IHBvc3NpYmxlS2V5O1xuICAgICAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIHBvc3NpYmxlS2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlczogZm91bmQsXG4gICAgICB1c2VkS2V5LFxuICAgICAgZXhhY3RVc2VkS2V5LFxuICAgICAgdXNlZExuZyxcbiAgICAgIHVzZWROU1xuICAgIH07XG4gIH1cbiAgaXNWYWxpZExvb2t1cChyZXMpIHtcbiAgICByZXR1cm4gcmVzICE9PSB1bmRlZmluZWQgJiYgISghdGhpcy5vcHRpb25zLnJldHVybk51bGwgJiYgcmVzID09PSBudWxsKSAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuRW1wdHlTdHJpbmcgJiYgcmVzID09PSAnJyk7XG4gIH1cbiAgZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBpZiAodGhpcy5pMThuRm9ybWF0ICYmIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZSkgcmV0dXJuIHRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZShjb2RlLCBucywga2V5LCBvcHRpb25zKTtcbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICB9XG4gIGdldFVzZWRQYXJhbXNEZXRhaWxzKCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjb25zdCBvcHRpb25zS2V5cyA9IFsnZGVmYXVsdFZhbHVlJywgJ29yZGluYWwnLCAnY29udGV4dCcsICdyZXBsYWNlJywgJ2xuZycsICdsbmdzJywgJ2ZhbGxiYWNrTG5nJywgJ25zJywgJ2tleVNlcGFyYXRvcicsICduc1NlcGFyYXRvcicsICdyZXR1cm5PYmplY3RzJywgJ3JldHVybkRldGFpbHMnLCAnam9pbkFycmF5cycsICdwb3N0UHJvY2VzcycsICdpbnRlcnBvbGF0aW9uJ107XG4gICAgY29uc3QgdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID0gb3B0aW9ucy5yZXBsYWNlICYmIHR5cGVvZiBvcHRpb25zLnJlcGxhY2UgIT09ICdzdHJpbmcnO1xuICAgIGxldCBkYXRhID0gdXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhID8gb3B0aW9ucy5yZXBsYWNlIDogb3B0aW9ucztcbiAgICBpZiAodXNlT3B0aW9uc1JlcGxhY2VGb3JEYXRhICYmIHR5cGVvZiBvcHRpb25zLmNvdW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5jb3VudCA9IG9wdGlvbnMuY291bnQ7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXVzZU9wdGlvbnNSZXBsYWNlRm9yRGF0YSkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgLi4uZGF0YVxuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIG9wdGlvbnNLZXlzKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHN0YXRpYyBoYXNEZWZhdWx0VmFsdWUob3B0aW9ucykge1xuICAgIGNvbnN0IHByZWZpeCA9ICdkZWZhdWx0VmFsdWUnO1xuICAgIGZvciAoY29uc3Qgb3B0aW9uIGluIG9wdGlvbnMpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucywgb3B0aW9uKSAmJiBwcmVmaXggPT09IG9wdGlvbi5zdWJzdHJpbmcoMCwgcHJlZml4Lmxlbmd0aCkgJiYgdW5kZWZpbmVkICE9PSBvcHRpb25zW29wdGlvbl0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5jb25zdCBjYXBpdGFsaXplID0gc3RyaW5nID0+IHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbmNsYXNzIExhbmd1YWdlVXRpbCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuc3VwcG9ydGVkTG5ncyA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzIHx8IGZhbHNlO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2xhbmd1YWdlVXRpbHMnKTtcbiAgfVxuICBnZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGNvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlKTtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIGlmIChwLmxlbmd0aCA9PT0gMikgcmV0dXJuIG51bGw7XG4gICAgcC5wb3AoKTtcbiAgICBpZiAocFtwLmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JykgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHAuam9pbignLScpKTtcbiAgfVxuICBnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgY29kZSA9IGdldENsZWFuZWRDb2RlKGNvZGUpO1xuICAgIGlmICghY29kZSB8fCBjb2RlLmluZGV4T2YoJy0nKSA8IDApIHJldHVybiBjb2RlO1xuICAgIGNvbnN0IHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHBbMF0pO1xuICB9XG4gIGZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJyAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICBjb25zdCBzcGVjaWFsQ2FzZXMgPSBbJ2hhbnMnLCAnaGFudCcsICdsYXRuJywgJ2N5cmwnLCAnY2FucycsICdtb25nJywgJ2FyYWInXTtcbiAgICAgIGxldCBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcpIHtcbiAgICAgICAgcCA9IHAubWFwKHBhcnQgPT4gcGFydC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMV0ubGVuZ3RoID09PSAyKSBwWzFdID0gcFsxXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICBpZiAocFswXSAhPT0gJ3NnbicgJiYgcFsyXS5sZW5ndGggPT09IDIpIHBbMl0gPSBwWzJdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzJdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMl0gPSBjYXBpdGFsaXplKHBbMl0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcC5qb2luKCctJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xlYW5Db2RlIHx8IHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcgPyBjb2RlLnRvTG93ZXJDYXNlKCkgOiBjb2RlO1xuICB9XG4gIGlzU3VwcG9ydGVkQ29kZShjb2RlKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkID09PSAnbGFuZ3VhZ2VPbmx5JyB8fCB0aGlzLm9wdGlvbnMubm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzKSB7XG4gICAgICBjb2RlID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuICF0aGlzLnN1cHBvcnRlZExuZ3MgfHwgIXRoaXMuc3VwcG9ydGVkTG5ncy5sZW5ndGggfHwgdGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoY29kZSkgPiAtMTtcbiAgfVxuICBnZXRCZXN0TWF0Y2hGcm9tQ29kZXMoY29kZXMpIHtcbiAgICBpZiAoIWNvZGVzKSByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm91bmQ7XG4gICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgY29uc3QgY2xlYW5lZExuZyA9IHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyB8fCB0aGlzLmlzU3VwcG9ydGVkQ29kZShjbGVhbmVkTG5nKSkgZm91bmQgPSBjbGVhbmVkTG5nO1xuICAgIH0pO1xuICAgIGlmICghZm91bmQgJiYgdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MpIHtcbiAgICAgIGNvZGVzLmZvckVhY2goY29kZSA9PiB7XG4gICAgICAgIGlmIChmb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBsbmdPbmx5ID0gdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGxuZ09ubHkpKSByZXR1cm4gZm91bmQgPSBsbmdPbmx5O1xuICAgICAgICBmb3VuZCA9IHRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmZpbmQoc3VwcG9ydGVkTG5nID0+IHtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nID09PSBsbmdPbmx5KSByZXR1cm4gc3VwcG9ydGVkTG5nO1xuICAgICAgICAgIGlmIChzdXBwb3J0ZWRMbmcuaW5kZXhPZignLScpIDwgMCAmJiBsbmdPbmx5LmluZGV4T2YoJy0nKSA8IDApIHJldHVybjtcbiAgICAgICAgICBpZiAoc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSA+IDAgJiYgbG5nT25seS5pbmRleE9mKCctJykgPCAwICYmIHN1cHBvcnRlZExuZy5zdWJzdHJpbmcoMCwgc3VwcG9ydGVkTG5nLmluZGV4T2YoJy0nKSkgPT09IGxuZ09ubHkpIHJldHVybiBzdXBwb3J0ZWRMbmc7XG4gICAgICAgICAgaWYgKHN1cHBvcnRlZExuZy5pbmRleE9mKGxuZ09ubHkpID09PSAwICYmIGxuZ09ubHkubGVuZ3RoID4gMSkgcmV0dXJuIHN1cHBvcnRlZExuZztcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXTtcbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cbiAgZ2V0RmFsbGJhY2tDb2RlcyhmYWxsYmFja3MsIGNvZGUpIHtcbiAgICBpZiAoIWZhbGxiYWNrcykgcmV0dXJuIFtdO1xuICAgIGlmICh0eXBlb2YgZmFsbGJhY2tzID09PSAnZnVuY3Rpb24nKSBmYWxsYmFja3MgPSBmYWxsYmFja3MoY29kZSk7XG4gICAgaWYgKHR5cGVvZiBmYWxsYmFja3MgPT09ICdzdHJpbmcnKSBmYWxsYmFja3MgPSBbZmFsbGJhY2tzXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYWxsYmFja3MpKSByZXR1cm4gZmFsbGJhY2tzO1xuICAgIGlmICghY29kZSkgcmV0dXJuIGZhbGxiYWNrcy5kZWZhdWx0IHx8IFtdO1xuICAgIGxldCBmb3VuZCA9IGZhbGxiYWNrc1tjb2RlXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzLmRlZmF1bHQ7XG4gICAgcmV0dXJuIGZvdW5kIHx8IFtdO1xuICB9XG4gIHRvUmVzb2x2ZUhpZXJhcmNoeShjb2RlLCBmYWxsYmFja0NvZGUpIHtcbiAgICBjb25zdCBmYWxsYmFja0NvZGVzID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKGZhbGxiYWNrQ29kZSB8fCB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgfHwgW10sIGNvZGUpO1xuICAgIGNvbnN0IGNvZGVzID0gW107XG4gICAgY29uc3QgYWRkQ29kZSA9IGMgPT4ge1xuICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5pc1N1cHBvcnRlZENvZGUoYykpIHtcbiAgICAgICAgY29kZXMucHVzaChjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYHJlamVjdGluZyBsYW5ndWFnZSBjb2RlIG5vdCBmb3VuZCBpbiBzdXBwb3J0ZWRMbmdzOiAke2N9YCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnICYmIChjb2RlLmluZGV4T2YoJy0nKSA+IC0xIHx8IGNvZGUuaW5kZXhPZignXycpID4gLTEpKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdsYW5ndWFnZU9ubHknKSBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScgJiYgdGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnY3VycmVudE9ubHknKSBhZGRDb2RlKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICB9XG4gICAgZmFsbGJhY2tDb2Rlcy5mb3JFYWNoKGZjID0+IHtcbiAgICAgIGlmIChjb2Rlcy5pbmRleE9mKGZjKSA8IDApIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZmMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29kZXM7XG4gIH1cbn1cblxubGV0IHNldHMgPSBbe1xuICBsbmdzOiBbJ2FjaCcsICdhaycsICdhbScsICdhcm4nLCAnYnInLCAnZmlsJywgJ2d1bicsICdsbicsICdtZmUnLCAnbWcnLCAnbWknLCAnb2MnLCAncHQnLCAncHQtQlInLCAndGcnLCAndGwnLCAndGknLCAndHInLCAndXonLCAnd2EnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDFcbn0sIHtcbiAgbG5nczogWydhZicsICdhbicsICdhc3QnLCAnYXonLCAnYmcnLCAnYm4nLCAnY2EnLCAnZGEnLCAnZGUnLCAnZGV2JywgJ2VsJywgJ2VuJywgJ2VvJywgJ2VzJywgJ2V0JywgJ2V1JywgJ2ZpJywgJ2ZvJywgJ2Z1cicsICdmeScsICdnbCcsICdndScsICdoYScsICdoaScsICdodScsICdoeScsICdpYScsICdpdCcsICdraycsICdrbicsICdrdScsICdsYicsICdtYWknLCAnbWwnLCAnbW4nLCAnbXInLCAnbmFoJywgJ25hcCcsICduYicsICduZScsICdubCcsICdubicsICdubycsICduc28nLCAncGEnLCAncGFwJywgJ3BtcycsICdwcycsICdwdC1QVCcsICdybScsICdzY28nLCAnc2UnLCAnc2knLCAnc28nLCAnc29uJywgJ3NxJywgJ3N2JywgJ3N3JywgJ3RhJywgJ3RlJywgJ3RrJywgJ3VyJywgJ3lvJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsnYXknLCAnYm8nLCAnY2dnJywgJ2ZhJywgJ2h0JywgJ2lkJywgJ2phJywgJ2pibycsICdrYScsICdrbScsICdrbycsICdreScsICdsbycsICdtcycsICdzYWgnLCAnc3UnLCAndGgnLCAndHQnLCAndWcnLCAndmknLCAnd28nLCAnemgnXSxcbiAgbnI6IFsxXSxcbiAgZmM6IDNcbn0sIHtcbiAgbG5nczogWydiZScsICdicycsICdjbnInLCAnZHonLCAnaHInLCAncnUnLCAnc3InLCAndWsnXSxcbiAgbnI6IFsxLCAyLCA1XSxcbiAgZmM6IDRcbn0sIHtcbiAgbG5nczogWydhciddLFxuICBucjogWzAsIDEsIDIsIDMsIDExLCAxMDBdLFxuICBmYzogNVxufSwge1xuICBsbmdzOiBbJ2NzJywgJ3NrJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA2XG59LCB7XG4gIGxuZ3M6IFsnY3NiJywgJ3BsJ10sXG4gIG5yOiBbMSwgMiwgNV0sXG4gIGZjOiA3XG59LCB7XG4gIGxuZ3M6IFsnY3knXSxcbiAgbnI6IFsxLCAyLCAzLCA4XSxcbiAgZmM6IDhcbn0sIHtcbiAgbG5nczogWydmciddLFxuICBucjogWzEsIDJdLFxuICBmYzogOVxufSwge1xuICBsbmdzOiBbJ2dhJ10sXG4gIG5yOiBbMSwgMiwgMywgNywgMTFdLFxuICBmYzogMTBcbn0sIHtcbiAgbG5nczogWydnZCddLFxuICBucjogWzEsIDIsIDMsIDIwXSxcbiAgZmM6IDExXG59LCB7XG4gIGxuZ3M6IFsnaXMnXSxcbiAgbnI6IFsxLCAyXSxcbiAgZmM6IDEyXG59LCB7XG4gIGxuZ3M6IFsnanYnXSxcbiAgbnI6IFswLCAxXSxcbiAgZmM6IDEzXG59LCB7XG4gIGxuZ3M6IFsna3cnXSxcbiAgbnI6IFsxLCAyLCAzLCA0XSxcbiAgZmM6IDE0XG59LCB7XG4gIGxuZ3M6IFsnbHQnXSxcbiAgbnI6IFsxLCAyLCAxMF0sXG4gIGZjOiAxNVxufSwge1xuICBsbmdzOiBbJ2x2J10sXG4gIG5yOiBbMSwgMiwgMF0sXG4gIGZjOiAxNlxufSwge1xuICBsbmdzOiBbJ21rJ10sXG4gIG5yOiBbMSwgMl0sXG4gIGZjOiAxN1xufSwge1xuICBsbmdzOiBbJ21uayddLFxuICBucjogWzAsIDEsIDJdLFxuICBmYzogMThcbn0sIHtcbiAgbG5nczogWydtdCddLFxuICBucjogWzEsIDIsIDExLCAyMF0sXG4gIGZjOiAxOVxufSwge1xuICBsbmdzOiBbJ29yJ10sXG4gIG5yOiBbMiwgMV0sXG4gIGZjOiAyXG59LCB7XG4gIGxuZ3M6IFsncm8nXSxcbiAgbnI6IFsxLCAyLCAyMF0sXG4gIGZjOiAyMFxufSwge1xuICBsbmdzOiBbJ3NsJ10sXG4gIG5yOiBbNSwgMSwgMiwgM10sXG4gIGZjOiAyMVxufSwge1xuICBsbmdzOiBbJ2hlJywgJ2l3J10sXG4gIG5yOiBbMSwgMiwgMjAsIDIxXSxcbiAgZmM6IDIyXG59XTtcbmxldCBfcnVsZXNQbHVyYWxzVHlwZXMgPSB7XG4gIDE6IG4gPT4gTnVtYmVyKG4gPiAxKSxcbiAgMjogbiA9PiBOdW1iZXIobiAhPSAxKSxcbiAgMzogbiA9PiAwLFxuICA0OiBuID0+IE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMiksXG4gIDU6IG4gPT4gTnVtYmVyKG4gPT0gMCA/IDAgOiBuID09IDEgPyAxIDogbiA9PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNSksXG4gIDY6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID49IDIgJiYgbiA8PSA0ID8gMSA6IDIpLFxuICA3OiBuID0+IE51bWJlcihuID09IDEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKSxcbiAgODogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuICE9IDggJiYgbiAhPSAxMSA/IDIgOiAzKSxcbiAgOTogbiA9PiBOdW1iZXIobiA+PSAyKSxcbiAgMTA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA8IDcgPyAyIDogbiA8IDExID8gMyA6IDQpLFxuICAxMTogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gPT0gMTEgPyAwIDogbiA9PSAyIHx8IG4gPT0gMTIgPyAxIDogbiA+IDIgJiYgbiA8IDIwID8gMiA6IDMpLFxuICAxMjogbiA9PiBOdW1iZXIobiAlIDEwICE9IDEgfHwgbiAlIDEwMCA9PSAxMSksXG4gIDEzOiBuID0+IE51bWJlcihuICE9PSAwKSxcbiAgMTQ6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA9PSAzID8gMiA6IDMpLFxuICAxNTogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpLFxuICAxNjogbiA9PiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICE9PSAwID8gMSA6IDIpLFxuICAxNzogbiA9PiBOdW1iZXIobiA9PSAxIHx8IG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogMSksXG4gIDE4OiBuID0+IE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IDIpLFxuICAxOTogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMCB8fCBuICUgMTAwID4gMSAmJiBuICUgMTAwIDwgMTEgPyAxIDogbiAlIDEwMCA+IDEwICYmIG4gJSAxMDAgPCAyMCA/IDIgOiAzKSxcbiAgMjA6IG4gPT4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDAgfHwgbiAlIDEwMCA+IDAgJiYgbiAlIDEwMCA8IDIwID8gMSA6IDIpLFxuICAyMTogbiA9PiBOdW1iZXIobiAlIDEwMCA9PSAxID8gMSA6IG4gJSAxMDAgPT0gMiA/IDIgOiBuICUgMTAwID09IDMgfHwgbiAlIDEwMCA9PSA0ID8gMyA6IDApLFxuICAyMjogbiA9PiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiAobiA8IDAgfHwgbiA+IDEwKSAmJiBuICUgMTAgPT0gMCA/IDIgOiAzKVxufTtcbmNvbnN0IG5vbkludGxWZXJzaW9ucyA9IFsndjEnLCAndjInLCAndjMnXTtcbmNvbnN0IGludGxWZXJzaW9ucyA9IFsndjQnXTtcbmNvbnN0IHN1ZmZpeGVzT3JkZXIgPSB7XG4gIHplcm86IDAsXG4gIG9uZTogMSxcbiAgdHdvOiAyLFxuICBmZXc6IDMsXG4gIG1hbnk6IDQsXG4gIG90aGVyOiA1XG59O1xuY29uc3QgY3JlYXRlUnVsZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHJ1bGVzID0ge307XG4gIHNldHMuZm9yRWFjaChzZXQgPT4ge1xuICAgIHNldC5sbmdzLmZvckVhY2gobCA9PiB7XG4gICAgICBydWxlc1tsXSA9IHtcbiAgICAgICAgbnVtYmVyczogc2V0Lm5yLFxuICAgICAgICBwbHVyYWxzOiBfcnVsZXNQbHVyYWxzVHlwZXNbc2V0LmZjXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBydWxlcztcbn07XG5jbGFzcyBQbHVyYWxSZXNvbHZlciB7XG4gIGNvbnN0cnVjdG9yKGxhbmd1YWdlVXRpbHMpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgdGhpcy5sYW5ndWFnZVV0aWxzID0gbGFuZ3VhZ2VVdGlscztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3BsdXJhbFJlc29sdmVyJyk7XG4gICAgaWYgKCghdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OIHx8IGludGxWZXJzaW9ucy5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pKSAmJiAodHlwZW9mIEludGwgPT09ICd1bmRlZmluZWQnIHx8ICFJbnRsLlBsdXJhbFJ1bGVzKSkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID0gJ3YzJztcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdZb3VyIGVudmlyb25tZW50IHNlZW1zIG5vdCB0byBiZSBJbnRsIEFQSSBjb21wYXRpYmxlLCB1c2UgYW4gSW50bC5QbHVyYWxSdWxlcyBwb2x5ZmlsbC4gV2lsbCBmYWxsYmFjayB0byB0aGUgY29tcGF0aWJpbGl0eUpTT04gdjMgZm9ybWF0IGhhbmRsaW5nLicpO1xuICAgIH1cbiAgICB0aGlzLnJ1bGVzID0gY3JlYXRlUnVsZXMoKTtcbiAgICB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUgPSB7fTtcbiAgfVxuICBhZGRSdWxlKGxuZywgb2JqKSB7XG4gICAgdGhpcy5ydWxlc1tsbmddID0gb2JqO1xuICB9XG4gIGNsZWFyQ2FjaGUoKSB7XG4gICAgdGhpcy5wbHVyYWxSdWxlc0NhY2hlID0ge307XG4gIH1cbiAgZ2V0UnVsZShjb2RlKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2xlYW5lZENvZGUgPSBnZXRDbGVhbmVkQ29kZShjb2RlID09PSAnZGV2JyA/ICdlbicgOiBjb2RlKTtcbiAgICAgICAgY29uc3QgdHlwZSA9IG9wdGlvbnMub3JkaW5hbCA/ICdvcmRpbmFsJyA6ICdjYXJkaW5hbCc7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNsZWFuZWRDb2RlLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjYWNoZUtleSBpbiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wbHVyYWxSdWxlc0NhY2hlW2NhY2hlS2V5XTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydWxlID0gbmV3IEludGwuUGx1cmFsUnVsZXMoY2xlYW5lZENvZGUsIHtcbiAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbY2FjaGVLZXldID0gcnVsZTtcbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ydWxlc1tjb2RlXSB8fCB0aGlzLnJ1bGVzW3RoaXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKV07XG4gIH1cbiAgbmVlZHNQbHVyYWwoY29kZSkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBjb25zdCBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgIGlmICh0aGlzLnNob3VsZFVzZUludGxBcGkoKSkge1xuICAgICAgcmV0dXJuIHJ1bGUgJiYgcnVsZS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLmxlbmd0aCA+IDE7XG4gICAgfVxuICAgIHJldHVybiBydWxlICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPiAxO1xuICB9XG4gIGdldFBsdXJhbEZvcm1zT2ZLZXkoY29kZSwga2V5KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIHJldHVybiB0aGlzLmdldFN1ZmZpeGVzKGNvZGUsIG9wdGlvbnMpLm1hcChzdWZmaXggPT4gYCR7a2V5fSR7c3VmZml4fWApO1xuICB9XG4gIGdldFN1ZmZpeGVzKGNvZGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY29uc3QgcnVsZSA9IHRoaXMuZ2V0UnVsZShjb2RlLCBvcHRpb25zKTtcbiAgICBpZiAoIXJ1bGUpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKSB7XG4gICAgICByZXR1cm4gcnVsZS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLnNvcnQoKHBsdXJhbENhdGVnb3J5MSwgcGx1cmFsQ2F0ZWdvcnkyKSA9PiBzdWZmaXhlc09yZGVyW3BsdXJhbENhdGVnb3J5MV0gLSBzdWZmaXhlc09yZGVyW3BsdXJhbENhdGVnb3J5Ml0pLm1hcChwbHVyYWxDYXRlZ29yeSA9PiBgJHt0aGlzLm9wdGlvbnMucHJlcGVuZH0ke29wdGlvbnMub3JkaW5hbCA/IGBvcmRpbmFsJHt0aGlzLm9wdGlvbnMucHJlcGVuZH1gIDogJyd9JHtwbHVyYWxDYXRlZ29yeX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bGUubnVtYmVycy5tYXAobnVtYmVyID0+IHRoaXMuZ2V0U3VmZml4KGNvZGUsIG51bWJlciwgb3B0aW9ucykpO1xuICB9XG4gIGdldFN1ZmZpeChjb2RlLCBjb3VudCkge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICBjb25zdCBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUsIG9wdGlvbnMpO1xuICAgIGlmIChydWxlKSB7XG4gICAgICBpZiAodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMub3B0aW9ucy5wcmVwZW5kfSR7b3B0aW9ucy5vcmRpbmFsID8gYG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWAgOiAnJ30ke3J1bGUuc2VsZWN0KGNvdW50KX1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlKHJ1bGUsIGNvdW50KTtcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIud2Fybihgbm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAke2NvZGV9YCk7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShydWxlLCBjb3VudCkge1xuICAgIGNvbnN0IGlkeCA9IHJ1bGUubm9BYnMgPyBydWxlLnBsdXJhbHMoY291bnQpIDogcnVsZS5wbHVyYWxzKE1hdGguYWJzKGNvdW50KSk7XG4gICAgbGV0IHN1ZmZpeCA9IHJ1bGUubnVtYmVyc1tpZHhdO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXggJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgIGlmIChzdWZmaXggPT09IDIpIHtcbiAgICAgICAgc3VmZml4ID0gJ3BsdXJhbCc7XG4gICAgICB9IGVsc2UgaWYgKHN1ZmZpeCA9PT0gMSkge1xuICAgICAgICBzdWZmaXggPSAnJztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmV0dXJuU3VmZml4ID0gKCkgPT4gdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgc3VmZml4LnRvU3RyaW5nKCkgPyB0aGlzLm9wdGlvbnMucHJlcGVuZCArIHN1ZmZpeC50b1N0cmluZygpIDogc3VmZml4LnRvU3RyaW5nKCk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9PT0gJ3YxJykge1xuICAgICAgaWYgKHN1ZmZpeCA9PT0gMSkgcmV0dXJuICcnO1xuICAgICAgaWYgKHR5cGVvZiBzdWZmaXggPT09ICdudW1iZXInKSByZXR1cm4gYF9wbHVyYWxfJHtzdWZmaXgudG9TdHJpbmcoKX1gO1xuICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjInKSB7XG4gICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXggJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgIHJldHVybiByZXR1cm5TdWZmaXgoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wcmVwZW5kICYmIGlkeC50b1N0cmluZygpID8gdGhpcy5vcHRpb25zLnByZXBlbmQgKyBpZHgudG9TdHJpbmcoKSA6IGlkeC50b1N0cmluZygpO1xuICB9XG4gIHNob3VsZFVzZUludGxBcGkoKSB7XG4gICAgcmV0dXJuICFub25JbnRsVmVyc2lvbnMuaW5jbHVkZXModGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OKTtcbiAgfVxufVxuXG5jb25zdCBkZWVwRmluZFdpdGhEZWZhdWx0cyA9IGZ1bmN0aW9uIChkYXRhLCBkZWZhdWx0RGF0YSwga2V5KSB7XG4gIGxldCBrZXlTZXBhcmF0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6ICcuJztcbiAgbGV0IGlnbm9yZUpTT05TdHJ1Y3R1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHRydWU7XG4gIGxldCBwYXRoID0gZ2V0UGF0aFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwga2V5KTtcbiAgaWYgKCFwYXRoICYmIGlnbm9yZUpTT05TdHJ1Y3R1cmUgJiYgdHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXRoID0gZGVlcEZpbmQoZGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICAgIGlmIChwYXRoID09PSB1bmRlZmluZWQpIHBhdGggPSBkZWVwRmluZChkZWZhdWx0RGF0YSwga2V5LCBrZXlTZXBhcmF0b3IpO1xuICB9XG4gIHJldHVybiBwYXRoO1xufTtcbmNvbnN0IHJlZ2V4U2FmZSA9IHZhbCA9PiB2YWwucmVwbGFjZSgvXFwkL2csICckJCQkJyk7XG5jbGFzcyBJbnRlcnBvbGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnaW50ZXJwb2xhdG9yJyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8ICh2YWx1ZSA9PiB2YWx1ZSk7XG4gICAgdGhpcy5pbml0KG9wdGlvbnMpO1xuICB9XG4gIGluaXQoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGlmICghb3B0aW9ucy5pbnRlcnBvbGF0aW9uKSBvcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgICBlc2NhcGVWYWx1ZTogdHJ1ZVxuICAgIH07XG4gICAgY29uc3Qge1xuICAgICAgZXNjYXBlOiBlc2NhcGUkMSxcbiAgICAgIGVzY2FwZVZhbHVlLFxuICAgICAgdXNlUmF3VmFsdWVUb0VzY2FwZSxcbiAgICAgIHByZWZpeCxcbiAgICAgIHByZWZpeEVzY2FwZWQsXG4gICAgICBzdWZmaXgsXG4gICAgICBzdWZmaXhFc2NhcGVkLFxuICAgICAgZm9ybWF0U2VwYXJhdG9yLFxuICAgICAgdW5lc2NhcGVTdWZmaXgsXG4gICAgICB1bmVzY2FwZVByZWZpeCxcbiAgICAgIG5lc3RpbmdQcmVmaXgsXG4gICAgICBuZXN0aW5nUHJlZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdTdWZmaXgsXG4gICAgICBuZXN0aW5nU3VmZml4RXNjYXBlZCxcbiAgICAgIG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yLFxuICAgICAgbWF4UmVwbGFjZXMsXG4gICAgICBhbHdheXNGb3JtYXRcbiAgICB9ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uO1xuICAgIHRoaXMuZXNjYXBlID0gZXNjYXBlJDEgIT09IHVuZGVmaW5lZCA/IGVzY2FwZSQxIDogZXNjYXBlO1xuICAgIHRoaXMuZXNjYXBlVmFsdWUgPSBlc2NhcGVWYWx1ZSAhPT0gdW5kZWZpbmVkID8gZXNjYXBlVmFsdWUgOiB0cnVlO1xuICAgIHRoaXMudXNlUmF3VmFsdWVUb0VzY2FwZSA9IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgIT09IHVuZGVmaW5lZCA/IHVzZVJhd1ZhbHVlVG9Fc2NhcGUgOiBmYWxzZTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCA/IHJlZ2V4RXNjYXBlKHByZWZpeCkgOiBwcmVmaXhFc2NhcGVkIHx8ICd7eyc7XG4gICAgdGhpcy5zdWZmaXggPSBzdWZmaXggPyByZWdleEVzY2FwZShzdWZmaXgpIDogc3VmZml4RXNjYXBlZCB8fCAnfX0nO1xuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLnVuZXNjYXBlUHJlZml4ID0gdW5lc2NhcGVTdWZmaXggPyAnJyA6IHVuZXNjYXBlUHJlZml4IHx8ICctJztcbiAgICB0aGlzLnVuZXNjYXBlU3VmZml4ID0gdGhpcy51bmVzY2FwZVByZWZpeCA/ICcnIDogdW5lc2NhcGVTdWZmaXggfHwgJyc7XG4gICAgdGhpcy5uZXN0aW5nUHJlZml4ID0gbmVzdGluZ1ByZWZpeCA/IHJlZ2V4RXNjYXBlKG5lc3RpbmdQcmVmaXgpIDogbmVzdGluZ1ByZWZpeEVzY2FwZWQgfHwgcmVnZXhFc2NhcGUoJyR0KCcpO1xuICAgIHRoaXMubmVzdGluZ1N1ZmZpeCA9IG5lc3RpbmdTdWZmaXggPyByZWdleEVzY2FwZShuZXN0aW5nU3VmZml4KSA6IG5lc3RpbmdTdWZmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCcpJyk7XG4gICAgdGhpcy5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvciA9IG5lc3RpbmdPcHRpb25zU2VwYXJhdG9yIHx8ICcsJztcbiAgICB0aGlzLm1heFJlcGxhY2VzID0gbWF4UmVwbGFjZXMgfHwgMTAwMDtcbiAgICB0aGlzLmFsd2F5c0Zvcm1hdCA9IGFsd2F5c0Zvcm1hdCAhPT0gdW5kZWZpbmVkID8gYWx3YXlzRm9ybWF0IDogZmFsc2U7XG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuICB9XG4gIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMuaW5pdCh0aGlzLm9wdGlvbnMpO1xuICB9XG4gIHJlc2V0UmVnRXhwKCkge1xuICAgIGNvbnN0IGdldE9yUmVzZXRSZWdFeHAgPSAoZXhpc3RpbmdSZWdFeHAsIHBhdHRlcm4pID0+IHtcbiAgICAgIGlmIChleGlzdGluZ1JlZ0V4cCAmJiBleGlzdGluZ1JlZ0V4cC5zb3VyY2UgPT09IHBhdHRlcm4pIHtcbiAgICAgICAgZXhpc3RpbmdSZWdFeHAubGFzdEluZGV4ID0gMDtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVnRXhwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgJ2cnKTtcbiAgICB9O1xuICAgIHRoaXMucmVnZXhwID0gZ2V0T3JSZXNldFJlZ0V4cCh0aGlzLnJlZ2V4cCwgYCR7dGhpcy5wcmVmaXh9KC4rPykke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMucmVnZXhwVW5lc2NhcGUgPSBnZXRPclJlc2V0UmVnRXhwKHRoaXMucmVnZXhwVW5lc2NhcGUsIGAke3RoaXMucHJlZml4fSR7dGhpcy51bmVzY2FwZVByZWZpeH0oLis/KSR7dGhpcy51bmVzY2FwZVN1ZmZpeH0ke3RoaXMuc3VmZml4fWApO1xuICAgIHRoaXMubmVzdGluZ1JlZ2V4cCA9IGdldE9yUmVzZXRSZWdFeHAodGhpcy5uZXN0aW5nUmVnZXhwLCBgJHt0aGlzLm5lc3RpbmdQcmVmaXh9KC4rPykke3RoaXMubmVzdGluZ1N1ZmZpeH1gKTtcbiAgfVxuICBpbnRlcnBvbGF0ZShzdHIsIGRhdGEsIGxuZywgb3B0aW9ucykge1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IHJlcGxhY2VzO1xuICAgIGNvbnN0IGRlZmF1bHREYXRhID0gdGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMgfHwge307XG4gICAgY29uc3QgaGFuZGxlRm9ybWF0ID0ga2V5ID0+IHtcbiAgICAgIGlmIChrZXkuaW5kZXhPZih0aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBkZWVwRmluZFdpdGhEZWZhdWx0cyhkYXRhLCBkZWZhdWx0RGF0YSwga2V5LCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmFsd2F5c0Zvcm1hdCA/IHRoaXMuZm9ybWF0KHBhdGgsIHVuZGVmaW5lZCwgbG5nLCB7XG4gICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgIGludGVycG9sYXRpb25rZXk6IGtleVxuICAgICAgICB9KSA6IHBhdGg7XG4gICAgICB9XG4gICAgICBjb25zdCBwID0ga2V5LnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKTtcbiAgICAgIGNvbnN0IGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgY29uc3QgZiA9IHAuam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZXBGaW5kV2l0aERlZmF1bHRzKGRhdGEsIGRlZmF1bHREYXRhLCBrLCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLCB0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSksIGYsIGxuZywge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBpbnRlcnBvbGF0aW9ua2V5OiBrXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgICBjb25zdCBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIgPSBvcHRpb25zICYmIG9wdGlvbnMubWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyIHx8IHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI7XG4gICAgY29uc3Qgc2tpcE9uVmFyaWFibGVzID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyA6IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcztcbiAgICBjb25zdCB0b2RvcyA9IFt7XG4gICAgICByZWdleDogdGhpcy5yZWdleHBVbmVzY2FwZSxcbiAgICAgIHNhZmVWYWx1ZTogdmFsID0+IHJlZ2V4U2FmZSh2YWwpXG4gICAgfSwge1xuICAgICAgcmVnZXg6IHRoaXMucmVnZXhwLFxuICAgICAgc2FmZVZhbHVlOiB2YWwgPT4gdGhpcy5lc2NhcGVWYWx1ZSA/IHJlZ2V4U2FmZSh0aGlzLmVzY2FwZSh2YWwpKSA6IHJlZ2V4U2FmZSh2YWwpXG4gICAgfV07XG4gICAgdG9kb3MuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgIHJlcGxhY2VzID0gMDtcbiAgICAgIHdoaWxlIChtYXRjaCA9IHRvZG8ucmVnZXguZXhlYyhzdHIpKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZWRWYXIgPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoZWRWYXIpO1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyKHN0ciwgbWF0Y2gsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdmFsdWUgPSB0eXBlb2YgdGVtcCA9PT0gJ3N0cmluZycgPyB0ZW1wIDogJyc7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvcHRpb25zLCBtYXRjaGVkVmFyKSkge1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHNraXBPblZhcmlhYmxlcykge1xuICAgICAgICAgICAgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcGFzcyBpbiB2YXJpYWJsZSAke21hdGNoZWRWYXJ9IGZvciBpbnRlcnBvbGF0aW5nICR7c3RyfWApO1xuICAgICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAhdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlKSB7XG4gICAgICAgICAgdmFsdWUgPSBtYWtlU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYWZlVmFsdWUgPSB0b2RvLnNhZmVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCBzYWZlVmFsdWUpO1xuICAgICAgICBpZiAoc2tpcE9uVmFyaWFibGVzKSB7XG4gICAgICAgICAgdG9kby5yZWdleC5sYXN0SW5kZXggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHRvZG8ucmVnZXgubGFzdEluZGV4IC09IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2RvLnJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZXMrKztcbiAgICAgICAgaWYgKHJlcGxhY2VzID49IHRoaXMubWF4UmVwbGFjZXMpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG4gIH1cbiAgbmVzdChzdHIsIGZjKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgIGxldCBtYXRjaDtcbiAgICBsZXQgdmFsdWU7XG4gICAgbGV0IGNsb25lZE9wdGlvbnM7XG4gICAgY29uc3QgaGFuZGxlSGFzT3B0aW9ucyA9IChrZXksIGluaGVyaXRlZE9wdGlvbnMpID0+IHtcbiAgICAgIGNvbnN0IHNlcCA9IHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I7XG4gICAgICBpZiAoa2V5LmluZGV4T2Yoc2VwKSA8IDApIHJldHVybiBrZXk7XG4gICAgICBjb25zdCBjID0ga2V5LnNwbGl0KG5ldyBSZWdFeHAoYCR7c2VwfVsgXSp7YCkpO1xuICAgICAgbGV0IG9wdGlvbnNTdHJpbmcgPSBgeyR7Y1sxXX1gO1xuICAgICAga2V5ID0gY1swXTtcbiAgICAgIG9wdGlvbnNTdHJpbmcgPSB0aGlzLmludGVycG9sYXRlKG9wdGlvbnNTdHJpbmcsIGNsb25lZE9wdGlvbnMpO1xuICAgICAgY29uc3QgbWF0Y2hlZFNpbmdsZVF1b3RlcyA9IG9wdGlvbnNTdHJpbmcubWF0Y2goLycvZyk7XG4gICAgICBjb25zdCBtYXRjaGVkRG91YmxlUXVvdGVzID0gb3B0aW9uc1N0cmluZy5tYXRjaCgvXCIvZyk7XG4gICAgICBpZiAobWF0Y2hlZFNpbmdsZVF1b3RlcyAmJiBtYXRjaGVkU2luZ2xlUXVvdGVzLmxlbmd0aCAlIDIgPT09IDAgJiYgIW1hdGNoZWREb3VibGVRdW90ZXMgfHwgbWF0Y2hlZERvdWJsZVF1b3Rlcy5sZW5ndGggJSAyICE9PSAwKSB7XG4gICAgICAgIG9wdGlvbnNTdHJpbmcgPSBvcHRpb25zU3RyaW5nLnJlcGxhY2UoLycvZywgJ1wiJyk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjbG9uZWRPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zU3RyaW5nKTtcbiAgICAgICAgaWYgKGluaGVyaXRlZE9wdGlvbnMpIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgICAgLi4uaW5oZXJpdGVkT3B0aW9ucyxcbiAgICAgICAgICAuLi5jbG9uZWRPcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAke2tleX1gLCBlKTtcbiAgICAgICAgcmV0dXJuIGAke2tleX0ke3NlcH0ke29wdGlvbnNTdHJpbmd9YDtcbiAgICAgIH1cbiAgICAgIGlmIChjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZSAmJiBjbG9uZWRPcHRpb25zLmRlZmF1bHRWYWx1ZS5pbmRleE9mKHRoaXMucHJlZml4KSA+IC0xKSBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH07XG4gICAgd2hpbGUgKG1hdGNoID0gdGhpcy5uZXN0aW5nUmVnZXhwLmV4ZWMoc3RyKSkge1xuICAgICAgbGV0IGZvcm1hdHRlcnMgPSBbXTtcbiAgICAgIGNsb25lZE9wdGlvbnMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnNcbiAgICAgIH07XG4gICAgICBjbG9uZWRPcHRpb25zID0gY2xvbmVkT3B0aW9ucy5yZXBsYWNlICYmIHR5cGVvZiBjbG9uZWRPcHRpb25zLnJlcGxhY2UgIT09ICdzdHJpbmcnID8gY2xvbmVkT3B0aW9ucy5yZXBsYWNlIDogY2xvbmVkT3B0aW9ucztcbiAgICAgIGNsb25lZE9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yID0gZmFsc2U7XG4gICAgICBkZWxldGUgY2xvbmVkT3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgICBsZXQgZG9SZWR1Y2UgPSBmYWxzZTtcbiAgICAgIGlmIChtYXRjaFswXS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSAhPT0gLTEgJiYgIS97Lip9Ly50ZXN0KG1hdGNoWzFdKSkge1xuICAgICAgICBjb25zdCByID0gbWF0Y2hbMV0uc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpLm1hcChlbGVtID0+IGVsZW0udHJpbSgpKTtcbiAgICAgICAgbWF0Y2hbMV0gPSByLnNoaWZ0KCk7XG4gICAgICAgIGZvcm1hdHRlcnMgPSByO1xuICAgICAgICBkb1JlZHVjZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGZjKGhhbmRsZUhhc09wdGlvbnMuY2FsbCh0aGlzLCBtYXRjaFsxXS50cmltKCksIGNsb25lZE9wdGlvbnMpLCBjbG9uZWRPcHRpb25zKTtcbiAgICAgIGlmICh2YWx1ZSAmJiBtYXRjaFswXSA9PT0gc3RyICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBtaXNzZWQgdG8gcmVzb2x2ZSAke21hdGNoWzFdfSBmb3IgbmVzdGluZyAke3N0cn1gKTtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmIChkb1JlZHVjZSkge1xuICAgICAgICB2YWx1ZSA9IGZvcm1hdHRlcnMucmVkdWNlKCh2LCBmKSA9PiB0aGlzLmZvcm1hdCh2LCBmLCBvcHRpb25zLmxuZywge1xuICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgaW50ZXJwb2xhdGlvbmtleTogbWF0Y2hbMV0udHJpbSgpXG4gICAgICAgIH0pLCB2YWx1ZS50cmltKCkpO1xuICAgICAgfVxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH1cbn1cblxuY29uc3QgcGFyc2VGb3JtYXRTdHIgPSBmb3JtYXRTdHIgPT4ge1xuICBsZXQgZm9ybWF0TmFtZSA9IGZvcm1hdFN0ci50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgY29uc3QgZm9ybWF0T3B0aW9ucyA9IHt9O1xuICBpZiAoZm9ybWF0U3RyLmluZGV4T2YoJygnKSA+IC0xKSB7XG4gICAgY29uc3QgcCA9IGZvcm1hdFN0ci5zcGxpdCgnKCcpO1xuICAgIGZvcm1hdE5hbWUgPSBwWzBdLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgIGNvbnN0IG9wdFN0ciA9IHBbMV0uc3Vic3RyaW5nKDAsIHBbMV0ubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGZvcm1hdE5hbWUgPT09ICdjdXJyZW5jeScgJiYgb3B0U3RyLmluZGV4T2YoJzonKSA8IDApIHtcbiAgICAgIGlmICghZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSkgZm9ybWF0T3B0aW9ucy5jdXJyZW5jeSA9IG9wdFN0ci50cmltKCk7XG4gICAgfSBlbHNlIGlmIChmb3JtYXROYW1lID09PSAncmVsYXRpdmV0aW1lJyAmJiBvcHRTdHIuaW5kZXhPZignOicpIDwgMCkge1xuICAgICAgaWYgKCFmb3JtYXRPcHRpb25zLnJhbmdlKSBmb3JtYXRPcHRpb25zLnJhbmdlID0gb3B0U3RyLnRyaW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3B0cyA9IG9wdFN0ci5zcGxpdCgnOycpO1xuICAgICAgb3B0cy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICAgIGlmIChvcHQpIHtcbiAgICAgICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IG9wdC5zcGxpdCgnOicpO1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHJlc3Quam9pbignOicpLnRyaW0oKS5yZXBsYWNlKC9eJyt8JyskL2csICcnKTtcbiAgICAgICAgICBjb25zdCB0cmltbWVkS2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgICAgICBpZiAoIWZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0pIGZvcm1hdE9wdGlvbnNbdHJpbW1lZEtleV0gPSB2YWw7XG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ2ZhbHNlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IGZhbHNlO1xuICAgICAgICAgIGlmICh2YWwgPT09ICd0cnVlJykgZm9ybWF0T3B0aW9uc1t0cmltbWVkS2V5XSA9IHRydWU7XG4gICAgICAgICAgaWYgKCFpc05hTih2YWwpKSBmb3JtYXRPcHRpb25zW3RyaW1tZWRLZXldID0gcGFyc2VJbnQodmFsLCAxMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGZvcm1hdE5hbWUsXG4gICAgZm9ybWF0T3B0aW9uc1xuICB9O1xufTtcbmNvbnN0IGNyZWF0ZUNhY2hlZEZvcm1hdHRlciA9IGZuID0+IHtcbiAgY29uc3QgY2FjaGUgPSB7fTtcbiAgcmV0dXJuICh2YWwsIGxuZywgb3B0aW9ucykgPT4ge1xuICAgIGxldCBvcHRGb3JDYWNoZSA9IG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9ua2V5ICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gJiYgb3B0aW9uc1tvcHRpb25zLmludGVycG9sYXRpb25rZXldKSB7XG4gICAgICBvcHRGb3JDYWNoZSA9IHtcbiAgICAgICAgLi4ub3B0Rm9yQ2FjaGUsXG4gICAgICAgIFtvcHRpb25zLmludGVycG9sYXRpb25rZXldOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IGxuZyArIEpTT04uc3RyaW5naWZ5KG9wdEZvckNhY2hlKTtcbiAgICBsZXQgZm9ybWF0dGVyID0gY2FjaGVba2V5XTtcbiAgICBpZiAoIWZvcm1hdHRlcikge1xuICAgICAgZm9ybWF0dGVyID0gZm4oZ2V0Q2xlYW5lZENvZGUobG5nKSwgb3B0aW9ucyk7XG4gICAgICBjYWNoZVtrZXldID0gZm9ybWF0dGVyO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVyKHZhbCk7XG4gIH07XG59O1xuY2xhc3MgRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2Zvcm1hdHRlcicpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5mb3JtYXRzID0ge1xuICAgICAgbnVtYmVyOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSksXG4gICAgICBjdXJyZW5jeTogY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKChsbmcsIG9wdCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0LFxuICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgZGF0ZXRpbWU6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG5nLCB7XG4gICAgICAgICAgLi4ub3B0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdmFsID0+IGZvcm1hdHRlci5mb3JtYXQodmFsKTtcbiAgICAgIH0pLFxuICAgICAgcmVsYXRpdmV0aW1lOiBjcmVhdGVDYWNoZWRGb3JtYXR0ZXIoKGxuZywgb3B0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwsIG9wdC5yYW5nZSB8fCAnZGF5Jyk7XG4gICAgICB9KSxcbiAgICAgIGxpc3Q6IGNyZWF0ZUNhY2hlZEZvcm1hdHRlcigobG5nLCBvcHQpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChsbmcsIHtcbiAgICAgICAgICAuLi5vcHRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YWwgPT4gZm9ybWF0dGVyLmZvcm1hdCh2YWwpO1xuICAgICAgfSlcbiAgICB9O1xuICAgIHRoaXMuaW5pdChvcHRpb25zKTtcbiAgfVxuICBpbml0KHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIGludGVycG9sYXRpb246IHt9XG4gICAgfTtcbiAgICBjb25zdCBpT3B0cyA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbjtcbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IGlPcHRzLmZvcm1hdFNlcGFyYXRvciA/IGlPcHRzLmZvcm1hdFNlcGFyYXRvciA6IGlPcHRzLmZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG4gIH1cbiAgYWRkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gZmM7XG4gIH1cbiAgYWRkQ2FjaGVkKG5hbWUsIGZjKSB7XG4gICAgdGhpcy5mb3JtYXRzW25hbWUudG9Mb3dlckNhc2UoKS50cmltKCldID0gY3JlYXRlQ2FjaGVkRm9ybWF0dGVyKGZjKTtcbiAgfVxuICBmb3JtYXQodmFsdWUsIGZvcm1hdCwgbG5nKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNvbnN0IGZvcm1hdHMgPSBmb3JtYXQuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgIGlmIChmb3JtYXRzLmxlbmd0aCA+IDEgJiYgZm9ybWF0c1swXS5pbmRleE9mKCcoJykgPiAxICYmIGZvcm1hdHNbMF0uaW5kZXhPZignKScpIDwgMCAmJiBmb3JtYXRzLmZpbmQoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKSkge1xuICAgICAgY29uc3QgbGFzdEluZGV4ID0gZm9ybWF0cy5maW5kSW5kZXgoZiA9PiBmLmluZGV4T2YoJyknKSA+IC0xKTtcbiAgICAgIGZvcm1hdHNbMF0gPSBbZm9ybWF0c1swXSwgLi4uZm9ybWF0cy5zcGxpY2UoMSwgbGFzdEluZGV4KV0uam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdHMucmVkdWNlKChtZW0sIGYpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZm9ybWF0TmFtZSxcbiAgICAgICAgZm9ybWF0T3B0aW9uc1xuICAgICAgfSA9IHBhcnNlRm9ybWF0U3RyKGYpO1xuICAgICAgaWYgKHRoaXMuZm9ybWF0c1tmb3JtYXROYW1lXSkge1xuICAgICAgICBsZXQgZm9ybWF0dGVkID0gbWVtO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHZhbE9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zICYmIG9wdGlvbnMuZm9ybWF0UGFyYW1zW29wdGlvbnMuaW50ZXJwb2xhdGlvbmtleV0gfHwge307XG4gICAgICAgICAgY29uc3QgbCA9IHZhbE9wdGlvbnMubG9jYWxlIHx8IHZhbE9wdGlvbnMubG5nIHx8IG9wdGlvbnMubG9jYWxlIHx8IG9wdGlvbnMubG5nIHx8IGxuZztcbiAgICAgICAgICBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdHNbZm9ybWF0TmFtZV0obWVtLCBsLCB7XG4gICAgICAgICAgICAuLi5mb3JtYXRPcHRpb25zLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLnZhbE9wdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybWF0dGVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgdGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgJHtmb3JtYXROYW1lfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbTtcbiAgICB9LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5jb25zdCByZW1vdmVQZW5kaW5nID0gKHEsIG5hbWUpID0+IHtcbiAgaWYgKHEucGVuZGluZ1tuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZGVsZXRlIHEucGVuZGluZ1tuYW1lXTtcbiAgICBxLnBlbmRpbmdDb3VudC0tO1xuICB9XG59O1xuY2xhc3MgQ29ubmVjdG9yIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoYmFja2VuZCwgc3RvcmUsIHNlcnZpY2VzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IHNlcnZpY2VzLmxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdiYWNrZW5kQ29ubmVjdG9yJyk7XG4gICAgdGhpcy53YWl0aW5nUmVhZHMgPSBbXTtcbiAgICB0aGlzLm1heFBhcmFsbGVsUmVhZHMgPSBvcHRpb25zLm1heFBhcmFsbGVsUmVhZHMgfHwgMTA7XG4gICAgdGhpcy5yZWFkaW5nQ2FsbHMgPSAwO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA+PSAwID8gb3B0aW9ucy5tYXhSZXRyaWVzIDogNTtcbiAgICB0aGlzLnJldHJ5VGltZW91dCA9IG9wdGlvbnMucmV0cnlUaW1lb3V0ID49IDEgPyBvcHRpb25zLnJldHJ5VGltZW91dCA6IDM1MDtcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgIGlmICh0aGlzLmJhY2tlbmQgJiYgdGhpcy5iYWNrZW5kLmluaXQpIHtcbiAgICAgIHRoaXMuYmFja2VuZC5pbml0KHNlcnZpY2VzLCBvcHRpb25zLmJhY2tlbmQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBxdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHRvTG9hZCA9IHt9O1xuICAgIGNvbnN0IHBlbmRpbmcgPSB7fTtcbiAgICBjb25zdCB0b0xvYWRMYW5ndWFnZXMgPSB7fTtcbiAgICBjb25zdCB0b0xvYWROYW1lc3BhY2VzID0ge307XG4gICAgbGFuZ3VhZ2VzLmZvckVhY2gobG5nID0+IHtcbiAgICAgIGxldCBoYXNBbGxOYW1lc3BhY2VzID0gdHJ1ZTtcbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChucyA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBgJHtsbmd9fCR7bnN9YDtcbiAgICAgICAgaWYgKCFvcHRpb25zLnJlbG9hZCAmJiB0aGlzLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZVtuYW1lXSA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA8IDApIDsgZWxzZSBpZiAodGhpcy5zdGF0ZVtuYW1lXSA9PT0gMSkge1xuICAgICAgICAgIGlmIChwZW5kaW5nW25hbWVdID09PSB1bmRlZmluZWQpIHBlbmRpbmdbbmFtZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdGVbbmFtZV0gPSAxO1xuICAgICAgICAgIGhhc0FsbE5hbWVzcGFjZXMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAocGVuZGluZ1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwZW5kaW5nW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodG9Mb2FkW25hbWVdID09PSB1bmRlZmluZWQpIHRvTG9hZFtuYW1lXSA9IHRydWU7XG4gICAgICAgICAgaWYgKHRvTG9hZE5hbWVzcGFjZXNbbnNdID09PSB1bmRlZmluZWQpIHRvTG9hZE5hbWVzcGFjZXNbbnNdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIWhhc0FsbE5hbWVzcGFjZXMpIHRvTG9hZExhbmd1YWdlc1tsbmddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAoT2JqZWN0LmtleXModG9Mb2FkKS5sZW5ndGggfHwgT2JqZWN0LmtleXMocGVuZGluZykubGVuZ3RoKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goe1xuICAgICAgICBwZW5kaW5nLFxuICAgICAgICBwZW5kaW5nQ291bnQ6IE9iamVjdC5rZXlzKHBlbmRpbmcpLmxlbmd0aCxcbiAgICAgICAgbG9hZGVkOiB7fSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdG9Mb2FkOiBPYmplY3Qua2V5cyh0b0xvYWQpLFxuICAgICAgcGVuZGluZzogT2JqZWN0LmtleXMocGVuZGluZyksXG4gICAgICB0b0xvYWRMYW5ndWFnZXM6IE9iamVjdC5rZXlzKHRvTG9hZExhbmd1YWdlcyksXG4gICAgICB0b0xvYWROYW1lc3BhY2VzOiBPYmplY3Qua2V5cyh0b0xvYWROYW1lc3BhY2VzKVxuICAgIH07XG4gIH1cbiAgbG9hZGVkKG5hbWUsIGVyciwgZGF0YSkge1xuICAgIGNvbnN0IHMgPSBuYW1lLnNwbGl0KCd8Jyk7XG4gICAgY29uc3QgbG5nID0gc1swXTtcbiAgICBjb25zdCBucyA9IHNbMV07XG4gICAgaWYgKGVycikgdGhpcy5lbWl0KCdmYWlsZWRMb2FkaW5nJywgbG5nLCBucywgZXJyKTtcbiAgICBpZiAoIWVyciAmJiBkYXRhKSB7XG4gICAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIGRhdGEsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgIHNraXBDb3B5OiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZVtuYW1lXSA9IGVyciA/IC0xIDogMjtcbiAgICBpZiAoZXJyICYmIGRhdGEpIHRoaXMuc3RhdGVbbmFtZV0gPSAwO1xuICAgIGNvbnN0IGxvYWRlZCA9IHt9O1xuICAgIHRoaXMucXVldWUuZm9yRWFjaChxID0+IHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlUGVuZGluZyhxLCBuYW1lKTtcbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgIGlmIChxLnBlbmRpbmdDb3VudCA9PT0gMCAmJiAhcS5kb25lKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHEubG9hZGVkKS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmICghbG9hZGVkW2xdKSBsb2FkZWRbbF0gPSB7fTtcbiAgICAgICAgICBjb25zdCBsb2FkZWRLZXlzID0gcS5sb2FkZWRbbF07XG4gICAgICAgICAgaWYgKGxvYWRlZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb2FkZWRLZXlzLmZvckVhY2gobiA9PiB7XG4gICAgICAgICAgICAgIGlmIChsb2FkZWRbbF1bbl0gPT09IHVuZGVmaW5lZCkgbG9hZGVkW2xdW25dID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHEuZG9uZSA9IHRydWU7XG4gICAgICAgIGlmIChxLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKHEuZXJyb3JzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxLmNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmVtaXQoJ2xvYWRlZCcsIGxvYWRlZCk7XG4gICAgdGhpcy5xdWV1ZSA9IHRoaXMucXVldWUuZmlsdGVyKHEgPT4gIXEuZG9uZSk7XG4gIH1cbiAgcmVhZChsbmcsIG5zLCBmY05hbWUpIHtcbiAgICBsZXQgdHJpZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG4gICAgbGV0IHdhaXQgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHRoaXMucmV0cnlUaW1lb3V0O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ID8gYXJndW1lbnRzWzVdIDogdW5kZWZpbmVkO1xuICAgIGlmICghbG5nLmxlbmd0aCkgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHt9KTtcbiAgICBpZiAodGhpcy5yZWFkaW5nQ2FsbHMgPj0gdGhpcy5tYXhQYXJhbGxlbFJlYWRzKSB7XG4gICAgICB0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtcbiAgICAgICAgbG5nLFxuICAgICAgICBucyxcbiAgICAgICAgZmNOYW1lLFxuICAgICAgICB0cmllZCxcbiAgICAgICAgd2FpdCxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlYWRpbmdDYWxscysrO1xuICAgIGNvbnN0IHJlc29sdmVyID0gKGVyciwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5yZWFkaW5nQ2FsbHMtLTtcbiAgICAgIGlmICh0aGlzLndhaXRpbmdSZWFkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLndhaXRpbmdSZWFkcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLnJlYWQobmV4dC5sbmcsIG5leHQubnMsIG5leHQuZmNOYW1lLCBuZXh0LnRyaWVkLCBuZXh0LndhaXQsIG5leHQuY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgaWYgKGVyciAmJiBkYXRhICYmIHRyaWVkIDwgdGhpcy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVhZC5jYWxsKHRoaXMsIGxuZywgbnMsIGZjTmFtZSwgdHJpZWQgKyAxLCB3YWl0ICogMiwgY2FsbGJhY2spO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9O1xuICAgIGNvbnN0IGZjID0gdGhpcy5iYWNrZW5kW2ZjTmFtZV0uYmluZCh0aGlzLmJhY2tlbmQpO1xuICAgIGlmIChmYy5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHIgPSBmYyhsbmcsIG5zKTtcbiAgICAgICAgaWYgKHIgJiYgdHlwZW9mIHIudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHIudGhlbihkYXRhID0+IHJlc29sdmVyKG51bGwsIGRhdGEpKS5jYXRjaChyZXNvbHZlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZXIobnVsbCwgcik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXNvbHZlcihlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZmMobG5nLCBucywgcmVzb2x2ZXIpO1xuICB9XG4gIHByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcykge1xuICAgIGxldCBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgICBsZXQgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAoIXRoaXMuYmFja2VuZCkge1xuICAgICAgdGhpcy5sb2dnZXIud2FybignTm8gYmFja2VuZCB3YXMgYWRkZWQgdmlhIGkxOG5leHQudXNlLiBXaWxsIG5vdCBsb2FkIHJlc291cmNlcy4nKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycpIGxhbmd1YWdlcyA9IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobGFuZ3VhZ2VzKTtcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnKSBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdO1xuICAgIGNvbnN0IHRvTG9hZCA9IHRoaXMucXVldWVMb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIGlmICghdG9Mb2FkLnRvTG9hZC5sZW5ndGgpIHtcbiAgICAgIGlmICghdG9Mb2FkLnBlbmRpbmcubGVuZ3RoKSBjYWxsYmFjaygpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRvTG9hZC50b0xvYWQuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgIHRoaXMubG9hZE9uZShuYW1lKTtcbiAgICB9KTtcbiAgfVxuICBsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICB0aGlzLnByZXBhcmVMb2FkaW5nKGxhbmd1YWdlcywgbmFtZXNwYWNlcywge30sIGNhbGxiYWNrKTtcbiAgfVxuICByZWxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHJlcGFyZUxvYWRpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCB7XG4gICAgICByZWxvYWQ6IHRydWVcbiAgICB9LCBjYWxsYmFjayk7XG4gIH1cbiAgbG9hZE9uZShuYW1lKSB7XG4gICAgbGV0IHByZWZpeCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gICAgY29uc3QgcyA9IG5hbWUuc3BsaXQoJ3wnKTtcbiAgICBjb25zdCBsbmcgPSBzWzBdO1xuICAgIGNvbnN0IG5zID0gc1sxXTtcbiAgICB0aGlzLnJlYWQobG5nLCBucywgJ3JlYWQnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGVycikgdGhpcy5sb2dnZXIud2FybihgJHtwcmVmaXh9bG9hZGluZyBuYW1lc3BhY2UgJHtuc30gZm9yIGxhbmd1YWdlICR7bG5nfSBmYWlsZWRgLCBlcnIpO1xuICAgICAgaWYgKCFlcnIgJiYgZGF0YSkgdGhpcy5sb2dnZXIubG9nKGAke3ByZWZpeH1sb2FkZWQgbmFtZXNwYWNlICR7bnN9IGZvciBsYW5ndWFnZSAke2xuZ31gLCBkYXRhKTtcbiAgICAgIHRoaXMubG9hZGVkKG5hbWUsIGVyciwgZGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgc2F2ZU1pc3NpbmcobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSwgaXNVcGRhdGUpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDoge307XG4gICAgbGV0IGNsYiA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogKCkgPT4ge307XG4gICAgaWYgKHRoaXMuc2VydmljZXMudXRpbHMgJiYgdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UgJiYgIXRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlKG5hbWVzcGFjZSkpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oYGRpZCBub3Qgc2F2ZSBrZXkgXCIke2tleX1cIiBhcyB0aGUgbmFtZXNwYWNlIFwiJHtuYW1lc3BhY2V9XCIgd2FzIG5vdCB5ZXQgbG9hZGVkYCwgJ1RoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhIScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQgfHwga2V5ID09PSBudWxsIHx8IGtleSA9PT0gJycpIHJldHVybjtcbiAgICBpZiAodGhpcy5iYWNrZW5kICYmIHRoaXMuYmFja2VuZC5jcmVhdGUpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGlzVXBkYXRlXG4gICAgICB9O1xuICAgICAgY29uc3QgZmMgPSB0aGlzLmJhY2tlbmQuY3JlYXRlLmJpbmQodGhpcy5iYWNrZW5kKTtcbiAgICAgIGlmIChmYy5sZW5ndGggPCA2KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgaWYgKGZjLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgICAgciA9IGZjKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUsIG9wdHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByID0gZmMobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyICYmIHR5cGVvZiByLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHIudGhlbihkYXRhID0+IGNsYihudWxsLCBkYXRhKSkuY2F0Y2goY2xiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xiKG51bGwsIHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY2xiKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZjKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUsIGNsYiwgb3B0cyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghbGFuZ3VhZ2VzIHx8ICFsYW5ndWFnZXNbMF0pIHJldHVybjtcbiAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlKGxhbmd1YWdlc1swXSwgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuICB9XG59XG5cbmNvbnN0IGdldCA9ICgpID0+ICh7XG4gIGRlYnVnOiBmYWxzZSxcbiAgaW5pdEltbWVkaWF0ZTogdHJ1ZSxcbiAgbnM6IFsndHJhbnNsYXRpb24nXSxcbiAgZGVmYXVsdE5TOiBbJ3RyYW5zbGF0aW9uJ10sXG4gIGZhbGxiYWNrTG5nOiBbJ2RldiddLFxuICBmYWxsYmFja05TOiBmYWxzZSxcbiAgc3VwcG9ydGVkTG5nczogZmFsc2UsXG4gIG5vbkV4cGxpY2l0U3VwcG9ydGVkTG5nczogZmFsc2UsXG4gIGxvYWQ6ICdhbGwnLFxuICBwcmVsb2FkOiBmYWxzZSxcbiAgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRydWUsXG4gIGtleVNlcGFyYXRvcjogJy4nLFxuICBuc1NlcGFyYXRvcjogJzonLFxuICBwbHVyYWxTZXBhcmF0b3I6ICdfJyxcbiAgY29udGV4dFNlcGFyYXRvcjogJ18nLFxuICBwYXJ0aWFsQnVuZGxlZExhbmd1YWdlczogZmFsc2UsXG4gIHNhdmVNaXNzaW5nOiBmYWxzZSxcbiAgdXBkYXRlTWlzc2luZzogZmFsc2UsXG4gIHNhdmVNaXNzaW5nVG86ICdmYWxsYmFjaycsXG4gIHNhdmVNaXNzaW5nUGx1cmFsczogdHJ1ZSxcbiAgbWlzc2luZ0tleUhhbmRsZXI6IGZhbHNlLFxuICBtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI6IGZhbHNlLFxuICBwb3N0UHJvY2VzczogZmFsc2UsXG4gIHBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkOiBmYWxzZSxcbiAgcmV0dXJuTnVsbDogZmFsc2UsXG4gIHJldHVybkVtcHR5U3RyaW5nOiB0cnVlLFxuICByZXR1cm5PYmplY3RzOiBmYWxzZSxcbiAgam9pbkFycmF5czogZmFsc2UsXG4gIHJldHVybmVkT2JqZWN0SGFuZGxlcjogZmFsc2UsXG4gIHBhcnNlTWlzc2luZ0tleUhhbmRsZXI6IGZhbHNlLFxuICBhcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXk6IGZhbHNlLFxuICBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZTogZmFsc2UsXG4gIG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyOiBhcmdzID0+IHtcbiAgICBsZXQgcmV0ID0ge307XG4gICAgaWYgKHR5cGVvZiBhcmdzWzFdID09PSAnb2JqZWN0JykgcmV0ID0gYXJnc1sxXTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09ICdzdHJpbmcnKSByZXQuZGVmYXVsdFZhbHVlID0gYXJnc1sxXTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdzdHJpbmcnKSByZXQudERlc2NyaXB0aW9uID0gYXJnc1syXTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMl0gPT09ICdvYmplY3QnIHx8IHR5cGVvZiBhcmdzWzNdID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IGFyZ3NbM10gfHwgYXJnc1syXTtcbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgcmV0W2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgaW50ZXJwb2xhdGlvbjoge1xuICAgIGVzY2FwZVZhbHVlOiB0cnVlLFxuICAgIGZvcm1hdDogdmFsdWUgPT4gdmFsdWUsXG4gICAgcHJlZml4OiAne3snLFxuICAgIHN1ZmZpeDogJ319JyxcbiAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICB1bmVzY2FwZVByZWZpeDogJy0nLFxuICAgIG5lc3RpbmdQcmVmaXg6ICckdCgnLFxuICAgIG5lc3RpbmdTdWZmaXg6ICcpJyxcbiAgICBuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjogJywnLFxuICAgIG1heFJlcGxhY2VzOiAxMDAwLFxuICAgIHNraXBPblZhcmlhYmxlczogdHJ1ZVxuICB9XG59KTtcbmNvbnN0IHRyYW5zZm9ybU9wdGlvbnMgPSBvcHRpb25zID0+IHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLm5zID09PSAnc3RyaW5nJykgb3B0aW9ucy5ucyA9IFtvcHRpb25zLm5zXTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmZhbGxiYWNrTG5nID09PSAnc3RyaW5nJykgb3B0aW9ucy5mYWxsYmFja0xuZyA9IFtvcHRpb25zLmZhbGxiYWNrTG5nXTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmZhbGxiYWNrTlMgPT09ICdzdHJpbmcnKSBvcHRpb25zLmZhbGxiYWNrTlMgPSBbb3B0aW9ucy5mYWxsYmFja05TXTtcbiAgaWYgKG9wdGlvbnMuc3VwcG9ydGVkTG5ncyAmJiBvcHRpb25zLnN1cHBvcnRlZExuZ3MuaW5kZXhPZignY2ltb2RlJykgPCAwKSB7XG4gICAgb3B0aW9ucy5zdXBwb3J0ZWRMbmdzID0gb3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmNvbmNhdChbJ2NpbW9kZSddKTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcbmNvbnN0IGJpbmRNZW1iZXJGdW5jdGlvbnMgPSBpbnN0ID0+IHtcbiAgY29uc3QgbWVtcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihpbnN0KSk7XG4gIG1lbXMuZm9yRWFjaChtZW0gPT4ge1xuICAgIGlmICh0eXBlb2YgaW5zdFttZW1dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpbnN0W21lbV0gPSBpbnN0W21lbV0uYmluZChpbnN0KTtcbiAgICB9XG4gIH0pO1xufTtcbmNsYXNzIEkxOG4gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB0cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpO1xuICAgIHRoaXMuc2VydmljZXMgPSB7fTtcbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXI7XG4gICAgdGhpcy5tb2R1bGVzID0ge1xuICAgICAgZXh0ZXJuYWw6IFtdXG4gICAgfTtcbiAgICBiaW5kTWVtYmVyRnVuY3Rpb25zKHRoaXMpO1xuICAgIGlmIChjYWxsYmFjayAmJiAhdGhpcy5pc0luaXRpYWxpemVkICYmICFvcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuICBpbml0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuaXNJbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuZGVmYXVsdE5TICYmIG9wdGlvbnMuZGVmYXVsdE5TICE9PSBmYWxzZSAmJiBvcHRpb25zLm5zKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMubnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9wdGlvbnMuZGVmYXVsdE5TID0gb3B0aW9ucy5ucztcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5ucy5pbmRleE9mKCd0cmFuc2xhdGlvbicpIDwgMCkge1xuICAgICAgICBvcHRpb25zLmRlZmF1bHROUyA9IG9wdGlvbnMubnNbMF07XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGRlZk9wdHMgPSBnZXQoKTtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAuLi5kZWZPcHRzLFxuICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgLi4udHJhbnNmb3JtT3B0aW9ucyhvcHRpb25zKVxuICAgIH07XG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJICE9PSAndjEnKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiA9IHtcbiAgICAgICAgLi4uZGVmT3B0cy5pbnRlcnBvbGF0aW9uLFxuICAgICAgICAuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvblxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMua2V5U2VwYXJhdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZEtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5uc1NlcGFyYXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciA9IG9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZUNsYXNzT25EZW1hbmQgPSBDbGFzc09yT2JqZWN0ID0+IHtcbiAgICAgIGlmICghQ2xhc3NPck9iamVjdCkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAodHlwZW9mIENsYXNzT3JPYmplY3QgPT09ICdmdW5jdGlvbicpIHJldHVybiBuZXcgQ2xhc3NPck9iamVjdCgpO1xuICAgICAgcmV0dXJuIENsYXNzT3JPYmplY3Q7XG4gICAgfTtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxvZ2dlcikge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQoY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubG9nZ2VyKSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChudWxsLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgbGV0IGZvcm1hdHRlcjtcbiAgICAgIGlmICh0aGlzLm1vZHVsZXMuZm9ybWF0dGVyKSB7XG4gICAgICAgIGZvcm1hdHRlciA9IHRoaXMubW9kdWxlcy5mb3JtYXR0ZXI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBJbnRsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmb3JtYXR0ZXIgPSBGb3JtYXR0ZXI7XG4gICAgICB9XG4gICAgICBjb25zdCBsdSA9IG5ldyBMYW5ndWFnZVV0aWwodGhpcy5vcHRpb25zKTtcbiAgICAgIHRoaXMuc3RvcmUgPSBuZXcgUmVzb3VyY2VTdG9yZSh0aGlzLm9wdGlvbnMucmVzb3VyY2VzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgY29uc3QgcyA9IHRoaXMuc2VydmljZXM7XG4gICAgICBzLmxvZ2dlciA9IGJhc2VMb2dnZXI7XG4gICAgICBzLnJlc291cmNlU3RvcmUgPSB0aGlzLnN0b3JlO1xuICAgICAgcy5sYW5ndWFnZVV0aWxzID0gbHU7XG4gICAgICBzLnBsdXJhbFJlc29sdmVyID0gbmV3IFBsdXJhbFJlc29sdmVyKGx1LCB7XG4gICAgICAgIHByZXBlbmQ6IHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IsXG4gICAgICAgIGNvbXBhdGliaWxpdHlKU09OOiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04sXG4gICAgICAgIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXhcbiAgICAgIH0pO1xuICAgICAgaWYgKGZvcm1hdHRlciAmJiAoIXRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCB8fCB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgPT09IGRlZk9wdHMuaW50ZXJwb2xhdGlvbi5mb3JtYXQpKSB7XG4gICAgICAgIHMuZm9ybWF0dGVyID0gY3JlYXRlQ2xhc3NPbkRlbWFuZChmb3JtYXR0ZXIpO1xuICAgICAgICBzLmZvcm1hdHRlci5pbml0KHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCA9IHMuZm9ybWF0dGVyLmZvcm1hdC5iaW5kKHMuZm9ybWF0dGVyKTtcbiAgICAgIH1cbiAgICAgIHMuaW50ZXJwb2xhdG9yID0gbmV3IEludGVycG9sYXRvcih0aGlzLm9wdGlvbnMpO1xuICAgICAgcy51dGlscyA9IHtcbiAgICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiB0aGlzLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHRoaXMpXG4gICAgICB9O1xuICAgICAgcy5iYWNrZW5kQ29ubmVjdG9yID0gbmV3IENvbm5lY3RvcihjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5iYWNrZW5kKSwgcy5yZXNvdXJjZVN0b3JlLCBzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgcy5iYWNrZW5kQ29ubmVjdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKSB7XG4gICAgICAgIHMubGFuZ3VhZ2VEZXRlY3RvciA9IGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpO1xuICAgICAgICBpZiAocy5sYW5ndWFnZURldGVjdG9yLmluaXQpIHMubGFuZ3VhZ2VEZXRlY3Rvci5pbml0KHMsIHRoaXMub3B0aW9ucy5kZXRlY3Rpb24sIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpIHtcbiAgICAgICAgcy5pMThuRm9ybWF0ID0gY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCk7XG4gICAgICAgIGlmIChzLmkxOG5Gb3JtYXQuaW5pdCkgcy5pMThuRm9ybWF0LmluaXQodGhpcyk7XG4gICAgICB9XG4gICAgICB0aGlzLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcih0aGlzLnNlcnZpY2VzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy50cmFuc2xhdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLmZvckVhY2gobSA9PiB7XG4gICAgICAgIGlmIChtLmluaXQpIG0uaW5pdCh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmZvcm1hdCA9IHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdDtcbiAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IG5vb3A7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyAmJiAhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmICF0aGlzLm9wdGlvbnMubG5nKSB7XG4gICAgICBjb25zdCBjb2RlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICBpZiAoY29kZXMubGVuZ3RoID4gMCAmJiBjb2Rlc1swXSAhPT0gJ2RldicpIHRoaXMub3B0aW9ucy5sbmcgPSBjb2Rlc1swXTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgIXRoaXMub3B0aW9ucy5sbmcpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2luaXQ6IG5vIGxhbmd1YWdlRGV0ZWN0b3IgaXMgdXNlZCBhbmQgbm8gbG5nIGlzIGRlZmluZWQnKTtcbiAgICB9XG4gICAgY29uc3Qgc3RvcmVBcGkgPSBbJ2dldFJlc291cmNlJywgJ2hhc1Jlc291cmNlQnVuZGxlJywgJ2dldFJlc291cmNlQnVuZGxlJywgJ2dldERhdGFCeUxhbmd1YWdlJ107XG4gICAgc3RvcmVBcGkuZm9yRWFjaChmY05hbWUgPT4ge1xuICAgICAgdGhpc1tmY05hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc3RvcmVbZmNOYW1lXSguLi5hcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCBzdG9yZUFwaUNoYWluZWQgPSBbJ2FkZFJlc291cmNlJywgJ2FkZFJlc291cmNlcycsICdhZGRSZXNvdXJjZUJ1bmRsZScsICdyZW1vdmVSZXNvdXJjZUJ1bmRsZSddO1xuICAgIHN0b3JlQXBpQ2hhaW5lZC5mb3JFYWNoKGZjTmFtZSA9PiB7XG4gICAgICB0aGlzW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnN0b3JlW2ZjTmFtZV0oLi4uYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgY29uc3QgbG9hZCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbmlzaCA9IChlcnIsIHQpID0+IHtcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemluZyA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkICYmICF0aGlzLmluaXRpYWxpemVkU3RvcmVPbmNlKSB0aGlzLmxvZ2dlci53YXJuKCdpbml0OiBpMThuZXh0IGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuIFlvdSBzaG91bGQgY2FsbCBpbml0IGp1c3Qgb25jZSEnKTtcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSkgdGhpcy5sb2dnZXIubG9nKCdpbml0aWFsaXplZCcsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZW1pdCgnaW5pdGlhbGl6ZWQnLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHQpO1xuICAgICAgICBjYWxsYmFjayhlcnIsIHQpO1xuICAgICAgfTtcbiAgICAgIGlmICh0aGlzLmxhbmd1YWdlcyAmJiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSAhPT0gJ3YxJyAmJiAhdGhpcy5pc0luaXRpYWxpemVkKSByZXR1cm4gZmluaXNoKG51bGwsIHRoaXMudC5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMuY2hhbmdlTGFuZ3VhZ2UodGhpcy5vcHRpb25zLmxuZywgZmluaXNoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLm9wdGlvbnMucmVzb3VyY2VzIHx8ICF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkge1xuICAgICAgbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KGxvYWQsIDApO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgbG9hZFJlc291cmNlcyhsYW5ndWFnZSkge1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcbiAgICBsZXQgdXNlZENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgY29uc3QgdXNlZExuZyA9IHR5cGVvZiBsYW5ndWFnZSA9PT0gJ3N0cmluZycgPyBsYW5ndWFnZSA6IHRoaXMubGFuZ3VhZ2U7XG4gICAgaWYgKHR5cGVvZiBsYW5ndWFnZSA9PT0gJ2Z1bmN0aW9uJykgdXNlZENhbGxiYWNrID0gbGFuZ3VhZ2U7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucmVzb3VyY2VzIHx8IHRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcykge1xuICAgICAgaWYgKHVzZWRMbmcgJiYgdXNlZExuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJyAmJiAoIXRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IHRoaXMub3B0aW9ucy5wcmVsb2FkLmxlbmd0aCA9PT0gMCkpIHJldHVybiB1c2VkQ2FsbGJhY2soKTtcbiAgICAgIGNvbnN0IHRvTG9hZCA9IFtdO1xuICAgICAgY29uc3QgYXBwZW5kID0gbG5nID0+IHtcbiAgICAgICAgaWYgKCFsbmcpIHJldHVybjtcbiAgICAgICAgaWYgKGxuZyA9PT0gJ2NpbW9kZScpIHJldHVybjtcbiAgICAgICAgY29uc3QgbG5ncyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobG5nKTtcbiAgICAgICAgbG5ncy5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmIChsID09PSAnY2ltb2RlJykgcmV0dXJuO1xuICAgICAgICAgIGlmICh0b0xvYWQuaW5kZXhPZihsKSA8IDApIHRvTG9hZC5wdXNoKGwpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBpZiAoIXVzZWRMbmcpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgICAgZmFsbGJhY2tzLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwZW5kKHVzZWRMbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmVsb2FkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2gobCA9PiBhcHBlbmQobCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmxvYWQodG9Mb2FkLCB0aGlzLm9wdGlvbnMubnMsIGUgPT4ge1xuICAgICAgICBpZiAoIWUgJiYgIXRoaXMucmVzb2x2ZWRMYW5ndWFnZSAmJiB0aGlzLmxhbmd1YWdlKSB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UodGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIHVzZWRDYWxsYmFjayhlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VkQ2FsbGJhY2sobnVsbCk7XG4gICAgfVxuICB9XG4gIHJlbG9hZFJlc291cmNlcyhsbmdzLCBucywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgaWYgKHR5cGVvZiBsbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGxuZ3M7XG4gICAgICBsbmdzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG5zO1xuICAgICAgbnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghbG5ncykgbG5ncyA9IHRoaXMubGFuZ3VhZ2VzO1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLm5zO1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcbiAgICB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGxuZ3MsIG5zLCBlcnIgPT4ge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgdXNlKG1vZHVsZSkge1xuICAgIGlmICghbW9kdWxlKSB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmICghbW9kdWxlLnR5cGUpIHRocm93IG5ldyBFcnJvcignWW91IGFyZSBwYXNzaW5nIGEgd3JvbmcgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKScpO1xuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2JhY2tlbmQnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuYmFja2VuZCA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbG9nZ2VyJyB8fCBtb2R1bGUubG9nICYmIG1vZHVsZS53YXJuICYmIG1vZHVsZS5lcnJvcikge1xuICAgICAgdGhpcy5tb2R1bGVzLmxvZ2dlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbGFuZ3VhZ2VEZXRlY3RvcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yID0gbW9kdWxlO1xuICAgIH1cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdpMThuRm9ybWF0Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQgPSBtb2R1bGU7XG4gICAgfVxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ3Bvc3RQcm9jZXNzb3InKSB7XG4gICAgICBwb3N0UHJvY2Vzc29yLmFkZFBvc3RQcm9jZXNzb3IobW9kdWxlKTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnZm9ybWF0dGVyJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmZvcm1hdHRlciA9IG1vZHVsZTtcbiAgICB9XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnM3JkUGFydHknKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwucHVzaChtb2R1bGUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRSZXNvbHZlZExhbmd1YWdlKGwpIHtcbiAgICBpZiAoIWwgfHwgIXRoaXMubGFuZ3VhZ2VzKSByZXR1cm47XG4gICAgaWYgKFsnY2ltb2RlJywgJ2RldiddLmluZGV4T2YobCkgPiAtMSkgcmV0dXJuO1xuICAgIGZvciAobGV0IGxpID0gMDsgbGkgPCB0aGlzLmxhbmd1YWdlcy5sZW5ndGg7IGxpKyspIHtcbiAgICAgIGNvbnN0IGxuZ0luTG5ncyA9IHRoaXMubGFuZ3VhZ2VzW2xpXTtcbiAgICAgIGlmIChbJ2NpbW9kZScsICdkZXYnXS5pbmRleE9mKGxuZ0luTG5ncykgPiAtMSkgY29udGludWU7XG4gICAgICBpZiAodGhpcy5zdG9yZS5oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobG5nSW5MbmdzKSkge1xuICAgICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSBsbmdJbkxuZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjaGFuZ2VMYW5ndWFnZShsbmcsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IGxuZztcbiAgICBjb25zdCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5naW5nJywgbG5nKTtcbiAgICBjb25zdCBzZXRMbmdQcm9wcyA9IGwgPT4ge1xuICAgICAgdGhpcy5sYW5ndWFnZSA9IGw7XG4gICAgICB0aGlzLmxhbmd1YWdlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobCk7XG4gICAgICB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UobCk7XG4gICAgfTtcbiAgICBjb25zdCBkb25lID0gKGVyciwgbCkgPT4ge1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgdGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbWl0KCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG8gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi50KC4uLmFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBzZXRMbmcgPSBsbmdzID0+IHtcbiAgICAgIGlmICghbG5nICYmICFsbmdzICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgbG5ncyA9IFtdO1xuICAgICAgY29uc3QgbCA9IHR5cGVvZiBsbmdzID09PSAnc3RyaW5nJyA/IGxuZ3MgOiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGxuZ3MpO1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2V0TG5nUHJvcHMobCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zbGF0b3IubGFuZ3VhZ2UpIHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcbiAgICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UpIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZShsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9hZFJlc291cmNlcyhsLCBlcnIgPT4ge1xuICAgICAgICBkb25lKGVyciwgbCk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBzZXRMbmcodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTtcbiAgICB9IGVsc2UgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYykge1xuICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKS50aGVuKHNldExuZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuZGV0ZWN0KHNldExuZyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldExuZyhsbmcpO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZ2V0Rml4ZWRUKGxuZywgbnMsIGtleVByZWZpeCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIGNvbnN0IGZpeGVkVCA9IGZ1bmN0aW9uIChrZXksIG9wdHMpIHtcbiAgICAgIGxldCBvcHRpb25zO1xuICAgICAgaWYgKHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBuZXcgQXJyYXkoX2xlbjMgPiAyID8gX2xlbjMgLSAyIDogMCksIF9rZXkzID0gMjsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICAgIHJlc3RbX2tleTMgLSAyXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IF90aGlzMy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKFtrZXksIG9wdHNdLmNvbmNhdChyZXN0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMubG5nID0gb3B0aW9ucy5sbmcgfHwgZml4ZWRULmxuZztcbiAgICAgIG9wdGlvbnMubG5ncyA9IG9wdGlvbnMubG5ncyB8fCBmaXhlZFQubG5ncztcbiAgICAgIG9wdGlvbnMubnMgPSBvcHRpb25zLm5zIHx8IGZpeGVkVC5ucztcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAhPT0gJycpIG9wdGlvbnMua2V5UHJlZml4ID0gb3B0aW9ucy5rZXlQcmVmaXggfHwga2V5UHJlZml4IHx8IGZpeGVkVC5rZXlQcmVmaXg7XG4gICAgICBjb25zdCBrZXlTZXBhcmF0b3IgPSBfdGhpczMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuICAgICAgbGV0IHJlc3VsdEtleTtcbiAgICAgIGlmIChvcHRpb25zLmtleVByZWZpeCAmJiBBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgcmVzdWx0S2V5ID0ga2V5Lm1hcChrID0+IGAke29wdGlvbnMua2V5UHJlZml4fSR7a2V5U2VwYXJhdG9yfSR7a31gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdEtleSA9IG9wdGlvbnMua2V5UHJlZml4ID8gYCR7b3B0aW9ucy5rZXlQcmVmaXh9JHtrZXlTZXBhcmF0b3J9JHtrZXl9YCA6IGtleTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczMudChyZXN1bHRLZXksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiBsbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBmaXhlZFQubG5nID0gbG5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaXhlZFQubG5ncyA9IGxuZztcbiAgICB9XG4gICAgZml4ZWRULm5zID0gbnM7XG4gICAgZml4ZWRULmtleVByZWZpeCA9IGtleVByZWZpeDtcbiAgICByZXR1cm4gZml4ZWRUO1xuICB9XG4gIHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRvciAmJiB0aGlzLnRyYW5zbGF0b3IudHJhbnNsYXRlKC4uLmFyZ3VtZW50cyk7XG4gIH1cbiAgZXhpc3RzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0b3IgJiYgdGhpcy50cmFuc2xhdG9yLmV4aXN0cyguLi5hcmd1bWVudHMpO1xuICB9XG4gIHNldERlZmF1bHROYW1lc3BhY2UobnMpIHtcbiAgICB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TID0gbnM7XG4gIH1cbiAgaGFzTG9hZGVkTmFtZXNwYWNlKG5zKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGlmICghdGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG5leHQgd2FzIG5vdCBpbml0aWFsaXplZCcsIHRoaXMubGFuZ3VhZ2VzKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmxhbmd1YWdlcyB8fCAhdGhpcy5sYW5ndWFnZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG4ubGFuZ3VhZ2VzIHdlcmUgdW5kZWZpbmVkIG9yIGVtcHR5JywgdGhpcy5sYW5ndWFnZXMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBsbmcgPSBvcHRpb25zLmxuZyB8fCB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgfHwgdGhpcy5sYW5ndWFnZXNbMF07XG4gICAgY29uc3QgZmFsbGJhY2tMbmcgPSB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgOiBmYWxzZTtcbiAgICBjb25zdCBsYXN0TG5nID0gdGhpcy5sYW5ndWFnZXNbdGhpcy5sYW5ndWFnZXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxuZy50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJykgcmV0dXJuIHRydWU7XG4gICAgY29uc3QgbG9hZE5vdFBlbmRpbmcgPSAobCwgbikgPT4ge1xuICAgICAgY29uc3QgbG9hZFN0YXRlID0gdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnN0YXRlW2Ake2x9fCR7bn1gXTtcbiAgICAgIHJldHVybiBsb2FkU3RhdGUgPT09IC0xIHx8IGxvYWRTdGF0ZSA9PT0gMCB8fCBsb2FkU3RhdGUgPT09IDI7XG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5wcmVjaGVjaykge1xuICAgICAgY29uc3QgcHJlUmVzdWx0ID0gb3B0aW9ucy5wcmVjaGVjayh0aGlzLCBsb2FkTm90UGVuZGluZyk7XG4gICAgICBpZiAocHJlUmVzdWx0ICE9PSB1bmRlZmluZWQpIHJldHVybiBwcmVSZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kIHx8IHRoaXMub3B0aW9ucy5yZXNvdXJjZXMgJiYgIXRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcykgcmV0dXJuIHRydWU7XG4gICAgaWYgKGxvYWROb3RQZW5kaW5nKGxuZywgbnMpICYmICghZmFsbGJhY2tMbmcgfHwgbG9hZE5vdFBlbmRpbmcobGFzdExuZywgbnMpKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGxvYWROYW1lc3BhY2VzKG5zLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5ucykge1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5zID09PSAnc3RyaW5nJykgbnMgPSBbbnNdO1xuICAgIG5zLmZvckVhY2gobiA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSB0aGlzLm9wdGlvbnMubnMucHVzaChuKTtcbiAgICB9KTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgbG9hZExhbmd1YWdlcyhsbmdzLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBpZiAodHlwZW9mIGxuZ3MgPT09ICdzdHJpbmcnKSBsbmdzID0gW2xuZ3NdO1xuICAgIGNvbnN0IHByZWxvYWRlZCA9IHRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IFtdO1xuICAgIGNvbnN0IG5ld0xuZ3MgPSBsbmdzLmZpbHRlcihsbmcgPT4gcHJlbG9hZGVkLmluZGV4T2YobG5nKSA8IDAgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkQ29kZShsbmcpKTtcbiAgICBpZiAoIW5ld0xuZ3MubGVuZ3RoKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkID0gcHJlbG9hZGVkLmNvbmNhdChuZXdMbmdzKTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoZXJyID0+IHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQ7XG4gIH1cbiAgZGlyKGxuZykge1xuICAgIGlmICghbG5nKSBsbmcgPSB0aGlzLnJlc29sdmVkTGFuZ3VhZ2UgfHwgKHRoaXMubGFuZ3VhZ2VzICYmIHRoaXMubGFuZ3VhZ2VzLmxlbmd0aCA+IDAgPyB0aGlzLmxhbmd1YWdlc1swXSA6IHRoaXMubGFuZ3VhZ2UpO1xuICAgIGlmICghbG5nKSByZXR1cm4gJ3J0bCc7XG4gICAgY29uc3QgcnRsTG5ncyA9IFsnYXInLCAnc2h1JywgJ3NxcicsICdzc2gnLCAneGFhJywgJ3loZCcsICd5dWQnLCAnYWFvJywgJ2FiaCcsICdhYnYnLCAnYWNtJywgJ2FjcScsICdhY3cnLCAnYWN4JywgJ2FjeScsICdhZGYnLCAnYWRzJywgJ2FlYicsICdhZWMnLCAnYWZiJywgJ2FqcCcsICdhcGMnLCAnYXBkJywgJ2FyYicsICdhcnEnLCAnYXJzJywgJ2FyeScsICdhcnonLCAnYXV6JywgJ2F2bCcsICdheWgnLCAnYXlsJywgJ2F5bicsICdheXAnLCAnYmJ6JywgJ3BnYScsICdoZScsICdpdycsICdwcycsICdwYnQnLCAncGJ1JywgJ3BzdCcsICdwcnAnLCAncHJkJywgJ3VnJywgJ3VyJywgJ3lkZCcsICd5ZHMnLCAneWloJywgJ2ppJywgJ3lpJywgJ2hibycsICdtZW4nLCAneG1uJywgJ2ZhJywgJ2pwcicsICdwZW8nLCAncGVzJywgJ3BycycsICdkdicsICdzYW0nLCAnY2tiJ107XG4gICAgY29uc3QgbGFuZ3VhZ2VVdGlscyA9IHRoaXMuc2VydmljZXMgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzIHx8IG5ldyBMYW5ndWFnZVV0aWwoZ2V0KCkpO1xuICAgIHJldHVybiBydGxMbmdzLmluZGV4T2YobGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShsbmcpKSA+IC0xIHx8IGxuZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJy1hcmFiJykgPiAxID8gJ3J0bCcgOiAnbHRyJztcbiAgfVxuICBzdGF0aWMgY3JlYXRlSW5zdGFuY2UoKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGxldCBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBuZXcgSTE4bihvcHRpb25zLCBjYWxsYmFjayk7XG4gIH1cbiAgY2xvbmVJbnN0YW5jZSgpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgbGV0IGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBub29wO1xuICAgIGNvbnN0IGZvcmtSZXNvdXJjZVN0b3JlID0gb3B0aW9ucy5mb3JrUmVzb3VyY2VTdG9yZTtcbiAgICBpZiAoZm9ya1Jlc291cmNlU3RvcmUpIGRlbGV0ZSBvcHRpb25zLmZvcmtSZXNvdXJjZVN0b3JlO1xuICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSB7XG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4ue1xuICAgICAgICBpc0Nsb25lOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjbG9uZSA9IG5ldyBJMThuKG1lcmdlZE9wdGlvbnMpO1xuICAgIGlmIChvcHRpb25zLmRlYnVnICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5wcmVmaXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xvbmUubG9nZ2VyID0gY2xvbmUubG9nZ2VyLmNsb25lKG9wdGlvbnMpO1xuICAgIH1cbiAgICBjb25zdCBtZW1iZXJzVG9Db3B5ID0gWydzdG9yZScsICdzZXJ2aWNlcycsICdsYW5ndWFnZSddO1xuICAgIG1lbWJlcnNUb0NvcHkuZm9yRWFjaChtID0+IHtcbiAgICAgIGNsb25lW21dID0gdGhpc1ttXTtcbiAgICB9KTtcbiAgICBjbG9uZS5zZXJ2aWNlcyA9IHtcbiAgICAgIC4uLnRoaXMuc2VydmljZXNcbiAgICB9O1xuICAgIGNsb25lLnNlcnZpY2VzLnV0aWxzID0ge1xuICAgICAgaGFzTG9hZGVkTmFtZXNwYWNlOiBjbG9uZS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChjbG9uZSlcbiAgICB9O1xuICAgIGlmIChmb3JrUmVzb3VyY2VTdG9yZSkge1xuICAgICAgY2xvbmUuc3RvcmUgPSBuZXcgUmVzb3VyY2VTdG9yZSh0aGlzLnN0b3JlLmRhdGEsIG1lcmdlZE9wdGlvbnMpO1xuICAgICAgY2xvbmUuc2VydmljZXMucmVzb3VyY2VTdG9yZSA9IGNsb25lLnN0b3JlO1xuICAgIH1cbiAgICBjbG9uZS50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoY2xvbmUuc2VydmljZXMsIG1lcmdlZE9wdGlvbnMpO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuNCA+IDEgPyBfbGVuNCAtIDEgOiAwKSwgX2tleTQgPSAxOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTQgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG4gICAgICBjbG9uZS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9KTtcbiAgICBjbG9uZS5pbml0KG1lcmdlZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBjbG9uZS50cmFuc2xhdG9yLm9wdGlvbnMgPSBtZXJnZWRPcHRpb25zO1xuICAgIGNsb25lLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscyA9IHtcbiAgICAgIGhhc0xvYWRlZE5hbWVzcGFjZTogY2xvbmUuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQoY2xvbmUpXG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmU7XG4gIH1cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBzdG9yZTogdGhpcy5zdG9yZSxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlLFxuICAgICAgbGFuZ3VhZ2VzOiB0aGlzLmxhbmd1YWdlcyxcbiAgICAgIHJlc29sdmVkTGFuZ3VhZ2U6IHRoaXMucmVzb2x2ZWRMYW5ndWFnZVxuICAgIH07XG4gIH1cbn1cbmNvbnN0IGluc3RhbmNlID0gSTE4bi5jcmVhdGVJbnN0YW5jZSgpO1xuaW5zdGFuY2UuY3JlYXRlSW5zdGFuY2UgPSBJMThuLmNyZWF0ZUluc3RhbmNlO1xuXG5jb25zdCBjcmVhdGVJbnN0YW5jZSA9IGluc3RhbmNlLmNyZWF0ZUluc3RhbmNlO1xuY29uc3QgZGlyID0gaW5zdGFuY2UuZGlyO1xuY29uc3QgaW5pdCA9IGluc3RhbmNlLmluaXQ7XG5jb25zdCBsb2FkUmVzb3VyY2VzID0gaW5zdGFuY2UubG9hZFJlc291cmNlcztcbmNvbnN0IHJlbG9hZFJlc291cmNlcyA9IGluc3RhbmNlLnJlbG9hZFJlc291cmNlcztcbmNvbnN0IHVzZSA9IGluc3RhbmNlLnVzZTtcbmNvbnN0IGNoYW5nZUxhbmd1YWdlID0gaW5zdGFuY2UuY2hhbmdlTGFuZ3VhZ2U7XG5jb25zdCBnZXRGaXhlZFQgPSBpbnN0YW5jZS5nZXRGaXhlZFQ7XG5jb25zdCB0ID0gaW5zdGFuY2UudDtcbmNvbnN0IGV4aXN0cyA9IGluc3RhbmNlLmV4aXN0cztcbmNvbnN0IHNldERlZmF1bHROYW1lc3BhY2UgPSBpbnN0YW5jZS5zZXREZWZhdWx0TmFtZXNwYWNlO1xuY29uc3QgaGFzTG9hZGVkTmFtZXNwYWNlID0gaW5zdGFuY2UuaGFzTG9hZGVkTmFtZXNwYWNlO1xuY29uc3QgbG9hZE5hbWVzcGFjZXMgPSBpbnN0YW5jZS5sb2FkTmFtZXNwYWNlcztcbmNvbnN0IGxvYWRMYW5ndWFnZXMgPSBpbnN0YW5jZS5sb2FkTGFuZ3VhZ2VzO1xuXG5leHBvcnQgeyBjaGFuZ2VMYW5ndWFnZSwgY3JlYXRlSW5zdGFuY2UsIGluc3RhbmNlIGFzIGRlZmF1bHQsIGRpciwgZXhpc3RzLCBnZXRGaXhlZFQsIGhhc0xvYWRlZE5hbWVzcGFjZSwgaW5pdCwgbG9hZExhbmd1YWdlcywgbG9hZE5hbWVzcGFjZXMsIGxvYWRSZXNvdXJjZXMsIHJlbG9hZFJlc291cmNlcywgc2V0RGVmYXVsdE5hbWVzcGFjZSwgdCwgdXNlIH07XG4iLCAiLy8gc3JjL3VpL2NhcmRDb250YWluZXIvY2FyZENvbnRhaW5lci50c1xuXG5pbXBvcnQgeyBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IENhcmROYXZpZ2F0b3JQbHVnaW4gZnJvbSAnbWFpbic7XG5pbXBvcnQgeyBDYXJkTWFrZXIgfSBmcm9tICcuL2NhcmRNYWtlcidcbmltcG9ydCB7IHNvcnRGaWxlcyB9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlscyc7XG5pbXBvcnQgeyBDYXJkLCBTb3J0Q3JpdGVyaW9uIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIENhcmRDb250YWluZXIge1xuICAgIHByaXZhdGUgbGVhZjogV29ya3NwYWNlTGVhZjtcbiAgICBwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgY2FyZE1ha2VyOiBDYXJkTWFrZXI7XG4gICAgcHJpdmF0ZSBwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW47XG4gICAgcHVibGljIGlzVmVydGljYWw6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0b29sYmFySGVpZ2h0OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjYXJkR2FwOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IENhcmROYXZpZ2F0b3JQbHVnaW4sIGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMubGVhZiA9IGxlYWY7XG4gICAgICAgIHRoaXMuY2FyZE1ha2VyID0gbmV3IENhcmRNYWtlcih0aGlzLnBsdWdpbik7XG4gICAgICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRvb2xiYXJIZWlnaHQgPSB0aGlzLmdldENTU1ZhcmlhYmxlKCctLWNhcmQtbmF2aWdhdG9yLXRvb2xiYXItaGVpZ2h0JywgNTApO1xuICAgICAgICB0aGlzLmNhcmRHYXAgPSB0aGlzLmdldENTU1ZhcmlhYmxlKCctLWNhcmQtbmF2aWdhdG9yLWdhcCcsIDEwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENTU1ZhcmlhYmxlKHZhcmlhYmxlTmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHZhbHVlU3RyID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpXG4gICAgICAgICAgICAuZ2V0UHJvcGVydHlWYWx1ZSh2YXJpYWJsZU5hbWUpXG4gICAgICAgICAgICAudHJpbSgpO1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsdWVTdHIpIHx8IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XG4gICAgICAgIGF3YWl0IHRoaXMud2FpdEZvckxlYWZDcmVhdGlvbigpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnRzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29udGFpbmVyU3R5bGUoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG5cdHByaXZhdGUgYXN5bmMgd2FpdEZvckxlYWZDcmVhdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IGNoZWNrTGVhZiA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IDAgJiYgdGhpcy5jb250YWluZXJFbC5jbGllbnRIZWlnaHQgPiAwKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShjaGVja0xlYWYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y2hlY2tMZWFmKCk7XG5cdFx0fSk7XG5cdH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJFdmVudHMoKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udHJpZ2dlclJlZnJlc2goKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQub24oJ21vZGlmeScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cblx0c2V0T3JpZW50YXRpb24oaXNWZXJ0aWNhbDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lclN0eWxlKCk7XG5cdFx0dGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVDb250YWluZXJTdHlsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZCgnY2FyZC1uYXZpZ2F0b3ItY29udGFpbmVyJyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC50b2dnbGUoJ3ZlcnRpY2FsJywgdGhpcy5pc1ZlcnRpY2FsKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgnaG9yaXpvbnRhbCcsICF0aGlzLmlzVmVydGljYWwpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdmaXhlZC1oZWlnaHQnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maXhlZENhcmRIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCdmbGV4aWJsZS1oZWlnaHQnLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWRDYXJkSGVpZ2h0KTtcblxuICAgICAgICAgICAgLy8gQ1NTIFx1QkNDMFx1QzIxOCBcdUMxMjRcdUM4MTVcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZHMtcGVyLXZpZXcnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXcudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhcmQtbmF2aWdhdG9yLWdhcCcsIGAke3RoaXMuY2FyZEdhcH1weGApO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYXJkLW5hdmlnYXRvci10b29sYmFyLWhlaWdodCcsIGAke3RoaXMudG9vbGJhckhlaWdodH1weGApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICAgICAgbGV0IGZvbGRlcjogVEZvbGRlciB8IG51bGwgPSBudWxsO1xuXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVNlbGVjdGVkRm9sZGVyICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyKSB7XG5cdFx0XHRjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkRm9sZGVyKTtcblx0XHRcdGlmIChhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdGZvbGRlciA9IGFic3RyYWN0RmlsZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihgU2VsZWN0ZWQgcGF0aCBpcyBub3QgYSBmb2xkZXI6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRGb2xkZXJ9YCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdGZvbGRlciA9IGFjdGl2ZUZpbGU/LnBhcmVudCB8fCBudWxsO1xuXHRcdH1cblxuICAgICAgICBpZiAoIWZvbGRlciB8fCAhdGhpcy5jb250YWluZXJFbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xuICAgICAgICBjb25zdCBzb3J0ZWRGaWxlcyA9IHNvcnRGaWxlcyhmaWxlcywgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydENyaXRlcmlvbiwgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydE9yZGVyKTtcbiAgICAgICAgY29uc3QgY2FyZHNEYXRhID0gYXdhaXQgUHJvbWlzZS5hbGwoc29ydGVkRmlsZXMubWFwKGZpbGUgPT4gdGhpcy5jYXJkTWFrZXIuY3JlYXRlQ2FyZChmaWxlKSkpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQ2FyZHMoY2FyZHNEYXRhKTtcbiAgICB9XG5cblx0cHJpdmF0ZSByZW5kZXJDYXJkcyhjYXJkc0RhdGE6IENhcmRbXSkge1xuXHRcdGNvbnN0IGNvbnRhaW5lckVsID0gdGhpcy5jb250YWluZXJFbDtcblx0XHRpZiAoIWNvbnRhaW5lckVsKSByZXR1cm47XG5cdFxuXHRcdC8vIFN0b3JlIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxuXHRcdGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSBjb250YWluZXJFbC5zY3JvbGxUb3A7XG5cdFx0Y29uc3QgY3VycmVudFNjcm9sbExlZnQgPSBjb250YWluZXJFbC5zY3JvbGxMZWZ0O1xuXHRcblx0XHQvLyBGaW5kIHRoZSBhY3RpdmUgY2FyZCdzIGluZGV4IGJlZm9yZSBjbGVhcmluZ1xuXHRcdGNvbnN0IGFjdGl2ZUNhcmRJbmRleCA9IEFycmF5LmZyb20oY29udGFpbmVyRWwuY2hpbGRyZW4pLmZpbmRJbmRleChcblx0XHRcdGNoaWxkID0+IGNoaWxkLmNsYXNzTGlzdC5jb250YWlucygnY2FyZC1uYXZpZ2F0b3ItYWN0aXZlJylcblx0XHQpO1xuXHRcblx0XHQvLyBDbGVhciBleGlzdGluZyBjYXJkc1xuXHRcdHdoaWxlIChjb250YWluZXJFbC5maXJzdENoaWxkKSB7XG5cdFx0XHRjb250YWluZXJFbC5yZW1vdmVDaGlsZChjb250YWluZXJFbC5maXJzdENoaWxkKTtcblx0XHR9XG5cdFxuXHRcdC8vIFVwZGF0ZSBjb250YWluZXIgY2xhc3NlcyBiYXNlZCBvbiBsZWFmIG9yaWVudGF0aW9uXG5cdFx0Y29udGFpbmVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmVydGljYWwnLCB0aGlzLmlzVmVydGljYWwpO1xuXHRcdGNvbnRhaW5lckVsLmNsYXNzTGlzdC50b2dnbGUoJ2hvcml6b250YWwnLCAhdGhpcy5pc1ZlcnRpY2FsKTtcblx0XG5cdFx0Ly8gU2V0IHRoZSBDU1MgdmFyaWFibGUgZm9yIGNhcmRzIHBlciB2aWV3XG5cdFx0Y29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZHMtcGVyLXZpZXcnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYXJkc1BlclZpZXcudG9TdHJpbmcoKSk7XG5cdFxuXHRcdGNhcmRzRGF0YS5mb3JFYWNoKChjYXJkRGF0YSwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNhcmRNYWtlci5jcmVhdGVDYXJkRWxlbWVudChjYXJkRGF0YSk7XG5cdFx0XHRcblx0XHRcdC8vIEFwcGx5IGNsYXNzZXMgYmFzZWQgb24gbGVhZiBvcmllbnRhdGlvbiBhbmQgZml4ZWQtaGVpZ2h0IHNldHRpbmdcblx0XHRcdGNhcmQuY2xhc3NMaXN0LmFkZCh0aGlzLmlzVmVydGljYWwgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnKTtcblx0XHRcdGNhcmQuY2xhc3NMaXN0LnRvZ2dsZSgnZml4ZWQtaGVpZ2h0JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWRDYXJkSGVpZ2h0KTtcblx0XG5cdFx0XHRpZiAoY2FyZERhdGEuZmlsZSA9PT0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpIHtcblx0XHRcdFx0Y2FyZC5jbGFzc0xpc3QuYWRkKCdjYXJkLW5hdmlnYXRvci1hY3RpdmUnKTtcblx0XHRcdH1cblx0XG5cdFx0XHRjb250YWluZXJFbC5hcHBlbmRDaGlsZChjYXJkKTtcblx0XHR9KTtcblx0XG5cdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb25cblx0XHRjb250YWluZXJFbC5zY3JvbGxUb3AgPSBjdXJyZW50U2Nyb2xsVG9wO1xuXHRcdGNvbnRhaW5lckVsLnNjcm9sbExlZnQgPSBjdXJyZW50U2Nyb2xsTGVmdDtcblx0XG5cdFx0Y29uc3QgbmV3QWN0aXZlQ2FyZEluZGV4ID0gQXJyYXkuZnJvbShjb250YWluZXJFbC5jaGlsZHJlbikuZmluZEluZGV4KFxuXHRcdFx0Y2hpbGQgPT4gY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkLW5hdmlnYXRvci1hY3RpdmUnKVxuXHRcdCk7XG5cdFxuXHRcdGlmIChhY3RpdmVDYXJkSW5kZXggIT09IG5ld0FjdGl2ZUNhcmRJbmRleCAmJiBuZXdBY3RpdmVDYXJkSW5kZXggIT09IC0xKSB7XG5cdFx0XHR0aGlzLnNjcm9sbFRvQWN0aXZlQ2FyZChmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzY3JvbGxUb0FjdGl2ZUNhcmQoYW5pbWF0ZSA9IHRydWUpIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyRWwpIHJldHVybjtcblx0XHRjb25zdCBhY3RpdmVDYXJkID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItYWN0aXZlJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRcdGlmICghYWN0aXZlQ2FyZCkgcmV0dXJuO1xuXHRcblx0XHRjb25zdCBjb250YWluZXJSZWN0ID0gdGhpcy5jb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRjb25zdCBhY3RpdmVDYXJkUmVjdCA9IGFjdGl2ZUNhcmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFxuXHRcdGxldCBvZmZzZXQgPSAwO1xuXHRcdGxldCBzY3JvbGxQcm9wZXJ0eTogJ3Njcm9sbFRvcCcgfCAnc2Nyb2xsTGVmdCc7XG5cdFxuXHRcdGlmICh0aGlzLmlzVmVydGljYWwpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lclZpc2libGVIZWlnaHQgPSBjb250YWluZXJSZWN0LmhlaWdodDtcblx0XHRcdGNvbnN0IGNhcmRIZWlnaHQgPSBhY3RpdmVDYXJkUmVjdC5oZWlnaHQ7XG5cdFx0XHRvZmZzZXQgPSBhY3RpdmVDYXJkUmVjdC50b3AgLSBjb250YWluZXJSZWN0LnRvcCAtIChjb250YWluZXJWaXNpYmxlSGVpZ2h0IC0gY2FyZEhlaWdodCkgLyAyO1xuXHRcdFx0c2Nyb2xsUHJvcGVydHkgPSAnc2Nyb2xsVG9wJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgY29udGFpbmVyVmlzaWJsZVdpZHRoID0gY29udGFpbmVyUmVjdC53aWR0aDtcblx0XHRcdGNvbnN0IGNhcmRXaWR0aCA9IGFjdGl2ZUNhcmRSZWN0LndpZHRoO1xuXHRcdFx0b2Zmc2V0ID0gYWN0aXZlQ2FyZFJlY3QubGVmdCAtIGNvbnRhaW5lclJlY3QubGVmdCAtIChjb250YWluZXJWaXNpYmxlV2lkdGggLSBjYXJkV2lkdGgpIC8gMjtcblx0XHRcdHNjcm9sbFByb3BlcnR5ID0gJ3Njcm9sbExlZnQnO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgbmV3U2Nyb2xsUG9zaXRpb24gPSB0aGlzLmNvbnRhaW5lckVsW3Njcm9sbFByb3BlcnR5XSArIG9mZnNldDtcblx0XG5cdFx0aWYgKGFuaW1hdGUpIHtcblx0XHRcdGNvbnN0IHN0YXJ0ID0gdGhpcy5jb250YWluZXJFbFtzY3JvbGxQcm9wZXJ0eV07XG5cdFx0XHRjb25zdCBjaGFuZ2UgPSBuZXdTY3JvbGxQb3NpdGlvbiAtIHN0YXJ0O1xuXHRcdFx0Y29uc3QgZHVyYXRpb24gPSAzMDA7IC8vIG1zXG5cdFx0XHRsZXQgc3RhcnRUaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblx0XG5cdFx0XHRjb25zdCBhbmltYXRlU2Nyb2xsID0gKGN1cnJlbnRUaW1lOiBudW1iZXIpID0+IHtcblx0XHRcdFx0aWYgKHN0YXJ0VGltZSA9PT0gbnVsbCkgc3RhcnRUaW1lID0gY3VycmVudFRpbWU7XG5cdFx0XHRcdGNvbnN0IHRpbWVFbGFwc2VkID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XG5cdFx0XHRcdGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4odGltZUVsYXBzZWQgLyBkdXJhdGlvbiwgMSk7XG5cdFx0XHRcdGNvbnN0IGVhc2VQcm9ncmVzcyA9IDAuNSAtIE1hdGguY29zKHByb2dyZXNzICogTWF0aC5QSSkgLyAyO1xuXHRcblx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwpIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsW3Njcm9sbFByb3BlcnR5XSA9IHN0YXJ0ICsgY2hhbmdlICogZWFzZVByb2dyZXNzO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRpZiAodGltZUVsYXBzZWQgPCBkdXJhdGlvbiAmJiB0aGlzLmNvbnRhaW5lckVsKSB7XG5cdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVTY3JvbGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlU2Nyb2xsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jb250YWluZXJFbFtzY3JvbGxQcm9wZXJ0eV0gPSBuZXdTY3JvbGxQb3NpdGlvbjtcblx0XHR9XG5cdH1cblx0XG5cdHB1YmxpYyBjZW50ZXJBY3RpdmVDYXJkKCkge1xuXHRcdHRoaXMuc2Nyb2xsVG9BY3RpdmVDYXJkKHRydWUpO1xuXHR9XG5cbiAgICBzY3JvbGxVcChjb3VudCA9IDEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IHRoaXMuZ2V0Q2FyZEhlaWdodCgpICogY291bnQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnNjcm9sbEJ5KHsgdG9wOiAtc2Nyb2xsQW1vdW50LCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxBbW91bnQgPSB0aGlzLmdldENhcmRXaWR0aCgpICogY291bnQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnNjcm9sbEJ5KHsgbGVmdDogLXNjcm9sbEFtb3VudCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2Nyb2xsRG93bihjb3VudCA9IDEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IHRoaXMuZ2V0Q2FyZEhlaWdodCgpICogY291bnQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnNjcm9sbEJ5KHsgdG9wOiBzY3JvbGxBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IHRoaXMuZ2V0Q2FyZFdpZHRoKCkgKiBjb3VudDtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsQnkoeyBsZWZ0OiBzY3JvbGxBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNjcm9sbExlZnQoY291bnQgPSAxKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY3JvbGxBbW91bnQgPSB0aGlzLmdldENhcmRXaWR0aCgpICogY291bnQ7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsQnkoeyBsZWZ0OiAtc2Nyb2xsQW1vdW50LCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgfVxuXG4gICAgc2Nyb2xsUmlnaHQoY291bnQgPSAxKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXJFbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY3JvbGxBbW91bnQgPSB0aGlzLmdldENhcmRXaWR0aCgpICogY291bnQ7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsQnkoeyBsZWZ0OiBzY3JvbGxBbW91bnQsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENhcmRIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgZmlyc3RDYXJkID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItY2FyZCcpO1xuICAgICAgICByZXR1cm4gZmlyc3RDYXJkID8gZmlyc3RDYXJkLmNsaWVudEhlaWdodCA6IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDYXJkV2lkdGgoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckVsKSByZXR1cm4gMDtcbiAgICAgICAgY29uc3QgZmlyc3RDYXJkID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1uYXZpZ2F0b3ItY2FyZCcpO1xuICAgICAgICByZXR1cm4gZmlyc3RDYXJkID8gZmlyc3RDYXJkLmNsaWVudFdpZHRoIDogMDtcbiAgICB9XG5cbiAgICBzY3JvbGxUb0NlbnRlcigpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZUNhcmQoKTtcbiAgICB9XG5cblx0cHVibGljIGRpc3BsYXlDYXJkcyhmaWx0ZXJlZEZpbGVzOiBURmlsZVtdKSB7XG5cdH1cblxuICAgIHB1YmxpYyBhc3luYyBzZWFyY2hDYXJkcyhzZWFyY2hUZXJtOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcblxuICAgICAgICBjb25zdCBmb2xkZXIgPSBhY3RpdmVGaWxlLnBhcmVudDtcbiAgICAgICAgaWYgKCFmb2xkZXIpIHJldHVybjtcblxuICAgICAgICBjb25zdCBmaWxlcyA9IGZvbGRlci5jaGlsZHJlbi5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSk7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRmlsZXMgPSBhd2FpdCB0aGlzLmZpbHRlckZpbGVzQnlDb250ZW50KGZpbGVzLCBzZWFyY2hUZXJtKTtcblxuICAgICAgICBjb25zdCBjYXJkcyA9IGF3YWl0IFByb21pc2UuYWxsKGZpbHRlcmVkRmlsZXMubWFwKGZpbGUgPT4gdGhpcy5jYXJkTWFrZXIuY3JlYXRlQ2FyZChmaWxlKSkpO1xuICAgICAgICB0aGlzLnJlbmRlckNhcmRzKGNhcmRzKTtcbiAgICB9XG5cbiAgICBhc3luYyBkaXNwbGF5Q2FyZHNGb3JGb2xkZXIoZm9sZGVyOiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcbiAgICAgICAgY29uc3QgY2FyZHMgPSBhd2FpdCBQcm9taXNlLmFsbChmaWxlcy5tYXAoZmlsZSA9PiB0aGlzLmNhcmRNYWtlci5jcmVhdGVDYXJkKGZpbGUpKSk7XG4gICAgICAgIHRoaXMucmVuZGVyQ2FyZHMoY2FyZHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZmlsdGVyRmlsZXNCeUNvbnRlbnQoZmlsZXM6IFRGaWxlW10sIHNlYXJjaFRlcm06IHN0cmluZyk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBsb3dlcmNhc2VTZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZEZpbGVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgaWYgKGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2hUZXJtKSB8fFxuICAgICAgICAgICAgICAgIGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2hUZXJtKSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkRmlsZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmlsdGVyZWRGaWxlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc29ydENhcmRzKGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgb3JkZXI6ICdhc2MnIHwgJ2Rlc2MnKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRDcml0ZXJpb24gPSBjcml0ZXJpb247XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRPcmRlciA9IG9yZGVyO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4udHJpZ2dlclJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge31cbn1cbiIsICIvLyBzcmMvdWkvY2FyZENvbnRhaW5lci9jYXJkTWFrZXIudHNcblxuaW1wb3J0IHsgTWVudSwgVEZpbGUsIE1hcmtkb3duUmVuZGVyZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQ2FyZE5hdmlnYXRvclBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi8uLi9jb21tb24vdHlwZXMnO1xuaW1wb3J0IHsgc29ydEZpbGVzLCBzZXBhcmF0ZUZyb250bWF0dGVyQW5kQ29udGVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBDYXJkTWFrZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7fVxuXG5cdGFzeW5jIGdldENhcmRzRm9yQWN0aXZlRmlsZShhY3RpdmVGaWxlOiBURmlsZSk6IFByb21pc2U8Q2FyZFtdPiB7XG5cdFx0Y29uc3QgZm9sZGVyID0gYWN0aXZlRmlsZS5wYXJlbnQ7XG5cdFx0aWYgKCFmb2xkZXIpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdFx0Y29uc3QgZmlsZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gc29ydEZpbGVzKFxuXHRcdFx0ZmlsZXMsIFxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydENyaXRlcmlvbiwgXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0T3JkZXJcblx0XHQpO1xuXHRcdHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChzb3J0ZWRGaWxlcy5tYXAoZmlsZSA9PiB0aGlzLmNyZWF0ZUNhcmQoZmlsZSkpKTtcblx0fVxuXG4gICAgcHVibGljIGFzeW5jIGNyZWF0ZUNhcmQoZmlsZTogVEZpbGUpOiBQcm9taXNlPENhcmQ+IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICBjb25zdCB7IGNsZWFuQ29udGVudCB9ID0gc2VwYXJhdGVGcm9udG1hdHRlckFuZENvbnRlbnQoY29udGVudCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRXaXRob3V0SGVhZGVyID0gdGhpcy5yZW1vdmVGaXJzdEhlYWRlcihjbGVhbkNvbnRlbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIGZpbGVOYW1lOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RmlsZU5hbWUgPyBmaWxlLmJhc2VuYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZmlyc3RIZWFkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaXJzdEhlYWRlciA/IHRoaXMuZmluZEZpcnN0SGVhZGVyKGNsZWFuQ29udGVudCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29udGVudCA/IHRoaXMudHJ1bmNhdGVDb250ZW50KGNvbnRlbnRXaXRob3V0SGVhZGVyKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZUZpcnN0SGVhZGVyKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhlYWRlclJlZ2V4ID0gL14jK1xccysoLispJC9tO1xuICAgICAgICByZXR1cm4gY29udGVudC5yZXBsYWNlKGhlYWRlclJlZ2V4LCAnJykudHJpbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmluZEZpcnN0SGVhZGVyKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IGhlYWRlclJlZ2V4ID0gL14jK1xccysoLispJC9tO1xuICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goaGVhZGVyUmVnZXgpO1xuICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXS50cmltKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cnVuY2F0ZUNvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudExlbmd0aCAqIDEwMDtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoIDw9IG1heExlbmd0aCA/IGNvbnRlbnQgOiBjb250ZW50LnNsaWNlKDAsIG1heExlbmd0aCkgKyAnLi4uJztcbiAgICB9XG5cbiAgICBjcmVhdGVDYXJkRWxlbWVudChjYXJkOiBDYXJkKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjYXJkRWxlbWVudC5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItY2FyZCc7XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dGaWxlTmFtZSAmJiBjYXJkLmZpbGVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZUVsID0gY2FyZEVsZW1lbnQuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBjYXJkLmZpbGVOYW1lIH0pO1xuICAgICAgICAgICAgZmlsZU5hbWVFbC5jbGFzc05hbWUgPSAnY2FyZC1uYXZpZ2F0b3ItZmlsZW5hbWUnO1xuICAgICAgICAgICAgZmlsZU5hbWVFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1maWxlLW5hbWUtZm9udC1zaXplJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZU5hbWVTaXplfXB4YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpcnN0SGVhZGVyICYmIGNhcmQuZmlyc3RIZWFkZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckVsID0gY2FyZEVsZW1lbnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiBjYXJkLmZpcnN0SGVhZGVyIH0pO1xuICAgICAgICAgICAgaGVhZGVyRWwuY2xhc3NOYW1lID0gJ2NhcmQtbmF2aWdhdG9yLWZpcnN0LWhlYWRlcic7XG4gICAgICAgICAgICBoZWFkZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1maXJzdC1oZWFkZXItZm9udC1zaXplJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlyc3RIZWFkZXJTaXplfXB4YCk7XG4gICAgICAgIH1cblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93Q29udGVudCAmJiBjYXJkLmNvbnRlbnQpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnRFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhcmQtbmF2aWdhdG9yLWNvbnRlbnQnIH0pO1xuXHRcdFx0Y29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNvbnRlbnQtZm9udC1zaXplJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudFNpemV9cHhgKTtcblx0XHRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW5kZXJDb250ZW50QXNIdG1sKSB7XG5cdFx0XHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwcCxcblx0XHRcdFx0XHRjYXJkLmNvbnRlbnQsXG5cdFx0XHRcdFx0Y29udGVudEVsLFxuXHRcdFx0XHRcdGNhcmQuZmlsZS5wYXRoLFxuXHRcdFx0XHRcdHRoaXMucGx1Z2luXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250ZW50RWwudGV4dENvbnRlbnQgPSBjYXJkLmNvbnRlbnQ7XG5cdFx0XHRcdGNvbnRlbnRFbC5hZGRDbGFzcygnZWxsaXBzaXMnKTtcblx0XHRcdH1cblx0XHR9XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09PSBjYXJkLmZpbGUpIHtcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LmFkZENsYXNzKCdjYXJkLW5hdmlnYXRvci1hY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1Q0U3NFx1QjREQyBcdUMwRERcdUMxMzEgXHVENkM0IFx1QjREQ1x1Qjc5OFx1QURGOCBcdUM1NjQgXHVCNERDXHVCODZEIFx1QkMwRiBcdUIyRTRcdUI5NzggXHVDNzc4XHVEMTMwXHVCNzk5XHVDMTU4IFx1QzEyNFx1QzgxNVxuICAgICAgICB0aGlzLmFkZENhcmRJbnRlcmFjdGlvbnMoY2FyZEVsZW1lbnQsIGNhcmQpO1xuXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZENhcmRJbnRlcmFjdGlvbnMoY2FyZEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjYXJkOiBDYXJkKSB7XG4gICAgICAgIGNhcmRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5vcGVuRmlsZShjYXJkLmZpbGUpKTtcbiAgICAgICAgdGhpcy5zZXR1cERyYWdBbmREcm9wKGNhcmRFbGVtZW50LCBjYXJkKTtcbiAgICAgICAgdGhpcy5zZXR1cENvbnRleHRNZW51KGNhcmRFbGVtZW50LCBjYXJkLmZpbGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBEcmFnQW5kRHJvcChjYXJkRWxlbWVudDogSFRNTEVsZW1lbnQsIGNhcmQ6IENhcmQpIHtcbiAgICAgICAgY2FyZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAndHJ1ZScpO1xuICAgICAgICBjYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZHJhZ0NvbnRlbnQgPSAnJztcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kcmFnRHJvcENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHVDRTc0XHVCNERDXHVDNUQwIFx1RDQ1Q1x1QzJEQ1x1QjQxOFx1QjI5NCBcdUQ1NkRcdUJBQTlcdUM1RDAgXHVCNTMwXHVCNzdDIFx1QjREQ1x1Qjc5OFx1QURGOCBcdUM1NjQgXHVCNERDXHVCODZEIFx1QzJEQyBcdUMwQkRcdUM3ODVcdUQ1NjAgXHVCMEI0XHVDNkE5IFx1QUNCMFx1QzgxNVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpbGVOYW1lICYmIGNhcmQuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdDb250ZW50ICs9IGAjIyAke2NhcmQuZmlsZU5hbWV9XFxuXFxuYDsgLy8gXHVEMzBDXHVDNzdDXHVCQTg1IFx1QzU1RVx1QzVEMCBcdUQ1RTRcdUIzNTQgXHVDRDk0XHVBQzAwXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ZpcnN0SGVhZGVyICYmIGNhcmQuZmlyc3RIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdDb250ZW50ICs9IGAjICR7Y2FyZC5maXJzdEhlYWRlcn1cXG5cXG5gOyAvLyBcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUM1NUVcdUM1RDAgXHVENUU0XHVCMzU0IFx1Q0Q5NFx1QUMwMFxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dDb250ZW50ICYmIGNhcmQuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0NvbnRlbnQgKz0gYCR7Y2FyZC5jb250ZW50fVxcblxcbmA7IC8vIFx1QkNGOFx1QkIzOCBcdUIwQjRcdUM2QTkgXHVDRDk0XHVBQzAwXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ0NvbnRlbnQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdUI5Q0NcdUM1N0QgXHVENDVDXHVDMkRDIFx1QzEyNFx1QzgxNVx1Qzc3NCBcdUI0MThcdUM1QjRcdUM3ODhcdUM5QzAgXHVDNTRBXHVDNzNDXHVCQTc0IFx1QUUzMFx1QkNGOCBcdUQzMENcdUM3N0MgXHVCOUMxXHVEMDZDIFx1QzBCRFx1Qzc4NVxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0NvbnRlbnQgPSBgW1ske2NhcmQuZmlsZS5uYW1lfV1dYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFwiRHJhZyBhbmQgRHJvcCBDb250ZW50XCIgXHVDNjM1XHVDMTU4XHVDNzc0IFx1QkU0NFx1RDY1Q1x1QzEzMVx1RDY1NFx1QjQxQyBcdUFDQkRcdUM2QjAgXHVEMzBDXHVDNzdDXHVCQTg1IFx1QjlDMVx1RDA2Q1x1Qjk3QyBcdUMwQkRcdUM3ODVcbiAgICAgICAgICAgICAgICAgICAgZHJhZ0NvbnRlbnQgPSBgW1ske2NhcmQuZmlsZS5uYW1lfV1dYDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIGRyYWdDb250ZW50LnRyaW0oKSk7XG5cdFx0XHRcdGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoY2FyZEVsZW1lbnQsIDAsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwQ29udGV4dE1lbnUoY2FyZEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSkge1xuICAgICAgICBjYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZmlsZS1tZW51JywgbWVudSwgZmlsZSwgJ21vcmUtb3B0aW9ucycpO1xuICAgICAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5GaWxlKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGUpO1xuICAgIH1cbn1cbiIsICIvLyBzcmMvY29tbW9uL3V0aWxzLnRzXG5cbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU29ydENyaXRlcmlvbiB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGVGcm9udG1hdHRlckFuZENvbnRlbnQoY29udGVudDogc3RyaW5nKTogeyBmcm9udG1hdHRlcjogc3RyaW5nIHwgbnVsbCwgY2xlYW5Db250ZW50OiBzdHJpbmcgfSB7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxzKlxcbihbXFxzXFxTXSo/KVxcbi0tLVxccypcXG4vO1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaChmcm9udG1hdHRlclJlZ2V4KTtcbiAgICByZXR1cm4gbWF0Y2hcbiAgICAgICAgPyB7IGZyb250bWF0dGVyOiBtYXRjaFsxXSwgY2xlYW5Db250ZW50OiBjb250ZW50LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCkudHJpbSgpIH1cbiAgICAgICAgOiB7IGZyb250bWF0dGVyOiBudWxsLCBjbGVhbkNvbnRlbnQ6IGNvbnRlbnQudHJpbSgpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0RmlsZXMoZmlsZXM6IFRGaWxlW10sIGNyaXRlcmlvbjogU29ydENyaXRlcmlvbiwgb3JkZXI6ICdhc2MnIHwgJ2Rlc2MnKTogVEZpbGVbXSB7XG4gICAgcmV0dXJuIGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgbGV0IGNvbXBhcmlzb24gPSAwO1xuICAgICAgICBzd2l0Y2ggKGNyaXRlcmlvbikge1xuICAgICAgICAgICAgY2FzZSAnZmlsZU5hbWUnOlxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSwgdW5kZWZpbmVkLCB7IG51bWVyaWM6IHRydWUsIHNlbnNpdGl2aXR5OiAnYmFzZScgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdsYXN0TW9kaWZpZWQnOlxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBhLnN0YXQubXRpbWUgLSBiLnN0YXQubXRpbWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjcmVhdGVkJzpcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gYS5zdGF0LmN0aW1lIC0gYi5zdGF0LmN0aW1lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmRlciA9PT0gJ2FzYycgPyBjb21wYXJpc29uIDogLWNvbXBhcmlzb247XG4gICAgfSk7XG59XG4iLCAiLy8gc3JjL3VpL3NldHRpbmdzVGFiLnRzXG5cbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBDYXJkTmF2aWdhdG9yUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdE1vZGFsIH0gZnJvbSAnLi90b29sYmFyL3Rvb2xiYXJBY3Rpb25zJztcbmltcG9ydCB7IFNvcnRDcml0ZXJpb24sIENhcmROYXZpZ2F0b3JTZXR0aW5ncyB9IGZyb20gJy4uL2NvbW1vbi90eXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnaTE4bmV4dCc7XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBDYXJkTmF2aWdhdG9yUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IGNyZWF0ZVNldHRpbmcgPSAobmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIHNldHRpbmdLZXk6IGtleW9mIENhcmROYXZpZ2F0b3JTZXR0aW5ncykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKHQobmFtZSkpXG4gICAgICAgICAgICAgICAgLnNldERlc2ModChkZXNjKSk7XG4gICAgICAgIH07XG5cblx0XHRjb25zdCB1cGRhdGVTZXR0aW5nID0gYXN5bmMgPEsgZXh0ZW5kcyBrZXlvZiBDYXJkTmF2aWdhdG9yU2V0dGluZ3M+KFxuICAgICAgICAgICAgc2V0dGluZ0tleTogSyxcbiAgICAgICAgICAgIHZhbHVlOiBDYXJkTmF2aWdhdG9yU2V0dGluZ3NbS11cbiAgICAgICAgKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nS2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi50cmlnZ2VyUmVmcmVzaCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNyZWF0ZVNldHRpbmcodCgnQ2FyZHMgcGVyIHZpZXcnKSwgdCgnTnVtYmVyIG9mIGNhcmRzIHRvIGRpc3BsYXkgYXQgb25jZScpLCB0KCdjYXJkc1BlclZpZXcnKSlcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMSwgMTAsIDEpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhcmRzUGVyVmlldylcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2V0dGluZygnY2FyZHNQZXJWaWV3JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjcmVhdGVTZXR0aW5nKHQoJ0ZvbGRlciBTZWxlY3Rpb24nKSwgdCgnQ2hvb3NlIHdoZXRoZXIgdG8gdXNlIHRoZSBhY3RpdmUgZmlsZVxcJ3MgZm9sZGVyIG9yIGEgc2VsZWN0ZWQgZm9sZGVyJyksIHQoJ3VzZVNlbGVjdGVkRm9sZGVyJykpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKHQoJ2FjdGl2ZScpLCB0KCdBY3RpdmUgRmlsZVxcJ3MgRm9sZGVyJykpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbih0KCdzZWxlY3RlZCcpLCB0KCdTZWxlY3RlZCBGb2xkZXInKSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlU2VsZWN0ZWRGb2xkZXIgPyB0KCdzZWxlY3RlZCcpIDogdCgnYWN0aXZlJykpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVTZXR0aW5nKCd1c2VTZWxlY3RlZEZvbGRlcicsIHZhbHVlID09PSB0KCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VTZWxlY3RlZEZvbGRlcikge1xuICAgICAgICAgICAgY3JlYXRlU2V0dGluZyh0KCdTZWxlY3QgRm9sZGVyJyksIHQoJ0Nob29zZSBhIGZvbGRlciBmb3IgQ2FyZCBOYXZpZ2F0b3InKSwgdCgnc2VsZWN0ZWRGb2xkZXInKSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRGb2xkZXIgfHwgdCgnQ2hvb3NlIGZvbGRlcicpKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRm9sZGVyU3VnZ2VzdE1vZGFsKHRoaXMucGx1Z2luLCBhc3luYyAoZm9sZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2V0dGluZygnc2VsZWN0ZWRGb2xkZXInLCBmb2xkZXIucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNyZWF0ZVNldHRpbmcodCgnRGVmYXVsdCBzb3J0IG1ldGhvZCcpLCB0KCdDaG9vc2UgdGhlIGRlZmF1bHQgc29ydGluZyBtZXRob2QgZm9yIGNhcmRzJyksIHQoJ3NvcnRDcml0ZXJpb24nKSlcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbih0KCdmaWxlTmFtZV9hc2MnKSwgdCgnRmlsZSBuYW1lIChBIHRvIFopJykpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24odCgnZmlsZU5hbWVfZGVzYycpLCB0KCdGaWxlIG5hbWUgKFogdG8gQSknKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbih0KCdsYXN0TW9kaWZpZWRfZGVzYycpLCB0KCdMYXN0IG1vZGlmaWVkIChuZXdlc3QgZmlyc3QpJykpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24odCgnbGFzdE1vZGlmaWVkX2FzYycpLCB0KCdMYXN0IG1vZGlmaWVkIChvbGRlc3QgZmlyc3QpJykpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24odCgnY3JlYXRlZF9kZXNjJyksIHQoJ0NyZWF0ZWQgKG5ld2VzdCBmaXJzdCknKSlcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbih0KCdjcmVhdGVkX2FzYycpLCB0KCdDcmVhdGVkIChvbGRlc3QgZmlyc3QpJykpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0Q3JpdGVyaW9ufV8ke3RoaXMucGx1Z2luLnNldHRpbmdzLnNvcnRPcmRlcn1gKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbY3JpdGVyaW9uLCBvcmRlcl0gPSB2YWx1ZS5zcGxpdCgnXycpIGFzIFtTb3J0Q3JpdGVyaW9uLCAnYXNjJyB8ICdkZXNjJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVTZXR0aW5nKCdzb3J0Q3JpdGVyaW9uJywgY3JpdGVyaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNldHRpbmcoJ3NvcnRPcmRlcicsIG9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjcmVhdGVTZXR0aW5nKHQoJ0ZpeGVkIENhcmQgSGVpZ2h0JyksIHQoJ0lmIGVuYWJsZWQsIGFsbCBjYXJkcyB3aWxsIGhhdmUgdGhlIHNhbWUgaGVpZ2h0LiBJZiBkaXNhYmxlZCwgY2FyZCBoZWlnaHQgd2lsbCBhZGp1c3QgdG8gY29udGVudC4nKSwgdCgnZml4ZWRDYXJkSGVpZ2h0JykpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZml4ZWRDYXJkSGVpZ2h0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2V0dGluZygnZml4ZWRDYXJkSGVpZ2h0JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjcmVhdGVTZXR0aW5nKHQoJ1JlbmRlciBDb250ZW50IGFzIEhUTUwnKSwgdCgnSWYgZW5hYmxlZCwgY2FyZCBjb250ZW50IHdpbGwgYmUgcmVuZGVyZWQgYXMgSFRNTCcpLCB0KCdyZW5kZXJDb250ZW50QXNIdG1sJykpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVuZGVyQ29udGVudEFzSHRtbClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNldHRpbmcoJ3JlbmRlckNvbnRlbnRBc0h0bWwnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNyZWF0ZVNldHRpbmcodCgnQ2VudGVyIEFjdGl2ZSBDYXJkIG9uIE9wZW4nKSwgdCgnQXV0b21hdGljYWxseSBjZW50ZXIgdGhlIGFjdGl2ZSBjYXJkIHdoZW4gb3BlbmluZyB0aGUgQ2FyZCBOYXZpZ2F0b3InKSwgdCgnY2VudGVyQWN0aXZlQ2FyZE9uT3BlbicpKVxuXHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNlbnRlckFjdGl2ZUNhcmRPbk9wZW4pXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNlbnRlckFjdGl2ZUNhcmRPbk9wZW4gPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KSk7XG5cbiAgICAgICAgY3JlYXRlU2V0dGluZyh0KCdEcmFnIGFuZCBEcm9wIENvbnRlbnQnKSwgdCgnV2hlbiBlbmFibGVkLCBkcmFnZ2luZyBhIGNhcmQgd2lsbCBpbnNlcnQgdGhlIG5vdGUgY29udGVudCBpbnN0ZWFkIG9mIGEgbGluay4nKSwgdCgnZHJhZ0Ryb3BDb250ZW50JykpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHJhZ0Ryb3BDb250ZW50KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2V0dGluZygnZHJhZ0Ryb3BDb250ZW50JywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IHQoJ0Rpc3BsYXkgaXRlbXMgU2V0dGluZ3MnKSB9KTtcblxuICAgICAgICBjb25zdCBkaXNwbGF5U2V0dGluZ3MgPSBbXG4gICAgICAgICAgICB7IG5hbWU6IHQoJ1Nob3cgRmlsZSBOYW1lJyksIGtleTogJ3Nob3dGaWxlTmFtZScgfSxcbiAgICAgICAgICAgIHsgbmFtZTogdCgnU2hvdyBGaXJzdCBIZWFkZXInKSwga2V5OiAnc2hvd0ZpcnN0SGVhZGVyJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiB0KCdTaG93IENvbnRlbnQnKSwga2V5OiAnc2hvd0NvbnRlbnQnIH0sXG4gICAgICAgIF0gYXMgY29uc3Q7XG5cbiAgICAgICAgZGlzcGxheVNldHRpbmdzLmZvckVhY2goKHsgbmFtZSwga2V5IH0pID0+IHtcbiAgICAgICAgICAgIGNyZWF0ZVNldHRpbmcobmFtZSwgdChgVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgJHtuYW1lLnRvTG93ZXJDYXNlKCl9IG9uIGNhcmRzYCksIGtleSlcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNldHRpbmcoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZm9udFNpemVTZXR0aW5ncyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogdCgnRmlsZSBOYW1lIFNpemUnKSwga2V5OiAnZmlsZU5hbWVTaXplJywgbWluOiAxNSwgbWF4OiAyNSB9LFxuICAgICAgICAgICAgeyBuYW1lOiB0KCdGaXJzdCBIZWFkZXIgU2l6ZScpLCBrZXk6ICdmaXJzdEhlYWRlclNpemUnLCBtaW46IDE1LCBtYXg6IDI1IH0sXG4gICAgICAgICAgICB7IG5hbWU6IHQoJ0NvbnRlbnQgU2l6ZScpLCBrZXk6ICdjb250ZW50U2l6ZScsIG1pbjogMTAsIG1heDogMjAgfSxcbiAgICAgICAgXSBhcyBjb25zdDtcblxuICAgICAgICBmb250U2l6ZVNldHRpbmdzLmZvckVhY2goKHsgbmFtZSwga2V5LCBtaW4sIG1heCB9KSA9PiB7XG4gICAgICAgICAgICBjcmVhdGVTZXR0aW5nKG5hbWUsIHQoYFNldCB0aGUgZm9udCBzaXplIGZvciB0aGUgJHtuYW1lLnRvTG93ZXJDYXNlKCl9YCksIGtleSlcbiAgICAgICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLnNldExpbWl0cyhtaW4sIG1heCwgMSlcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzW2tleV0pXG4gICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVNldHRpbmcoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3JlYXRlU2V0dGluZyh0KCdDb250ZW50IExlbmd0aCcpLCB0KCdNYXhpbXVtIGNvbnRlbnQgbGVuZ3RoIGRpc3BsYXllZCBvbiBlYWNoIGNhcmQnKSwgdCgnY29udGVudExlbmd0aCcpKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCAxMCwgMSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudExlbmd0aClcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU2V0dGluZygnY29udGVudExlbmd0aCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cblx0XHRcdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiB0KCdLZXlib2FyZCBTaG9ydGN1dHMnKSB9KTtcblxuXHRcdFx0XHRjb25zdCBzaG9ydGN1dERlc2MgPSBjb250YWluZXJFbC5jcmVhdGVFbCgncCcpO1xuXHRcdFx0XHRzaG9ydGN1dERlc2Muc2V0VGV4dCh0KCdDYXJkIE5hdmlnYXRvciBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgc2hvcnRjdXRzLiBZb3UgY2FuIGN1c3RvbWl6ZSB0aGVzZSBpbiBPYnNpZGlhblxcJ3MgSG90a2V5cyBzZXR0aW5nczonKSk7XG5cdFx0XHRcblx0XHRcdFx0Y29uc3Qgc2hvcnRjdXRMaXN0ID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3VsJyk7XG5cdFx0XHRcdFtcblx0XHRcdFx0XHR7IG5hbWU6IHQoJ1Njcm9sbCBVcCBPbmUgQ2FyZCcpLCBob3RrZXk6ICdDdHJsICsgQWx0L09wdGlvbiArIFNoaWZ0ICsgXHUyMTkxJyB9LFxuXHRcdFx0XHRcdHsgbmFtZTogdCgnU2Nyb2xsIERvd24gT25lIENhcmQnKSwgaG90a2V5OiAnQ3RybCArIEFsdC9PcHRpb24gKyBTaGlmdCArIFx1MjE5MycgfSxcblx0XHRcdFx0XHR7IG5hbWU6IHQoJ1Njcm9sbCBMZWZ0IE9uZSBDYXJkJyksIGhvdGtleTogJ0N0cmwgKyBBbHQvT3B0aW9uICsgU2hpZnQgKyBcdTIxOTAnIH0sXG5cdFx0XHRcdFx0eyBuYW1lOiB0KCdTY3JvbGwgUmlnaHQgT25lIENhcmQnKSwgaG90a2V5OiAnQ3RybCArIEFsdC9PcHRpb24gKyBTaGlmdCArIFx1MjE5MicgfSxcblx0XHRcdFx0XHR7IG5hbWU6IHQoJ1Njcm9sbCBVcCBPbmUgUGFnZScpLCBob3RrZXk6ICdDdHJsICsgQWx0L09wdGlvbiArIFNoaWZ0ICsgUGFnZSBVcCcgfSxcblx0XHRcdFx0XHR7IG5hbWU6IHQoJ1Njcm9sbCBEb3duIE9uZSBQYWdlJyksIGhvdGtleTogJ0N0cmwgKyBBbHQvT3B0aW9uICsgU2hpZnQgKyBQYWdlIERvd24nIH0sXG5cdFx0XHRcdFx0eyBuYW1lOiB0KCdDZW50ZXIgQWN0aXZlIENhcmQnKSwgaG90a2V5OiAnQ3RybCArIEFsdC9PcHRpb24gKyBTaGlmdCArIEhvbWUnIH1cblx0XHRcdFx0XS5mb3JFYWNoKCh7IG5hbWUsIGhvdGtleSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbSA9IHNob3J0Y3V0TGlzdC5jcmVhdGVFbCgnbGknKTtcblx0XHRcdFx0XHRpdGVtLnNldFRleHQoYCR7bmFtZX06ICR7aG90a2V5fWApO1xuXHRcdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0XHRjb25zdCBjdXN0b21pemVOb3RlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnKTtcblx0XHRcdFx0Y3VzdG9taXplTm90ZS5zZXRUZXh0KHQoJ1RvIGN1c3RvbWl6ZSB0aGVzZSBzaG9ydGN1dHMsIGdvIHRvIFNldHRpbmdzIFx1MjE5MiBIb3RrZXlzIGFuZCBzZWFyY2ggZm9yIFwiQ2FyZCBOYXZpZ2F0b3JcIi4nKSk7XG4gICAgfVxufVxuIiwgIi8vIHNyYy9jb21tb24vc2V0dGluZ3MudHNcblxuaW1wb3J0IHsgQ2FyZE5hdmlnYXRvclNldHRpbmdzLCBTb3J0Q3JpdGVyaW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDYXJkTmF2aWdhdG9yU2V0dGluZ3MgPSB7XG4gICAgY2FyZHNQZXJWaWV3OiA2LFxuXHR1c2VTZWxlY3RlZEZvbGRlcjogZmFsc2UsXG4gICAgc2VsZWN0ZWRGb2xkZXI6IG51bGwsXG5cdHNvcnRDcml0ZXJpb246ICdmaWxlTmFtZScgYXMgU29ydENyaXRlcmlvbixcbiAgICBzb3J0T3JkZXI6ICdhc2MnIGFzICdhc2MnIHwgJ2Rlc2MnLFxuXHRmaXhlZENhcmRIZWlnaHQ6IHRydWUsXG5cdHJlbmRlckNvbnRlbnRBc0h0bWw6IGZhbHNlLFxuXHRjZW50ZXJBY3RpdmVDYXJkT25PcGVuOiB0cnVlLFxuXHRjZW50ZXJDYXJkTWV0aG9kOiAnc2Nyb2xsJyxcblx0YW5pbWF0aW9uRHVyYXRpb246IDMwMCxcblx0Y2VudGVyQWN0aXZlQ2FyZEhvdGtleTogeyBtb2RpZmllcnM6IFtcIkN0cmxcIiwgXCJNb2RcIl0sIGtleTogXCJIb21lXCIgfSxcblx0YWN0aXZlQ2FyZEJvcmRlckNvbG9yOiAndmFyKC0tYWN0aXZlLWJvcmRlci1jb2xvciknLFxuICAgIGFjdGl2ZUNhcmRCYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvciknLFxuXHRkcmFnRHJvcENvbnRlbnQ6IGZhbHNlLFxuICAgIHNob3dGaWxlTmFtZTogdHJ1ZSxcbiAgICBmaWxlTmFtZVNpemU6IDIwLFxuICAgIHNob3dGaXJzdEhlYWRlcjogdHJ1ZSxcbiAgICBmaXJzdEhlYWRlclNpemU6IDE4LFxuICAgIHNob3dDb250ZW50OiB0cnVlLFxuICAgIGNvbnRlbnRTaXplOiAxNSxcbiAgICBjb250ZW50TGVuZ3RoOiA1LFxufVxuIiwgIntcblx0XCJDYXJkcyBwZXIgdmlld1wiOiBcIkNhcmRzIHBlciB2aWV3XCIsXG5cdFwiTnVtYmVyIG9mIGNhcmRzIHRvIGRpc3BsYXkgYXQgb25jZVwiOiBcIk51bWJlciBvZiBjYXJkcyB0byBkaXNwbGF5IGF0IG9uY2VcIixcblx0XCJGb2xkZXIgU2VsZWN0aW9uXCI6IFwiRm9sZGVyIFNlbGVjdGlvblwiLFxuXHRcIkNob29zZSB3aGV0aGVyIHRvIHVzZSB0aGUgYWN0aXZlIGZpbGUncyBmb2xkZXIgb3IgYSBzZWxlY3RlZCBmb2xkZXJcIjogXCJDaG9vc2Ugd2hldGhlciB0byB1c2UgdGhlIGFjdGl2ZSBmaWxlJ3MgZm9sZGVyIG9yIGEgc2VsZWN0ZWQgZm9sZGVyXCIsXG5cdFwiQWN0aXZlIEZpbGUncyBGb2xkZXJcIjogXCJBY3RpdmUgRmlsZSdzIEZvbGRlclwiLFxuXHRcIlNlbGVjdGVkIEZvbGRlclwiOiBcIlNlbGVjdGVkIEZvbGRlclwiLFxuXHRcIlNlbGVjdCBGb2xkZXJcIjogXCJTZWxlY3QgRm9sZGVyXCIsXG5cdFwiQ2hvb3NlIGEgZm9sZGVyIGZvciBDYXJkIE5hdmlnYXRvclwiOiBcIkNob29zZSBhIGZvbGRlciBmb3IgQ2FyZCBOYXZpZ2F0b3JcIixcblx0XCJDaG9vc2UgZm9sZGVyXCI6IFwiQ2hvb3NlIGZvbGRlclwiLFxuXHRcIkRlZmF1bHQgc29ydCBtZXRob2RcIjogXCJEZWZhdWx0IHNvcnQgbWV0aG9kXCIsXG5cdFwiQ2hvb3NlIHRoZSBkZWZhdWx0IHNvcnRpbmcgbWV0aG9kIGZvciBjYXJkc1wiOiBcIkNob29zZSB0aGUgZGVmYXVsdCBzb3J0aW5nIG1ldGhvZCBmb3IgY2FyZHNcIixcblx0XCJGaWxlIG5hbWUgKEEgdG8gWilcIjogXCJGaWxlIG5hbWUgKEEgdG8gWilcIixcblx0XCJGaWxlIG5hbWUgKFogdG8gQSlcIjogXCJGaWxlIG5hbWUgKFogdG8gQSlcIixcblx0XCJMYXN0IG1vZGlmaWVkIChuZXdlc3QgZmlyc3QpXCI6IFwiTGFzdCBtb2RpZmllZCAobmV3ZXN0IGZpcnN0KVwiLFxuXHRcIkxhc3QgbW9kaWZpZWQgKG9sZGVzdCBmaXJzdClcIjogXCJMYXN0IG1vZGlmaWVkIChvbGRlc3QgZmlyc3QpXCIsXG5cdFwiQ3JlYXRlZCAobmV3ZXN0IGZpcnN0KVwiOiBcIkNyZWF0ZWQgKG5ld2VzdCBmaXJzdClcIixcblx0XCJDcmVhdGVkIChvbGRlc3QgZmlyc3QpXCI6IFwiQ3JlYXRlZCAob2xkZXN0IGZpcnN0KVwiLFxuXHRcIkZpeGVkIENhcmQgSGVpZ2h0XCI6IFwiRml4ZWQgQ2FyZCBIZWlnaHRcIixcblx0XCJJZiBlbmFibGVkLCBhbGwgY2FyZHMgd2lsbCBoYXZlIHRoZSBzYW1lIGhlaWdodC4gSWYgZGlzYWJsZWQsIGNhcmQgaGVpZ2h0IHdpbGwgYWRqdXN0IHRvIGNvbnRlbnQuXCI6IFwiSWYgZW5hYmxlZCwgYWxsIGNhcmRzIHdpbGwgaGF2ZSB0aGUgc2FtZSBoZWlnaHQuIElmIGRpc2FibGVkLCBjYXJkIGhlaWdodCB3aWxsIGFkanVzdCB0byBjb250ZW50LlwiLFxuXHRcIlJlbmRlciBDb250ZW50IGFzIEhUTUxcIjogXCJSZW5kZXIgQ29udGVudCBhcyBIVE1MXCIsXG5cdFwiSWYgZW5hYmxlZCwgY2FyZCBjb250ZW50IHdpbGwgYmUgcmVuZGVyZWQgYXMgSFRNTFwiOiBcIklmIGVuYWJsZWQsIGNhcmQgY29udGVudCB3aWxsIGJlIHJlbmRlcmVkIGFzIEhUTUxcIixcblx0XCJDZW50ZXIgQWN0aXZlIENhcmQgb24gT3BlblwiOiBcIkNlbnRlciBBY3RpdmUgQ2FyZCBvbiBPcGVuXCIsXG5cdFwiQXV0b21hdGljYWxseSBjZW50ZXIgdGhlIGFjdGl2ZSBjYXJkIHdoZW4gb3BlbmluZyB0aGUgQ2FyZCBOYXZpZ2F0b3JcIjogXCJBdXRvbWF0aWNhbGx5IGNlbnRlciB0aGUgYWN0aXZlIGNhcmQgd2hlbiBvcGVuaW5nIHRoZSBDYXJkIE5hdmlnYXRvclwiLFxuXHRcIkRyYWcgYW5kIERyb3AgQ29udGVudFwiOiBcIkRyYWcgYW5kIERyb3AgQ29udGVudFwiLFxuXHRcIldoZW4gZW5hYmxlZCwgZHJhZ2dpbmcgYSBjYXJkIHdpbGwgaW5zZXJ0IHRoZSBub3RlIGNvbnRlbnQgaW5zdGVhZCBvZiBhIGxpbmsuXCI6IFwiV2hlbiBlbmFibGVkLCBkcmFnZ2luZyBhIGNhcmQgd2lsbCBpbnNlcnQgdGhlIG5vdGUgY29udGVudCBpbnN0ZWFkIG9mIGEgbGluay5cIixcblx0XCJEaXNwbGF5IGl0ZW1zIFNldHRpbmdzXCI6IFwiRGlzcGxheSBpdGVtcyBTZXR0aW5nc1wiLFxuXHRcIlNob3cgRmlsZSBOYW1lXCI6IFwiU2hvdyBGaWxlIE5hbWVcIixcblx0XCJTaG93IEZpcnN0IEhlYWRlclwiOiBcIlNob3cgRmlyc3QgSGVhZGVyXCIsXG5cdFwiU2hvdyBDb250ZW50XCI6IFwiU2hvdyBDb250ZW50XCIsXG5cdFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgZmlsZSBuYW1lIG9uIGNhcmRzXCI6IFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgZmlsZSBuYW1lIG9uIGNhcmRzXCIsXG5cdFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgZmlyc3QgaGVhZGVyIG9uIGNhcmRzXCI6IFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgZmlyc3QgaGVhZGVyIG9uIGNhcmRzXCIsXG5cdFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgY29udGVudCBvbiBjYXJkc1wiOiBcIlRvZ2dsZSB0byBkaXNwbGF5IG9yIGhpZGUgdGhlIGNvbnRlbnQgb24gY2FyZHNcIixcblx0XCJGaWxlIE5hbWUgU2l6ZVwiOiBcIkZpbGUgTmFtZSBTaXplXCIsXG5cdFwiRmlyc3QgSGVhZGVyIFNpemVcIjogXCJGaXJzdCBIZWFkZXIgU2l6ZVwiLFxuXHRcIkNvbnRlbnQgU2l6ZVwiOiBcIkNvbnRlbnQgU2l6ZVwiLFxuXHRcIlNldCB0aGUgZm9udCBzaXplIGZvciB0aGUgZmlsZSBuYW1lXCI6IFwiU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBmaWxlIG5hbWVcIixcblx0XCJTZXQgdGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGZpcnN0IGhlYWRlclwiOiBcIlNldCB0aGUgZm9udCBzaXplIGZvciB0aGUgZmlyc3QgaGVhZGVyXCIsXG5cdFwiU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBjb250ZW50XCI6IFwiU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBjb250ZW50XCIsXG5cdFwiQ29udGVudCBMZW5ndGhcIjogXCJDb250ZW50IExlbmd0aFwiLFxuXHRcIk1heGltdW0gY29udGVudCBsZW5ndGggZGlzcGxheWVkIG9uIGVhY2ggY2FyZFwiOiBcIk1heGltdW0gY29udGVudCBsZW5ndGggZGlzcGxheWVkIG9uIGVhY2ggY2FyZFwiLFxuXHRcIktleWJvYXJkIFNob3J0Y3V0c1wiOiBcIktleWJvYXJkIFNob3J0Y3V0c1wiLFxuXHRcIkNhcmQgTmF2aWdhdG9yIHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgZGVmYXVsdCBzaG9ydGN1dHMuIFlvdSBjYW4gY3VzdG9taXplIHRoZXNlIGluIE9ic2lkaWFuJ3MgSG90a2V5cyBzZXR0aW5nczpcIjogXCJDYXJkIE5hdmlnYXRvciBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgc2hvcnRjdXRzLiBZb3UgY2FuIGN1c3RvbWl6ZSB0aGVzZSBpbiBPYnNpZGlhbidzIEhvdGtleXMgc2V0dGluZ3M6XCIsXG5cdFwiU2Nyb2xsIFVwIE9uZSBDYXJkXCI6IFwiU2Nyb2xsIFVwIE9uZSBDYXJkXCIsXG5cdFwiU2Nyb2xsIERvd24gT25lIENhcmRcIjogXCJTY3JvbGwgRG93biBPbmUgQ2FyZFwiLFxuXHRcIlNjcm9sbCBMZWZ0IE9uZSBDYXJkXCI6IFwiU2Nyb2xsIExlZnQgT25lIENhcmRcIixcblx0XCJTY3JvbGwgUmlnaHQgT25lIENhcmRcIjogXCJTY3JvbGwgUmlnaHQgT25lIENhcmRcIixcblx0XCJTY3JvbGwgVXAgT25lIFBhZ2VcIjogXCJTY3JvbGwgVXAgT25lIFBhZ2VcIixcblx0XCJTY3JvbGwgRG93biBPbmUgUGFnZVwiOiBcIlNjcm9sbCBEb3duIE9uZSBQYWdlXCIsXG5cdFwiQ2VudGVyIEFjdGl2ZSBDYXJkXCI6IFwiQ2VudGVyIEFjdGl2ZSBDYXJkXCIsXG5cdFwiVG8gY3VzdG9taXplIHRoZXNlIHNob3J0Y3V0cywgZ28gdG8gU2V0dGluZ3MgXHUyMTkyIEhvdGtleXMgYW5kIHNlYXJjaCBmb3IgXFxcIkNhcmQgTmF2aWdhdG9yXFxcIi5cIjogXCJUbyBjdXN0b21pemUgdGhlc2Ugc2hvcnRjdXRzLCBnbyB0byBTZXR0aW5ncyBcdTIxOTIgSG90a2V5cyBhbmQgc2VhcmNoIGZvciBcXFwiQ2FyZCBOYXZpZ2F0b3JcXFwiLlwiXG59XG4iLCAie1xuXHRcIkNhcmRzIHBlciB2aWV3XCI6IFwiXHVENjU0XHVCQTc0XHVCMkY5IFx1Q0U3NFx1QjREQyBcdUMyMThcIixcbiAgICBcIk51bWJlciBvZiBjYXJkcyB0byBkaXNwbGF5IGF0IG9uY2VcIjogXCJcdUQ1NUMgXHVCQzg4XHVDNUQwIFx1RDQ1Q1x1QzJEQ1x1RDU2MCBcdUNFNzRcdUI0REMgXHVDMjE4XCIsXG4gICAgXCJGb2xkZXIgU2VsZWN0aW9uXCI6IFwiXHVEM0Y0XHVCMzU0IFx1QzEyMFx1RDBERFwiLFxuICAgIFwiQ2hvb3NlIHdoZXRoZXIgdG8gdXNlIHRoZSBhY3RpdmUgZmlsZSdzIGZvbGRlciBvciBhIHNlbGVjdGVkIGZvbGRlclwiOiBcIlx1RDY1Q1x1QzEzMSBcdUQzMENcdUM3N0NcdUM3NTggXHVEM0Y0XHVCMzU0IFx1QjYxMFx1QjI5NCBcdUMxMjBcdUQwRERcdUQ1NUMgXHVEM0Y0XHVCMzU0IFx1QzkxMSBcdUMwQUNcdUM2QTlcdUQ1NjAgXHVEM0Y0XHVCMzU0IFx1QzEyMFx1RDBERFwiLFxuICAgIFwiQWN0aXZlIEZpbGUncyBGb2xkZXJcIjogXCJcdUQ2NUNcdUMxMzEgXHVEMzBDXHVDNzdDXHVDNzU4IFx1RDNGNFx1QjM1NFwiLFxuICAgIFwiU2VsZWN0ZWQgRm9sZGVyXCI6IFwiXHVDMTIwXHVEMEREXHVENTVDIFx1RDNGNFx1QjM1NFwiLFxuICAgIFwiU2VsZWN0IEZvbGRlclwiOiBcIlx1RDNGNFx1QjM1NCBcdUMxMjBcdUQwRERcIixcbiAgICBcIkNob29zZSBhIGZvbGRlciBmb3IgQ2FyZCBOYXZpZ2F0b3JcIjogXCJDYXJkIE5hdmlnYXRvclx1QzZBOSBcdUQzRjRcdUIzNTQgXHVDMTIwXHVEMEREXCIsXG4gICAgXCJDaG9vc2UgZm9sZGVyXCI6IFwiXHVEM0Y0XHVCMzU0IFx1QzEyMFx1RDBERFwiLFxuICAgIFwiRGVmYXVsdCBzb3J0IG1ldGhvZFwiOiBcIlx1QUUzMFx1QkNGOCBcdUM4MTVcdUI4MkMgXHVCQzI5XHVDMkREXCIsXG4gICAgXCJDaG9vc2UgdGhlIGRlZmF1bHQgc29ydGluZyBtZXRob2QgZm9yIGNhcmRzXCI6IFwiXHVDRTc0XHVCNERDXHVDNzU4IFx1QUUzMFx1QkNGOCBcdUM4MTVcdUI4MkMgXHVCQzI5XHVDMkREIFx1QzEyMFx1RDBERFwiLFxuICAgIFwiRmlsZSBuYW1lIChBIHRvIFopXCI6IFwiXHVEMzBDXHVDNzdDXHVCQTg1IChcdUFDMDBcdUIwOThcdUIyRTRcdUMyMUMpXCIsXG4gICAgXCJGaWxlIG5hbWUgKFogdG8gQSlcIjogXCJcdUQzMENcdUM3N0NcdUJBODUgKFx1QzVFRFx1QUMwMFx1QjA5OFx1QjJFNFx1QzIxQylcIixcbiAgICBcIkxhc3QgbW9kaWZpZWQgKG5ld2VzdCBmaXJzdClcIjogXCJcdUNENUNcdUM4ODUgXHVDMjE4XHVDODE1XHVDNzdDIChcdUNENUNcdUMyRTBcdUMyMUMpXCIsXG4gICAgXCJMYXN0IG1vZGlmaWVkIChvbGRlc3QgZmlyc3QpXCI6IFwiXHVDRDVDXHVDODg1IFx1QzIxOFx1QzgxNVx1Qzc3QyAoXHVDNjI0XHVCNzk4XHVCNDFDIFx1QzIxQylcIixcbiAgICBcIkNyZWF0ZWQgKG5ld2VzdCBmaXJzdClcIjogXCJcdUMwRERcdUMxMzFcdUM3N0MgKFx1Q0Q1Q1x1QzJFMFx1QzIxQylcIixcbiAgICBcIkNyZWF0ZWQgKG9sZGVzdCBmaXJzdClcIjogXCJcdUMwRERcdUMxMzFcdUM3N0MgKFx1QzYyNFx1Qjc5OFx1QjQxQyBcdUMyMUMpXCIsXG4gICAgXCJGaXhlZCBDYXJkIEhlaWdodFwiOiBcIlx1QUNFMFx1QzgxNSBcdUNFNzRcdUI0REMgXHVCMTkyXHVDNzc0XCIsXG4gICAgXCJJZiBlbmFibGVkLCBhbGwgY2FyZHMgd2lsbCBoYXZlIHRoZSBzYW1lIGhlaWdodC4gSWYgZGlzYWJsZWQsIGNhcmQgaGVpZ2h0IHdpbGwgYWRqdXN0IHRvIGNvbnRlbnQuXCI6IFwiXHVENjVDXHVDMTMxXHVENjU0XHVENTU4XHVCQTc0IFx1QkFBOFx1QjRFMCBcdUNFNzRcdUI0RENcdUM3NTggXHVCMTkyXHVDNzc0XHVBQzAwIFx1QjNEOVx1Qzc3Q1x1RDU2OVx1QjJDOFx1QjJFNC4gXHVCRTQ0XHVENjVDXHVDMTMxXHVENjU0XHVENTU4XHVCQTc0IFx1Q0U3NFx1QjREQyBcdUIxOTJcdUM3NzRcdUFDMDAgXHVCMEI0XHVDNkE5XHVDNUQwIFx1QjlERVx1QUM4QyBcdUM4NzBcdUM4MTVcdUI0MjlcdUIyQzhcdUIyRTQuXCIsXG4gICAgXCJSZW5kZXIgQ29udGVudCBhcyBIVE1MXCI6IFwiXHVCMEI0XHVDNkE5XHVDNzQ0IEhUTUxcdUI4NUMgXHVCODBDXHVCMzU0XHVCOUMxXCIsXG4gICAgXCJJZiBlbmFibGVkLCBjYXJkIGNvbnRlbnQgd2lsbCBiZSByZW5kZXJlZCBhcyBIVE1MXCI6IFwiXHVENjVDXHVDMTMxXHVENjU0XHVENTU4XHVCQTc0IFx1Q0U3NFx1QjREQyBcdUIwQjRcdUM2QTlcdUM3NzQgSFRNTFx1Qjg1QyBcdUI4MENcdUIzNTRcdUI5QzFcdUI0MjlcdUIyQzhcdUIyRTRcIixcbiAgICBcIkNlbnRlciBBY3RpdmUgQ2FyZCBvbiBPcGVuXCI6IFwiXHVDNUY0IFx1QjU0QyBcdUQ2NUNcdUMxMzEgXHVDRTc0XHVCNERDIFx1QzkxMVx1QzU1OSBcdUM4MTVcdUI4MkNcIixcbiAgICBcIkF1dG9tYXRpY2FsbHkgY2VudGVyIHRoZSBhY3RpdmUgY2FyZCB3aGVuIG9wZW5pbmcgdGhlIENhcmQgTmF2aWdhdG9yXCI6IFwiQ2FyZCBOYXZpZ2F0b3JcdUI5N0MgXHVDNUY0IFx1QjU0QyBcdUQ2NUNcdUMxMzEgXHVDRTc0XHVCNERDXHVCOTdDIFx1Qzc5MFx1QjNEOVx1QzczQ1x1Qjg1QyBcdUM5MTFcdUM1NTlcdUM1RDAgXHVDNzA0XHVDRTU4XHVDMkRDXHVEMEI1XHVCMkM4XHVCMkU0XCIsXG4gICAgXCJEcmFnIGFuZCBEcm9wIENvbnRlbnRcIjogXCJcdUIwQjRcdUM2QTkgXHVCNERDXHVCNzk4XHVBREY4IFx1QzU2NCBcdUI0RENcdUI4NkRcIixcbiAgICBcIldoZW4gZW5hYmxlZCwgZHJhZ2dpbmcgYSBjYXJkIHdpbGwgaW5zZXJ0IHRoZSBub3RlIGNvbnRlbnQgaW5zdGVhZCBvZiBhIGxpbmsuXCI6IFwiXHVENjVDXHVDMTMxXHVENjU0XHVENTU4XHVCQTc0IFx1Q0U3NFx1QjREQ1x1Qjk3QyBcdUI0RENcdUI3OThcdUFERjhcdUQ1NjAgXHVCNTRDIFx1QjlDMVx1RDA2QyBcdUIzMDBcdUMyRTAgXHVCMTc4XHVEMkI4IFx1QjBCNFx1QzZBOVx1Qzc3NCBcdUMwQkRcdUM3ODVcdUI0MjlcdUIyQzhcdUIyRTQuXCIsXG4gICAgXCJEaXNwbGF5IGl0ZW1zIFNldHRpbmdzXCI6IFwiXHVENDVDXHVDMkRDIFx1RDU2RFx1QkFBOSBcdUMxMjRcdUM4MTVcIixcbiAgICBcIlNob3cgRmlsZSBOYW1lXCI6IFwiXHVEMzBDXHVDNzdDXHVCQTg1IFx1RDQ1Q1x1QzJEQ1wiLFxuICAgIFwiU2hvdyBGaXJzdCBIZWFkZXJcIjogXCJcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUQ0NUNcdUMyRENcIixcbiAgICBcIlNob3cgQ29udGVudFwiOiBcIlx1QjBCNFx1QzZBOSBcdUQ0NUNcdUMyRENcIixcbiAgICBcIlRvZ2dsZSB0byBkaXNwbGF5IG9yIGhpZGUgdGhlIGZpbGUgbmFtZSBvbiBjYXJkc1wiOiBcIlx1Q0U3NFx1QjREQ1x1QzVEMCBcdUQzMENcdUM3N0NcdUJBODVcdUM3NDQgXHVENDVDXHVDMkRDXHVENTU4XHVBQzcwXHVCMDk4IFx1QzIyOFx1QUUzMFx1QjI5NCBcdUQxQTBcdUFFMDBcIixcbiAgICBcIlRvZ2dsZSB0byBkaXNwbGF5IG9yIGhpZGUgdGhlIGZpcnN0IGhlYWRlciBvbiBjYXJkc1wiOiBcIlx1Q0U3NFx1QjREQ1x1QzVEMCBcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NFx1Qjk3QyBcdUQ0NUNcdUMyRENcdUQ1NThcdUFDNzBcdUIwOTggXHVDMjI4XHVBRTMwXHVCMjk0IFx1RDFBMFx1QUUwMFwiLFxuICAgIFwiVG9nZ2xlIHRvIGRpc3BsYXkgb3IgaGlkZSB0aGUgY29udGVudCBvbiBjYXJkc1wiOiBcIlx1Q0U3NFx1QjREQ1x1QzVEMCBcdUIwQjRcdUM2QTlcdUM3NDQgXHVENDVDXHVDMkRDXHVENTU4XHVBQzcwXHVCMDk4IFx1QzIyOFx1QUUzMFx1QjI5NCBcdUQxQTBcdUFFMDBcIixcbiAgICBcIkZpbGUgTmFtZSBTaXplXCI6IFwiXHVEMzBDXHVDNzdDXHVCQTg1IFx1RDA2Q1x1QUUzMFwiLFxuICAgIFwiRmlyc3QgSGVhZGVyIFNpemVcIjogXCJcdUNDQUIgXHVCQzg4XHVDOUY4IFx1RDVFNFx1QjM1NCBcdUQwNkNcdUFFMzBcIixcbiAgICBcIkNvbnRlbnQgU2l6ZVwiOiBcIlx1QjBCNFx1QzZBOSBcdUQwNkNcdUFFMzBcIixcbiAgICBcIlNldCB0aGUgZm9udCBzaXplIGZvciB0aGUgZmlsZSBuYW1lXCI6IFwiXHVEMzBDXHVDNzdDXHVCQTg1XHVDNzU4IFx1QUUwMFx1QUYzNCBcdUQwNkNcdUFFMzAgXHVDMTI0XHVDODE1XCIsXG4gICAgXCJTZXQgdGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGZpcnN0IGhlYWRlclwiOiBcIlx1Q0NBQiBcdUJDODhcdUM5RjggXHVENUU0XHVCMzU0XHVDNzU4IFx1QUUwMFx1QUYzNCBcdUQwNkNcdUFFMzAgXHVDMTI0XHVDODE1XCIsXG4gICAgXCJTZXQgdGhlIGZvbnQgc2l6ZSBmb3IgdGhlIGNvbnRlbnRcIjogXCJcdUIwQjRcdUM2QTlcdUM3NTggXHVBRTAwXHVBRjM0IFx1RDA2Q1x1QUUzMCBcdUMxMjRcdUM4MTVcIixcbiAgICBcIkNvbnRlbnQgTGVuZ3RoXCI6IFwiXHVCMEI0XHVDNkE5IFx1QUUzOFx1Qzc3NFwiLFxuICAgIFwiTWF4aW11bSBjb250ZW50IGxlbmd0aCBkaXNwbGF5ZWQgb24gZWFjaCBjYXJkXCI6IFwiXHVBQzAxIFx1Q0U3NFx1QjREQ1x1QzVEMCBcdUQ0NUNcdUMyRENcdUI0MThcdUIyOTQgXHVDRDVDXHVCMzAwIFx1QjBCNFx1QzZBOSBcdUFFMzhcdUM3NzRcIixcblx0XCJLZXlib2FyZCBTaG9ydGN1dHNcIjogXCJcdUQwQTRcdUJDRjRcdUI0REMgXHVCMkU4XHVDRDk1XHVEMEE0XCIsXG5cdFwiQ2FyZCBOYXZpZ2F0b3IgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyBkZWZhdWx0IHNob3J0Y3V0cy4gWW91IGNhbiBjdXN0b21pemUgdGhlc2UgaW4gT2JzaWRpYW4ncyBIb3RrZXlzIHNldHRpbmdzOlwiOiBcIkNhcmQgTmF2aWdhdG9yXHVCMjk0IFx1QjJFNFx1Qzc0Q1x1QUNGQyBcdUFDMTlcdUM3NDAgXHVBRTMwXHVCQ0Y4IFx1QjJFOFx1Q0Q5NVx1RDBBNFx1Qjk3QyBcdUM4MUNcdUFDRjVcdUQ1NjlcdUIyQzhcdUIyRTQuIE9ic2lkaWFuXHVDNzU4IFx1QjJFOFx1Q0Q5NVx1RDBBNCBcdUMxMjRcdUM4MTVcdUM1RDBcdUMxMUMgXHVDNzc0XHVCOTdDIFx1QzBBQ1x1QzZBOVx1Qzc5MCBcdUM5QzBcdUM4MTVcdUQ1NjAgXHVDMjE4IFx1Qzc4OFx1QzJCNVx1QjJDOFx1QjJFNDpcIixcblx0XCJTY3JvbGwgVXAgT25lIENhcmRcIjogXCJcdUNFNzRcdUI0REMgXHVENTVDIFx1QUMxQyBcdUM3MDRcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XCIsXG5cdFwiU2Nyb2xsIERvd24gT25lIENhcmRcIjogXCJcdUNFNzRcdUI0REMgXHVENTVDIFx1QUMxQyBcdUM1NDRcdUI3OThcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XCIsXG5cdFwiU2Nyb2xsIExlZnQgT25lIENhcmRcIjogXCJcdUNFNzRcdUI0REMgXHVENTVDIFx1QUMxQyBcdUM2N0NcdUNBQkRcdUM3M0NcdUI4NUMgXHVDMkE0XHVEMDZDXHVCODY0XCIsXG5cdFwiU2Nyb2xsIFJpZ2h0IE9uZSBDYXJkXCI6IFwiXHVDRTc0XHVCNERDIFx1RDU1QyBcdUFDMUMgXHVDNjI0XHVCOTc4XHVDQUJEXHVDNzNDXHVCODVDIFx1QzJBNFx1RDA2Q1x1Qjg2NFwiLFxuXHRcIlNjcm9sbCBVcCBPbmUgUGFnZVwiOiBcIlx1RDM5OFx1Qzc3NFx1QzlDMCBcdUQ1NUMgXHVBQzFDIFx1QzcwNFx1Qjg1QyBcdUMyQTRcdUQwNkNcdUI4NjRcIixcblx0XCJTY3JvbGwgRG93biBPbmUgUGFnZVwiOiBcIlx1RDM5OFx1Qzc3NFx1QzlDMCBcdUQ1NUMgXHVBQzFDIFx1QzU0NFx1Qjc5OFx1Qjg1QyBcdUMyQTRcdUQwNkNcdUI4NjRcIixcblx0XCJDZW50ZXIgQWN0aXZlIENhcmRcIjogXCJcdUQ2NUNcdUMxMzEgXHVDRTc0XHVCNERDIFx1QzkxMVx1QzU1OSBcdUM4MTVcdUI4MkNcIixcblx0XCJUbyBjdXN0b21pemUgdGhlc2Ugc2hvcnRjdXRzLCBnbyB0byBTZXR0aW5ncyBcdTIxOTIgSG90a2V5cyBhbmQgc2VhcmNoIGZvciBcXFwiQ2FyZCBOYXZpZ2F0b3JcXFwiLlwiOiBcIlx1Qzc3NCBcdUIyRThcdUNEOTVcdUQwQTRcdUI5N0MgXHVDMEFDXHVDNkE5XHVDNzkwIFx1QzlDMFx1QzgxNVx1RDU1OFx1QjgyNFx1QkE3NCBcdUMxMjRcdUM4MTUgXHUyMTkyIFx1QjJFOFx1Q0Q5NVx1RDBBNFx1Qjg1QyBcdUM3NzRcdUIzRDlcdUQ1NThcdUM1RUMgXFxcIkNhcmQgTmF2aWdhdG9yXFxcIlx1Qjk3QyBcdUFDODBcdUMwQzlcdUQ1NThcdUMxMzhcdUM2OTQuXCJcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBLElBQUFBLG1CQUFnRDs7O0FDQWhELElBQUFDLG1CQUF3Qzs7O0FDQXhDLElBQUFDLG1CQUEyQzs7O0FDQTNDLHNCQUEyQzs7O0FDRjNDLElBQU0sZ0JBQWdCO0FBQUEsRUFDcEIsTUFBTTtBQUFBLEVBQ04sSUFBSSxNQUFNO0FBQ1IsU0FBSyxPQUFPLE9BQU8sSUFBSTtBQUFBLEVBQ3pCO0FBQUEsRUFDQSxLQUFLLE1BQU07QUFDVCxTQUFLLE9BQU8sUUFBUSxJQUFJO0FBQUEsRUFDMUI7QUFBQSxFQUNBLE1BQU0sTUFBTTtBQUNWLFNBQUssT0FBTyxTQUFTLElBQUk7QUFBQSxFQUMzQjtBQUFBLEVBQ0EsT0FBTyxNQUFNLE1BQU07QUFDakIsUUFBSSxXQUFXLFFBQVEsSUFBSSxFQUFHLFNBQVEsSUFBSSxFQUFFLE1BQU0sU0FBUyxJQUFJO0FBQUEsRUFDakU7QUFDRjtBQUNBLElBQU0sU0FBTixNQUFNLFFBQU87QUFBQSxFQUNYLFlBQVksZ0JBQWdC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TyxNQUFNLE1BQU0sT0FBTyxNQUFNLE9BQU8sT0FBTyxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxTQUFTLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxJQUFJO0FBQUEsRUFDckksSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUFBLEVBQ1QsSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxNQUFNLE1BQU0sT0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU8sTUFBTSxPQUFPLE9BQU8sTUFBTSxTQUFTLE1BQU0sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUFBLEVBQzdZLElBQUksQ0FBQyxHQUFHLENBQUM7QUFBQSxFQUNULElBQUk7QUFDTixHQUFHO0FBQUEsRUFDRCxNQUFNLENBQUMsTUFBTSxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUFBLEVBQzVJLElBQUksQ0FBQyxDQUFDO0FBQUEsRUFDTixJQUFJO0FBQ04sR0FBRztBQUFBLEVBQ0QsTUFBTSxDQUFDLE1BQU0sTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sSUFBSTtBQUFBLEVBQ3RELElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUFBLEVBQ1osSUFBSTtBQUNOLEdBQUc7QUFBQSxFQUNELE1BQU0sQ0FBQyxJQUFJO0FBQUEsRUFDWCxJQUFJLENBQUMsR0FBRyxHQUFH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QUFRLFdBQVc7QUFBQSxVQUNsQixLQUFLO0FBQ0oseUJBQWEsY0FBYyxTQUFTLEtBQUssSUFBSSxjQUFjLFdBQVcsS0FBSztBQUMzRTtBQUFBLFVBQ0QsS0FBSztBQUNKLHlCQUFhLGNBQWMsV0FBVyxLQUFLLElBQUksY0FBYyxZQUFZLEtBQUs7QUFDOUU7QUFBQSxVQUNELEtBQUs7QUFDSiwwQkFBYyxXQUFXLEtBQUs7QUFDOUI7QUFBQSxVQUNELEtBQUs7QUFDSiwwQkFBYyxZQUFZLEtBQUs7QUFDL0I7QUFBQSxRQUNGO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFRyxlQUFlO0FBQ1gsVUFBTSxTQUFTLEtBQUssSUFBSSxVQUFVLGdCQUFnQix3QkFBd0I7QUFDMUUsV0FBTyxRQUFRLENBQUMsU0FBUztBQUNyQixVQUFJLEtBQUssZ0JBQWdCLGVBQWU7QUFDcEMsYUFBSyxLQUFLLHVCQUF1QjtBQUFBLE1BQ3JDO0FBQUEsSUFDSixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEscUJBQXFCLGVBQXdCO0FBaEtqRDtBQWlLUSxVQUFNLFFBQU8sVUFBSyxJQUFJLFVBQVUsZ0JBQWdCLHdCQUF3QixFQUFFLENBQUMsTUFBOUQsbUJBQWlFO0FBQzlFLFFBQUksTUFBTTtBQUNOLFdBQUssY0FBYyxhQUFhLGFBQWE7QUFBQSxJQUNqRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLFVBQVUsV0FBMEIsT0FBdUI7QUF2Sy9EO0FBd0tRLFVBQU0sUUFBTyxVQUFLLElBQUksVUFBVSxnQkFBZ0Isd0JBQXdCLEVBQUUsQ0FBQyxNQUE5RCxtQkFBaUU7QUFDOUUsUUFBSSxNQUFNO0FBQ04sV0FBSyxjQUFjLFVBQVUsV0FBVyxLQUFLO0FBQUEsSUFDakQ7QUFBQSxFQUNKO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxFQUFFLFVBQVUsSUFBSSxLQUFLO0FBQzNCLFFBQUksT0FBTyxVQUFVLGdCQUFnQix3QkFBd0IsRUFBRSxDQUFDO0FBRWhFLFFBQUksQ0FBQyxNQUFNO0FBQ1AsWUFBTSxZQUFZLFVBQVUsYUFBYSxLQUFLO0FBQzlDLFVBQUksV0FBVztBQUNYLGNBQU0sVUFBVSxhQUFhLEVBQUUsTUFBTSwwQkFBMEIsUUFBUSxLQUFLLENBQUM7QUFDN0UsZUFBTyxVQUFVLGdCQUFnQix3QkFBd0IsRUFBRSxDQUFDO0FBQUEsTUFDaEU7QUFBQSxJQUNKO0FBRUEsUUFBSSxNQUFNO0FBQ04sZ0JBQVUsV0FBVyxJQUFJO0FBQUEsSUFDN0I7QUFBQSxFQUNKO0FBQUEsRUFFQSxpQkFBaUI7QUFDYixTQUFLLGlCQUFpQjtBQUFBLEVBQzFCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInQiLCAibW9kdWxlIiwgImNvcHkiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
